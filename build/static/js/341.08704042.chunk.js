"use strict";(self.webpackChunkfundacion_todo_por_un_alma=self.webpackChunkfundacion_todo_por_un_alma||[]).push([[341],{3341:(e,a,r)=>{r.r(a),r.d(a,{default:()=>f});var o=r(5043),n=r(3474),t=r(4349),i=r(8368),s=r(1379),l=r(3714),d=r(6938),c=r(579);const u=o.memo(()=>{const[e,a]=(0,o.useState)([]),[r,s]=(0,o.useState)(!0),[d,u]=(0,o.useState)(null),{filters:h,setFilter:f,clearFilters:b}=(0,l.R7)({sede:"Todas",genero:"Todos",estado:"Todos",busqueda:""}),v=(0,l.hS)(),x=(0,l.hS)(),y=(0,l.hS)(),C=(0,o.useCallback)(async()=>{try{s(!0),u(null),console.log("\ud83d\udd04 Cargando participantes...");const e=await t.C5.getParticipantes();if(console.log("\ud83d\udcca Resultado participantes:",e),console.log("\ud83d\udce6 result.data:",e.data),console.log("\ud83d\udce6 result.data type:",typeof e.data),console.log("\ud83d\udce6 result.data isArray:",Array.isArray(e.data)),e.error)throw new Error(e.error.message||"Error al cargar participantes");const r=Array.isArray(e.data)?e.data:[];console.log("\ud83d\udd04 participantesData:",r),console.log("\ud83d\udd04 participantesData.length:",r.length),a(r),console.log("\u2705 Participantes cargados:",r.length)}catch(e){console.error("\u274c Error cargando participantes:",e),u(e.message||"Error desconocido al cargar participantes"),a([])}finally{s(!1)}},[]);(0,o.useEffect)(()=>{C()},[C]);const A=(0,o.useCallback)((e,a)=>{"ver"===e?v.openModal(null,a):"editar"===e?x.openModal(null,a):"crear"===e&&y.openModal()},[v,x,y]),_=(0,o.useMemo)(()=>{let a=Array.isArray(e)?e:[];if("Todas"!==h.sede&&(a=a.filter(e=>{var a;return((null===(a=e.sede)||void 0===a?void 0:a.direccion)||e.sede||"").toLowerCase().includes(h.sede.toLowerCase())})),"Todos"!==h.genero&&(a=a.filter(e=>e.genero===h.genero)),"Todos"!==h.estado){const e=h.estado.toUpperCase();a=a.filter(a=>a.estado===h.estado||a.estado===e||"Activo"===h.estado&&"ACTIVO"===a.estado||"Inactivo"===h.estado&&"INACTIVO"===a.estado)}if(h.busqueda){const e=h.busqueda.toLowerCase();a=a.filter(a=>(a.numero_documento||"").toLowerCase().includes(e))}return a},[e,h]),N=(0,o.useCallback)(async(e,r)=>{try{await t.C5.updateParticipante(e,{estado:r});const{data:o}=await t.C5.getParticipantes();a(o||[])}catch(o){console.error("Error updating status:",o)}},[]),w=(0,o.useCallback)((e,a)=>{switch(e){case"ver":A("ver",a);break;case"editar":A("editar",a)}},[A]),E=(0,o.useCallback)(()=>{const e=window.open("","_blank"),a=(new Date).toLocaleDateString("es-ES"),r="\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Lista de Participantes - ".concat(a,'</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              color: #333;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #333;\n              padding-bottom: 20px;\n            }\n            .header h1 {\n              color: #2563eb;\n              margin: 0;\n              font-size: 24px;\n            }\n            .filters {\n              margin-bottom: 20px;\n              background: #f8f9fa;\n              padding: 15px;\n              border-radius: 5px;\n            }\n            .filters h3 {\n              margin: 0 0 10px 0;\n              color: #495057;\n            }\n            .filters p {\n              margin: 5px 0;\n              font-size: 14px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px 12px;\n              text-align: left;\n            }\n            th {\n              background-color: #f8f9fa;\n              font-weight: bold;\n              color: #495057;\n            }\n            tr:nth-child(even) {\n              background-color: #f9f9f9;\n            }\n            .stats {\n              margin-top: 30px;\n              background: #e3f2fd;\n              padding: 15px;\n              border-radius: 5px;\n            }\n            .stats h3 {\n              margin: 0 0 10px 0;\n              color: #1976d2;\n            }\n            .stats p {\n              margin: 5px 0;\n              font-size: 14px;\n            }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h1>Lista de Participantes</h1>\n            <p>Corporaci\xf3n Todo por un Alma</p>\n            <p>Fecha de generaci\xf3n: ').concat(a,'</p>\n          </div>\n\n          <div class="filters">\n            <h3>Filtros aplicados:</h3>\n            <p><strong>Sede:</strong> ').concat("Todas"===h.sede?"Todas las sedes":h.sede,"</p>\n            <p><strong>G\xe9nero:</strong> ").concat("Todos"===h.genero?"Todos los g\xe9neros":h.genero,"</p>\n            <p><strong>Estado:</strong> ").concat("Todos"===h.estado?"Todos los estados":h.estado,"</p>\n            ").concat(h.busqueda?'<p><strong>B\xfasqueda:</strong> "'.concat(h.busqueda,'"</p>'):"","\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Nombre</th>\n                <th>Edad</th>\n                <th>G\xe9nero</th>\n                <th>Tel\xe9fono</th>\n                <th>Sede</th>\n                <th>Estado</th>\n              </tr>\n            </thead>\n            <tbody>\n              ").concat(_.map(e=>"\n                <tr>\n                  <td>".concat(e.nombre||"N/A","</td>\n                  <td>").concat(e.edad||"N/A","</td>\n                  <td>").concat(e.genero||"N/A","</td>\n                  <td>").concat(e.telefono||"N/A","</td>\n                  <td>").concat(e.sede||"N/A","</td>\n                  <td>").concat(e.estado||"N/A","</td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n\n          <div class="stats">\n            <h3>Estad\xedsticas:</h3>\n            <p><strong>Total de participantes:</strong> ').concat(_.length,"</p>\n            <p><strong>Activos:</strong> ").concat(_.filter(e=>"Activo"===e.estado).length,"</p>\n            <p><strong>Inactivos:</strong> ").concat(_.filter(e=>"Inactivo"===e.estado).length,"</p>\n          </div>\n\n          <script>\n            window.onload = function() {\n              window.print();\n              setTimeout(function() {\n                window.close();\n              }, 1000);\n            }\n          <\/script>\n        </body>\n      </html>\n    ");e.document.write(r),e.document.close()},[h,_]);return r?(0,c.jsx)(n.A,{title:"Participantes",subtitle:"Gesti\xf3n de participantes",loading:!0,loadingText:"Cargando participantes..."}):d?(0,c.jsx)(n.A,{title:"Participantes",subtitle:"Error al cargar datos",loading:!1,children:(0,c.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,c.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,c.jsxs)("p",{className:"text-red-600",children:["Error loading participants: ",d]})})})}):(0,c.jsxs)(n.A,{title:"Gesti\xf3n de Participantes",subtitle:"Administra los participantes de la fundaci\xf3n",extraActions:(0,c.jsxs)("div",{className:"flex space-x-3",children:[(0,c.jsxs)("button",{onClick:()=>E(),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",title:"Exportar lista filtrada a PDF",children:[(0,c.jsx)("i",{className:"fas fa-file-pdf mr-2"}),"Exportar PDF"]}),(0,c.jsxs)("button",{onClick:()=>A("crear",null),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,c.jsx)("i",{className:"fas fa-plus mr-2"}),"Nuevo Participante"]})]}),children:[(0,c.jsxs)("section",{className:"px-6 py-6",children:[(0,c.jsx)(i.Qn,{filters:[{type:"select",name:"sede",label:"Sede",options:[{value:"Todas",label:"Todas las Sedes"},{value:"Bello Principal",label:"Bello Principal"},{value:"Bello Campestre",label:"Bello Campestre"},{value:"Apartad\xf3",label:"Apartad\xf3"}]},{type:"select",name:"genero",label:"G\xe9nero",options:[{value:"Todos",label:"Todos los G\xe9neros"},{value:"MASCULINO",label:"Masculino"},{value:"FEMENINO",label:"Femenino"}]},{type:"select",name:"estado",label:"Estado",options:[{value:"Todos",label:"Todos los Estados"},{value:"Activo",label:"Activo"},{value:"Inactivo",label:"Inactivo"}]},{type:"search",name:"busqueda",label:"B\xfasqueda por Documento",placeholder:"N\xfamero de documento...",debounceMs:300}],values:h,onChange:f,onClear:b,showClearButton:!0}),(0,c.jsx)("div",{className:"mt-6",children:(0,c.jsx)(i.MD,{stats:[{title:"Total Participantes",value:_.length,icon:"fas fa-users",color:"blue"},{title:"Activos",value:_.filter(e=>"ACTIVO"===e.estado||"Activo"===e.estado).length,icon:"fas fa-user-check",color:"green"},{title:"Inactivos",value:_.filter(e=>"INACTIVO"===e.estado||"Inactivo"===e.estado).length,icon:"fas fa-user-times",color:"red"}],columns:3,gap:"md"})}),(0,c.jsx)("div",{className:"mt-6",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,c.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Lista de Participantes"})}),(0,c.jsx)(i.bQ,{data:_,keyExtractor:e=>e.id||e.id_participante,columns:[{key:"participante",header:"Participante",render:e=>{const a=e.nombres&&e.apellidos?"".concat(e.nombres," ").concat(e.apellidos):e.nombre||"N/A",r=e.tipo_documento||"N/A",o=e.numero_documento||"N/A";return(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,c.jsx)("i",{className:"fas fa-user text-blue-600"})}),(0,c.jsxs)("div",{className:"ml-4",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:[r," ",o]})]})]})}},{key:"edad",header:"Edad",render:e=>{if(e.fecha_nacimiento){const a=new Date(e.fecha_nacimiento),r=new Date;let o=r.getFullYear()-a.getFullYear();const n=r.getMonth()-a.getMonth();return(n<0||0===n&&r.getDate()<a.getDate())&&o--,"".concat(o," a\xf1os")}return e.edad?"".concat(e.edad," a\xf1os"):"N/A"}},{key:"genero",header:"G\xe9nero",render:e=>"MASCULINO"===e.genero?"Masculino":"FEMENINO"===e.genero?"Femenino":"N/A"},{key:"fecha_ingreso",header:"Fecha Ingreso",render:e=>e.fecha_ingreso?new Date(e.fecha_ingreso).toLocaleDateString("es-ES"):"N/A"},{key:"sede",header:"Sede",render:e=>{var a;return(null===(a=e.sede)||void 0===a?void 0:a.direccion)||e.sede||"N/A"}},{key:"estado",header:"Estado",render:e=>(0,c.jsx)(i.re,{currentStatus:e.estado,statuses:[{value:"ACTIVO",label:"Activo",variant:"success"},{value:"Activo",label:"Activo",variant:"success"},{value:"INACTIVO",label:"Inactivo",variant:"danger"},{value:"Inactivo",label:"Inactivo",variant:"danger"}],onChange:a=>N(e.id||e.id_participante,a)})},{key:"acciones",header:"Acciones",render:e=>(0,c.jsx)(i.yd,{actions:[{label:"Ver detalles",icon:"fas fa-eye",onClick:()=>w("ver",e)},{label:"Editar",icon:"fas fa-edit",onClick:()=>w("editar",e)}]})}],loading:r})]})})]}),(0,c.jsx)(m,{isOpen:v.isOpen,onClose:v.closeModal,participante:v.modalData,onCrearAcudiente:()=>{console.log("Crear acudiente para participante:",v.modalData)}}),(0,c.jsx)(p,{isOpen:x.isOpen,onClose:x.closeModal,participante:x.modalData,onActualizar:C}),(0,c.jsx)(g,{isOpen:y.isOpen,onClose:y.closeModal,onCrear:C})]})}),m=e=>{var a;let{isOpen:r,onClose:n,participante:i,onCrearAcudiente:l}=e;const[d,u]=(0,o.useState)([]),[m,p]=(0,o.useState)(!1),g=(0,o.useCallback)(async()=>{if(null!==i&&void 0!==i&&i.id||null!==i&&void 0!==i&&i.id_participante)try{p(!0);const e=i.id||i.id_participante,a=await t.C5.getAcudientesByParticipante(e);a.data&&Array.isArray(a.data)?u(a.data):u([])}catch(e){console.error("Error loading acudientes:",e),u([])}finally{p(!1)}},[i]);if((0,o.useEffect)(()=>{r&&i&&g()},[r,i,g]),!i)return null;const h=i.nombres&&i.apellidos?"".concat(i.nombres," ").concat(i.apellidos):i.nombre||"N/A",f=(()=>{if(i.fecha_nacimiento){const e=new Date(i.fecha_nacimiento),a=new Date;let r=a.getFullYear()-e.getFullYear();const o=a.getMonth()-e.getMonth();return(o<0||0===o&&a.getDate()<e.getDate())&&r--,r}return i.edad||"N/A"})(),b="ACTIVO"===i.estado||"Activo"===i.estado?"Activo":"Inactivo",v="ACTIVO"===i.estado||"Activo"===i.estado?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return(0,c.jsx)(s.J$,{isOpen:r,onClose:n,title:"Detalles del Participante",data:[{label:"Nombre Completo",value:h},{label:"Tipo de Documento",value:i.tipo_documento||"N/A"},{label:"N\xfamero de Documento",value:i.numero_documento||"N/A"},{label:"Edad",value:"number"===typeof f?"".concat(f," a\xf1os"):f},{label:"Fecha de Nacimiento",value:i.fecha_nacimiento?new Date(i.fecha_nacimiento).toLocaleDateString("es-ES"):"N/A"},{label:"G\xe9nero",value:"MASCULINO"===i.genero?"Masculino":"FEMENINO"===i.genero?"Femenino":"N/A"},{label:"Fecha de Ingreso",value:i.fecha_ingreso?new Date(i.fecha_ingreso).toLocaleDateString("es-ES"):"N/A"},{label:"Sede",value:(null===(a=i.sede)||void 0===a?void 0:a.direccion)||i.sede||"N/A"},{label:"Tel\xe9fono",value:i.telefono||"N/A"},{label:"Estado",value:(0,c.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(v),children:b})},{label:"Acudientes",value:(0,c.jsx)("div",{className:"mt-2",children:m?(0,c.jsx)("p",{className:"text-sm text-gray-500",children:"Cargando acudientes..."}):d.length>0?(0,c.jsxs)("div",{className:"space-y-2",children:[d.map((e,a)=>(0,c.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:(0,c.jsx)("div",{className:"flex items-start justify-between",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.nombres," ",e.apellidos]}),(0,c.jsxs)("p",{className:"text-xs text-gray-500",children:[e.parentesco," \u2022 ",e.tipo_documento," ",e.numero_documento]}),(0,c.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,c.jsx)("i",{className:"fas fa-phone mr-1"}),e.telefono,e.email&&(0,c.jsxs)("span",{className:"ml-2",children:[(0,c.jsx)("i",{className:"fas fa-envelope mr-1"}),e.email]})]})]})})},e.id_acudiente||a)),(0,c.jsxs)("button",{onClick:l,className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[(0,c.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar otro acudiente"]})]}):(0,c.jsxs)("div",{className:"text-center py-4",children:[(0,c.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"No hay acudientes registrados"}),(0,c.jsxs)("button",{onClick:l,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:[(0,c.jsx)("i",{className:"fas fa-plus mr-1"}),"Agregar acudiente"]})]})})}]})},p=e=>{var a,r;let{isOpen:o,onClose:n,participante:i,onActualizar:l}=e;if(!i)return null;return(0,c.jsx)(s.M9,{isOpen:o,onClose:n,title:"Editar Participante",initialData:{tipo_documento:i.tipo_documento||"CC",numero_documento:i.numero_documento||"",nombres:i.nombres||(null===(a=i.nombre)||void 0===a?void 0:a.split(" ")[0])||"",apellidos:i.apellidos||(null===(r=i.nombre)||void 0===r?void 0:r.split(" ").slice(1).join(" "))||"",fecha_nacimiento:i.fecha_nacimiento||"",genero:i.genero||"MASCULINO",fecha_ingreso:i.fecha_ingreso||"",estado:i.estado||"ACTIVO",id_sede:i.id_sede||i.sede_id||""},onSubmit:async e=>{var a,r;if(console.log("\ud83d\udd04 Actualizando participante:",e),!e.tipo_documento||!e.numero_documento)throw new Error("Tipo y n\xfamero de documento son requeridos");if(null===(a=e.nombres)||void 0===a||!a.trim()||null===(r=e.apellidos)||void 0===r||!r.trim())throw new Error("Nombres y apellidos son requeridos");if(!e.fecha_nacimiento||!e.fecha_ingreso)throw new Error("Fechas de nacimiento e ingreso son requeridas");if(!e.id_sede)throw new Error("Debe seleccionar una sede");const o=(0,d.Zi)(e.fecha_nacimiento);if(!o.isValid)throw new Error(o.error);const n=(0,d.Hc)(e.fecha_ingreso);if(!n.isValid)throw new Error(n.error);const s=i.id||i.id_participante,c=await(0,d.Ri)(e.numero_documento,s);if(!c.isValid)throw new Error(c.error);const u=await(0,d.Wk)(e.id_sede);if(!u.isValid)throw new Error(u.error);const m=await t.C5.updateParticipante(s,e);if(m.error)throw new Error(m.error.message||"Error al actualizar participante");console.log("\u2705 Participante actualizado exitosamente"),l()},submitLabel:"Guardar Cambios",children:e=>{let{formData:a,handleChange:r,errors:o}=e;return(0,c.jsx)(h,{formData:a,handleChange:r,errors:o})}})},g=e=>{let{isOpen:a,onClose:r,onCrear:o}=e;return(0,c.jsx)(s.s5,{isOpen:a,onClose:r,title:"Nuevo Participante",defaultValues:{tipo_documento:"CC",numero_documento:"",nombres:"",apellidos:"",fecha_nacimiento:"",genero:"MASCULINO",fecha_ingreso:"",estado:"ACTIVO",id_sede:""},onSubmit:async e=>{var a,r;if(console.log("\ud83d\udd04 Creando participante:",e),!e.tipo_documento||!e.numero_documento)throw new Error("Tipo y n\xfamero de documento son requeridos");if(null===(a=e.nombres)||void 0===a||!a.trim()||null===(r=e.apellidos)||void 0===r||!r.trim())throw new Error("Nombres y apellidos son requeridos");if(!e.fecha_nacimiento||!e.fecha_ingreso)throw new Error("Fechas de nacimiento e ingreso son requeridas");if(!e.id_sede)throw new Error("Debe seleccionar una sede");const n=(0,d.Zi)(e.fecha_nacimiento);if(!n.isValid)throw new Error(n.error);const i=(0,d.Hc)(e.fecha_ingreso);if(!i.isValid)throw new Error(i.error);const s=await(0,d.Ri)(e.numero_documento);if(!s.isValid)throw new Error(s.error);const l=await(0,d.Wk)(e.id_sede);if(!l.isValid)throw new Error(l.error);const c=await t.C5.createParticipante(e);if(c.error)throw new Error(c.error.message||"Error al crear participante");console.log("\u2705 Participante creado exitosamente"),o()},submitLabel:"Crear Participante",children:e=>{let{formData:a,handleChange:r,errors:o}=e;return(0,c.jsx)(h,{formData:a,handleChange:r,errors:o})}})},h=e=>{let{formData:a,handleChange:r,errors:n}=e;const[s,l]=(0,o.useState)([]),[d,u]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{try{u(!0);const e=await t.C5.getSedes();e.data&&Array.isArray(e.data)&&l(e.data)}catch(e){console.error("Error loading sedes:",e)}finally{u(!1)}})()},[]),(0,c.jsxs)(i.gE,{columns:2,gap:"md",children:[(0,c.jsx)(i.FX,{label:"Tipo de Documento",name:"tipo_documento",value:a.tipo_documento,onChange:e=>r("tipo_documento",e),options:[{value:"CC",label:"C\xe9dula de Ciudadan\xeda"},{value:"TI",label:"Tarjeta de Identidad"},{value:"CE",label:"C\xe9dula de Extranjer\xeda"},{value:"PASAPORTE",label:"Pasaporte"}],error:null===n||void 0===n?void 0:n.tipo_documento,required:!0}),(0,c.jsx)(i.ZQ,{label:"N\xfamero de Documento",name:"numero_documento",type:"text",value:a.numero_documento,onChange:e=>r("numero_documento",e),error:null===n||void 0===n?void 0:n.numero_documento,required:!0,placeholder:"Ingrese el n\xfamero de documento"}),(0,c.jsx)(i.ZQ,{label:"Nombres",name:"nombres",type:"text",value:a.nombres,onChange:e=>r("nombres",e),error:null===n||void 0===n?void 0:n.nombres,required:!0,placeholder:"Ingrese los nombres"}),(0,c.jsx)(i.ZQ,{label:"Apellidos",name:"apellidos",type:"text",value:a.apellidos,onChange:e=>r("apellidos",e),error:null===n||void 0===n?void 0:n.apellidos,required:!0,placeholder:"Ingrese los apellidos"}),(0,c.jsx)(i.ZQ,{label:"Fecha de Nacimiento",name:"fecha_nacimiento",type:"date",value:a.fecha_nacimiento,onChange:e=>r("fecha_nacimiento",e),error:null===n||void 0===n?void 0:n.fecha_nacimiento,required:!0}),(0,c.jsx)(i.FX,{label:"G\xe9nero",name:"genero",value:a.genero,onChange:e=>r("genero",e),options:[{value:"MASCULINO",label:"Masculino"},{value:"FEMENINO",label:"Femenino"}],error:null===n||void 0===n?void 0:n.genero,required:!0}),(0,c.jsx)(i.ZQ,{label:"Fecha de Ingreso",name:"fecha_ingreso",type:"date",value:a.fecha_ingreso,onChange:e=>r("fecha_ingreso",e),error:null===n||void 0===n?void 0:n.fecha_ingreso,required:!0}),(0,c.jsx)(i.FX,{label:"Estado",name:"estado",value:a.estado,onChange:e=>r("estado",e),options:[{value:"ACTIVO",label:"Activo"},{value:"INACTIVO",label:"Inactivo"}],error:null===n||void 0===n?void 0:n.estado,required:!0}),(0,c.jsx)(i.FX,{label:"Sede",name:"id_sede",value:a.id_sede,onChange:e=>r("id_sede",e),options:d?[{value:"",label:"Cargando sedes..."}]:s.map(e=>({value:e.id_sede||e.id,label:e.direccion||e.nombre})),error:null===n||void 0===n?void 0:n.id_sede,required:!0,disabled:d})]})},f=u},6938:(e,a,r)=>{r.d(a,{BZ:()=>t,DT:()=>i,F2:()=>m,Hc:()=>d,Ri:()=>n,Wk:()=>u,Zi:()=>l,ju:()=>c});var o=r(4349);const n=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e||!e.trim())return{isValid:!1,error:"El n\xfamero de documento es requerido"};const r=await o.C5.getParticipantes();if(r.data&&Array.isArray(r.data)){if(r.data.some(r=>{const o=r.id||r.id_participante;return r.numero_documento===e&&o!==a}))return{isValid:!1,error:"El n\xfamero de documento ya est\xe1 registrado para otro participante"}}return{isValid:!0,error:null}}catch(r){return console.error("Error validating participante documento:",r),{isValid:!0,error:null}}},t=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(!e||!e.trim())return{isValid:!1,error:"El n\xfamero de documento es requerido"};const r=await o.C5.getAcudientes();if(r.data&&Array.isArray(r.data)){if(r.data.some(r=>{const o=r.id||r.id_acudiente;return r.numero_documento===e&&o!==a}))return{isValid:!1,error:"El n\xfamero de documento ya est\xe1 registrado para otro acudiente"}}return{isValid:!0,error:null}}catch(r){return console.error("Error validating acudiente documento:",r),{isValid:!0,error:null}}},i=e=>{if(!e||!e.trim())return{isValid:!1,error:"El email es requerido"};return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{isValid:!0,error:null}:{isValid:!1,error:"El formato del email no es v\xe1lido"}},s=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fecha";if(!e)return{isValid:!1,error:"La ".concat(a," es requerida")};const r=new Date(e),o=new Date;return o.setHours(23,59,59,999),r instanceof Date&&!isNaN(r.getTime())?r>o?{isValid:!1,error:"La ".concat(a," no puede ser futura")}:{isValid:!0,error:null}:{isValid:!1,error:"La ".concat(a," no es v\xe1lida")}},l=e=>s(e,"fecha de nacimiento"),d=e=>s(e,"fecha de ingreso"),c=async e=>{try{if(!e)return{isValid:!1,error:"Debe seleccionar un participante"};const a=await o.C5.getParticipantes();if(a.data&&Array.isArray(a.data)){if(!a.data.some(a=>(a.id_participante||a.id)===parseInt(e)))return{isValid:!1,error:"El participante seleccionado no existe"}}return{isValid:!0,error:null}}catch(a){return console.error("Error validating participante exists:",a),{isValid:!1,error:"Error al validar el participante"}}},u=async e=>{try{if(!e)return{isValid:!1,error:"Debe seleccionar una sede"};const a=await o.C5.getSedes();if(a.data&&Array.isArray(a.data)){if(!a.data.some(a=>(a.id_sede||a.id)===parseInt(e)))return{isValid:!1,error:"La sede seleccionada no existe"}}return{isValid:!0,error:null}}catch(a){return console.error("Error validating sede exists:",a),{isValid:!1,error:"Error al validar la sede"}}},m=async(e,a)=>{const r=await c(e);if(!r.isValid)return r;const n=await(async e=>{try{if(!e)return{isValid:!1,error:"Debe seleccionar un acudiente"};const a=await o.C5.getAcudientes();return a.data&&Array.isArray(a.data)&&!a.data.some(a=>(a.id_acudiente||a.id)===parseInt(e))?{isValid:!1,error:"El acudiente seleccionado no existe"}:{isValid:!0,error:null}}catch(a){return console.error("Error validating acudiente exists:",a),{isValid:!1,error:"Error al validar el acudiente"}}})(a);return n.isValid?{isValid:!0,error:null}:n}}}]);
//# sourceMappingURL=341.08704042.chunk.js.map