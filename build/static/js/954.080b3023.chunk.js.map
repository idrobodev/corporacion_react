{"version":3,"file":"static/js/954.080b3023.chunk.js","mappings":"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","sources":["shared/utils/exportUtils.js","components/layout/Sidebar.jsx","components/layout/DashboardHeader.jsx","components/layout/DashboardLayout.jsx","shared/utils/validationUtils.js","pages/Dashboard/Finance.jsx"],"sourcesContent":["/**\n * Export Utilities\n * Functions for exporting data to different formats (CSV, PDF)\n */\n\n/**\n * Format participant name consistently\n * @param {Object} participante - Participant object\n * @returns {string} Formatted full name\n */\nexport const formatParticipantName = (participante) => {\n  if (!participante) return 'N/A';\n  \n  if (participante.nombres && participante.apellidos) {\n    return `${participante.nombres} ${participante.apellidos}`.trim();\n  }\n  \n  return participante.nombre || 'N/A';\n};\n\n/**\n * Format sede information\n * @param {Object|string} sede - Sede object or string\n * @returns {string} Formatted sede name\n */\nexport const formatSede = (sede) => {\n  if (!sede) return 'N/A';\n  \n  if (typeof sede === 'object' && sede !== null) {\n    return sede.direccion || sede.nombre || 'N/A';\n  }\n  \n  return String(sede);\n};\n\n/**\n * Normalize status display\n * @param {string} estado - Status value\n * @returns {string} Normalized status\n */\nexport const normalizeStatus = (estado) => {\n  if (!estado) return 'N/A';\n  \n  const upper = String(estado).toUpperCase();\n  if (upper === 'ACTIVO') return 'Activo';\n  if (upper === 'INACTIVO') return 'Inactivo';\n  if (upper === 'PAGADA') return 'Pagada';\n  if (upper === 'PENDIENTE') return 'Pendiente';\n  if (upper === 'VENCIDA') return 'Vencida';\n  \n  return estado;\n};\n\n/**\n * Format gender display\n * @param {string} genero - Gender value\n * @returns {string} Formatted gender\n */\nexport const formatGender = (genero) => {\n  if (!genero) return 'N/A';\n  \n  if (genero === 'MASCULINO') return 'Masculino';\n  if (genero === 'FEMENINO') return 'Femenino';\n  \n  return genero;\n};\n\n/**\n * Format document type and number\n * @param {string} tipo - Document type\n * @param {string} numero - Document number\n * @returns {string} Formatted document\n */\nexport const formatDocument = (tipo, numero) => {\n  if (!numero) return 'N/A';\n  const tipoDoc = tipo || 'CC';\n  return `${tipoDoc}: ${numero}`;\n};\n\n/**\n * Convert array of objects to CSV format\n * @param {Array} data - Array of objects to convert\n * @param {Array} headers - Array of header objects {key, label}\n * @returns {string} CSV formatted string\n */\nexport const arrayToCSV = (data, headers) => {\n  if (!data || !Array.isArray(data) || data.length === 0) {\n    return '';\n  }\n\n  // Use semicolon as delimiter for Spanish/Latin American Excel compatibility\n  const delimiter = ';';\n\n  // Create header row\n  const headerRow = headers.map(header => `\"${header.label}\"`).join(delimiter);\n\n  // Create data rows\n  const dataRows = data.map(row => {\n    return headers.map(header => {\n      const value = getNestedValue(row, header.key);\n      // Escape quotes and wrap in quotes if contains delimiter, quote, or newline\n      const stringValue = String(value || '');\n      if (stringValue.includes(delimiter) || stringValue.includes('\"') || stringValue.includes('\\n')) {\n        return `\"${stringValue.replace(/\"/g, '\"\"')}\"`;\n      }\n      return stringValue;\n    }).join(delimiter);\n  });\n\n  return [headerRow, ...dataRows].join('\\n');\n};\n\n/**\n * Create enhanced CSV with metadata, statistics, and better formatting\n * @param {Object} options - Configuration options\n * @param {string} options.title - Title of the report\n * @param {Array} options.data - Array of data objects\n * @param {Array} options.headers - Array of header objects {key, label}\n * @param {Object} options.metadata - Additional metadata {organization, generatedBy, etc}\n * @param {Object} options.statistics - Statistics to include\n * @param {Object} options.filters - Applied filters\n * @returns {string} Enhanced CSV formatted string\n */\nexport const createEnhancedCSV = (options) => {\n  const {\n    title = 'Reporte',\n    data = [],\n    headers = [],\n    metadata = {},\n    statistics = {},\n    filters = {}\n  } = options;\n\n  const sections = [];\n  const currentDate = new Date().toLocaleDateString('es-CO', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n\n  // ========== SECCIÓN 1: ENCABEZADO Y METADATA ==========\n  sections.push(`\"${title.toUpperCase()}\"`);\n  sections.push(`\"Corporación Todo por un Alma\"`);\n  sections.push(`\"Fecha de generación:\",\"${currentDate}\"`);\n  \n  if (metadata.generatedBy) {\n    sections.push(`\"Generado por:\",\"${metadata.generatedBy}\"`);\n  }\n  \n  sections.push(''); // Línea en blanco\n\n  // ========== SECCIÓN 2: FILTROS APLICADOS ==========\n  const activeFilters = Object.entries(filters).filter(([key, value]) => {\n    return value && value !== 'all' && value !== 'Todos' && value !== 'Todas' && value !== '';\n  });\n\n  if (activeFilters.length > 0) {\n    sections.push(`\"FILTROS APLICADOS\"`);\n    activeFilters.forEach(([key, value]) => {\n      const filterLabel = key.charAt(0).toUpperCase() + key.slice(1).replace(/_/g, ' ');\n      sections.push(`\"${filterLabel}:\",\"${value}\"`);\n    });\n    sections.push(''); // Línea en blanco\n  }\n\n  // ========== SECCIÓN 3: ESTADÍSTICAS ==========\n  const statsEntries = Object.entries(statistics).filter(([_, value]) => value !== undefined);\n  \n  if (statsEntries.length > 0) {\n    sections.push(`\"ESTADÍSTICAS\"`);\n    statsEntries.forEach(([key, value]) => {\n      const statLabel = key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n      sections.push(`\"${statLabel}:\",\"${value}\"`);\n    });\n    sections.push(''); // Línea en blanco\n  }\n\n  // ========== SECCIÓN 4: DATOS ==========\n  sections.push(`\"DATOS DEL REPORTE\"`);\n  sections.push(''); // Línea en blanco\n\n  // Use semicolon as delimiter for Spanish/Latin American Excel compatibility\n  const delimiter = ';';\n\n  // Crear encabezados de columnas\n  const headerRow = headers.map(h => {\n    const label = h.label;\n    // Escapar comillas dobles y envolver en comillas si contiene delimitador, comillas o saltos de línea\n    if (label.includes(delimiter) || label.includes('\"') || label.includes('\\n')) {\n      return `\"${label.replace(/\"/g, '\"\"')}\"`;\n    }\n    return label;\n  }).join(delimiter);\n  sections.push(headerRow);\n\n  // Crear filas de datos\n  if (data.length === 0) {\n    sections.push(`\"No hay datos disponibles\"`);\n  } else {\n    data.forEach(row => {\n      const dataRow = headers.map(header => {\n        const value = getNestedValue(row, header.key);\n        const stringValue = String(value || '');\n        // Escapar comillas dobles y envolver en comillas si contiene delimitador, comillas o saltos de línea\n        if (stringValue.includes(delimiter) || stringValue.includes('\"') || stringValue.includes('\\n')) {\n          return `\"${stringValue.replace(/\"/g, '\"\"')}\"`;\n        }\n        return stringValue;\n      }).join(delimiter);\n      sections.push(dataRow);\n    });\n  }\n\n  sections.push(''); // Línea en blanco\n\n  // ========== SECCIÓN 5: RESUMEN FINAL ==========\n  sections.push(`\"RESUMEN\"`);\n  sections.push(`\"Total de registros:\",\"${data.length}\"`);\n  sections.push(`\"Reporte generado el:\",\"${currentDate}\"`);\n  \n  return sections.join('\\n');\n};\n\n/**\n * Format statistics for CSV export\n * @param {Array} data - Data array to analyze\n * @param {string} statusField - Field name containing status\n * @returns {Object} Statistics object\n */\nexport const generateStatistics = (data, statusField = 'estado') => {\n  const total = data.length;\n  const stats = {\n    'Total de Registros': total\n  };\n\n  // Count by status\n  const statusCounts = {};\n  data.forEach(item => {\n    const status = normalizeStatus(item[statusField]);\n    statusCounts[status] = (statusCounts[status] || 0) + 1;\n  });\n\n  Object.entries(statusCounts).forEach(([status, count]) => {\n    stats[status] = `${count} (${((count / total) * 100).toFixed(1)}%)`;\n  });\n\n  return stats;\n};\n\n/**\n * Download data as CSV file with UTF-8 BOM for proper Excel encoding\n * @param {string} csvContent - CSV content as string\n * @param {string} filename - Name of the file to download\n */\nexport const downloadCSV = (csvContent, filename) => {\n  // Add UTF-8 BOM for proper Excel encoding of special characters (ñ, á, é, í, ó, ú)\n  const BOM = '\\uFEFF';\n\n  // Ensure filename has .csv extension\n  const csvFilename = filename.endsWith('.csv') ? filename : `${filename}.csv`;\n\n  // Ensure proper line endings for Excel (CRLF)\n  const csvContentWithProperLineEndings = csvContent.replace(/\\n/g, '\\r\\n');\n\n  const blob = new Blob([BOM + csvContentWithProperLineEndings], {\n    type: 'text/csv;charset=utf-8;'\n  });\n\n  const link = document.createElement('a');\n\n  if (link.download !== undefined) {\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', csvFilename);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n  }\n};\n\n/**\n * Get nested value from object using dot notation\n * @param {Object} obj - Object to get value from\n * @param {string} path - Path to value (e.g., 'sede.direccion')\n * @returns {any} Value at path or undefined\n */\nexport const getNestedValue = (obj, path) => {\n  return path.split('.').reduce((current, key) => current?.[key], obj);\n};\n\n/**\n * Format date for CSV export\n * @param {string|Date} date - Date to format\n * @returns {string} Formatted date string\n */\nexport const formatDateForCSV = (date) => {\n  if (!date) return '';\n  try {\n    return new Date(date).toLocaleDateString('es-ES');\n  } catch {\n    return String(date);\n  }\n};\n\n/**\n * Format currency for CSV export\n * @param {number} amount - Amount to format\n * @returns {string} Formatted currency string\n */\nexport const formatCurrencyForCSV = (amount) => {\n  if (amount === null || amount === undefined) return '';\n  try {\n    return new Intl.NumberFormat('es-CO', {\n      style: 'currency',\n      currency: 'COP',\n      minimumFractionDigits: 0\n    }).format(amount);\n  } catch {\n    return String(amount);\n  }\n};\n\n/**\n * Calculate age from birth date\n * @param {string|Date} birthDate - Birth date\n * @returns {string} Age string or empty string\n */\nexport const calculateAge = (birthDate) => {\n  if (!birthDate) return '';\n  try {\n    const birth = new Date(birthDate);\n    const today = new Date();\n    let age = today.getFullYear() - birth.getFullYear();\n    const monthDiff = today.getMonth() - birth.getMonth();\n    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {\n      age--;\n    }\n    return age > 0 ? `${age} años` : '';\n  } catch {\n    return '';\n  }\n};","import React, { useState } from \"react\";\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { useAuth } from \"shared/contexts\";\nimport logo from \"../../assets/images/logos/logo.png\";\n\nconst Sidebar = ({ isOpen = false, onToggle = () => {}, isCollapsed = false, onToggleCollapse = () => {} }) => {\n  const { currentUser, logout } = useAuth();\n  const history = useHistory();\n  const [isMobile, setIsMobile] = useState(false);\n  const location = useLocation();\n  \n  // Get user role from currentUser\n  const userRole = currentUser?.rol || currentUser?.role || 'CONSULTA';\n\n  // Check for mobile screen size\n  React.useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => window.removeEventListener('resize', checkScreenSize);\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      history.push(\"/\");\n    } catch (error) {\n      console.error('Error during logout:', error);\n    }\n  };\n\n\n  const allMenuItems = [\n    {\n      id: 'dashboard',\n      icon: 'fas fa-home',\n      label: 'Dashboard',\n      link: '/dashboard',\n      badge: null,\n      roles: ['ADMINISTRADOR', 'CONSULTA'] // Available to all roles\n    },\n    {\n      id: 'participantes',\n      icon: 'fas fa-users',\n      label: 'Participantes',\n      link: '/participantes',\n      badge: null,\n      roles: ['ADMINISTRADOR', 'CONSULTA']\n    },\n    {\n      id: 'acudientes',\n      icon: 'fas fa-user-friends',\n      label: 'Acudientes',\n      link: '/acudientes',\n      badge: null,\n      roles: ['ADMINISTRADOR', 'CONSULTA']\n    },\n    {\n      id: 'financiero',\n      icon: 'fas fa-dollar-sign',\n      label: 'Mensualidades',\n      link: '/financiero',\n      badge: null,\n      roles: ['ADMINISTRADOR', 'CONSULTA']\n    },\n    {\n      id: 'usuarios',\n      icon: 'fas fa-users-cog',\n      label: 'Usuarios',\n      link: '/usuarios',\n      badge: null,\n      roles: ['ADMINISTRADOR'], // Only administrators\n      adminOnly: true\n    },\n    {\n      id: 'formatos',\n      icon: 'fas fa-file-alt',\n      label: 'Formatos',\n      link: '/formatos',\n      badge: null,\n      roles: ['ADMINISTRADOR', 'CONSULTA']\n    },\n    {\n      id: 'sedes',\n      icon: 'fas fa-building',\n      label: 'Sedes',\n      link: '/sedes',\n      badge: null,\n      roles: ['ADMINISTRADOR', 'CONSULTA']\n    },\n    {\n      id: 'configuracion',\n      icon: 'fas fa-cog',\n      label: 'Configuración',\n      link: '/configuracion',\n      badge: null,\n      roles: ['ADMINISTRADOR', 'CONSULTA']\n    }\n  ];\n  \n  // Filter menu items based on user role\n  const menuItems = allMenuItems.filter(item => \n    item.roles.includes(userRole)\n  );\n\n  return (\n    <>\n      {/* Mobile Overlay */}\n      {isOpen && isMobile && (\n        <div \n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300\"\n          onClick={onToggle}\n          aria-hidden=\"true\"\n        />\n      )}\n      \n      {/* Toggle Button - Mobile */}\n      {isMobile && (\n        <button\n          onClick={onToggle}\n          className=\"fixed top-4 right-4 z-[70] md:hidden bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 min-w-[48px] min-h-[48px] flex items-center justify-center\"\n          aria-label={isOpen ? 'Cerrar menú' : 'Abrir menú'}\n        >\n          <i className={`fas ${isOpen ? 'fa-times' : 'fa-bars'} text-xl transition-transform duration-200 ${isOpen ? 'rotate-90' : ''}`}></i>\n        </button>\n      )}\n      \n      \n      {/* Sidebar */}\n      <aside \n        data-testid=\"sidebar\"\n        className={`\n          fixed top-0 left-0 h-full text-gray-700 z-50\n          transform transition-transform duration-300 ease-in-out shadow-2xl\n          ${isMobile \n            ? `w-[280px] ${isOpen ? 'translate-x-0' : '-translate-x-full'}`\n            : isCollapsed \n              ? 'w-20 translate-x-0 hover:w-64' \n              : 'w-64 translate-x-0'\n          }\n        `}\n        style={{\n          background: 'linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%)',\n          backdropFilter: 'blur(20px)',\n          borderRight: '1px solid rgba(0, 0, 0, 0.1)'\n        }}\n      >\n        {/* Header with Logo */}\n        <div className={`\n          ${isCollapsed && !isMobile ? 'p-4' : 'p-5 md:p-6'} \n          border-b border-gray-200 \n          bg-gradient-to-r from-gray-50 to-gray-100 \n          transition-all duration-300 \n          relative\n        `}>\n          {/* Collapse/Expand toggle desktop only */}\n          {!isMobile && (\n            <button\n              onClick={onToggleCollapse}\n              aria-label={isCollapsed ? 'Expandir menú' : 'Colapsar menú'}\n              className=\"absolute -right-3 top-1/2 -translate-y-1/2 w-7 h-7 rounded-full bg-white border border-gray-200 shadow-md flex items-center justify-center hover:bg-gray-50 transition-colors z-10\"\n            >\n              <i className={`fas ${isCollapsed ? 'fa-angle-double-right' : 'fa-angle-double-left'} text-sm text-gray-600`}></i>\n            </button>\n          )}\n          \n          <div className={`flex items-center ${isCollapsed && !isMobile ? 'justify-center' : 'space-x-3'}`}>\n            {/* Logo responsive */}\n            <div className=\"relative flex-shrink-0\">\n              <img \n                src={logo} \n                alt=\"Corporación Logo\" \n                className={`\n                  ${isCollapsed && !isMobile ? 'w-10 h-10' : 'w-12 h-12 md:w-14 md:h-14'} \n                  rounded-xl object-cover bg-white p-2 shadow-md transition-all duration-300\n                `}\n              />\n              <div className=\"absolute -top-1 -right-1 w-3 h-3 md:w-4 md:h-4 bg-green-500 rounded-full border-2 border-white shadow-sm\"></div>\n            </div>\n            \n            {/* Título - ocultar cuando está colapsado en desktop */}\n            <div className={`${isCollapsed && !isMobile ? 'hidden' : 'block'} transition-all duration-300`}>\n              <h2 className=\"text-base md:text-lg font-Lato font-bold text-gray-800 leading-tight\">\n                Corporación\n              </h2>\n              <p className=\"text-xs font-Poppins text-gray-600\">\n                Todo por un Alma\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <nav className=\"p-3 md:p-4 flex-1 overflow-y-auto\">\n          <ul className=\"space-y-1\">\n            {menuItems.map((item) => (\n              <li key={item.id}>\n                <Link\n                  to={item.link}\n                  className={`\n                    flex items-center \n                    ${isCollapsed && !isMobile ? 'justify-center px-3' : 'space-x-3 px-4'} \n                    py-3 md:py-3.5\n                    rounded-xl \n                    hover:bg-gray-100 hover:shadow-sm \n                    transition-all duration-200 \n                    group relative overflow-hidden\n                    min-h-[48px]\n                    ${location.pathname.startsWith(item.link) \n                      ? 'bg-blue-50 text-blue-700 ring-1 ring-blue-100' \n                      : ''\n                    }\n                  `}\n                  onClick={isMobile ? onToggle : undefined}\n                  aria-current={location.pathname.startsWith(item.link) ? 'page' : undefined}\n                >\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-blue-50/50 to-blue-25/30 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"></div>\n                  \n                  {/* Icono más grande en móvil */}\n                  <i className={`\n                    ${item.icon} \n                    ${isMobile ? 'text-xl' : 'text-lg'}\n                    ${location.pathname.startsWith(item.link) ? 'text-blue-700' : 'text-gray-600 group-hover:text-blue-600'} \n                    group-hover:scale-110 transition-all flex-shrink-0 relative z-10\n                  `}></i>\n                  \n                  {/* Label */}\n                  <span className={`\n                    font-Poppins font-medium \n                    ${isMobile ? 'text-base' : 'text-sm'}\n                    ${location.pathname.startsWith(item.link) ? 'text-blue-800' : 'text-gray-700 group-hover:text-gray-900'} \n                    ${isCollapsed && !isMobile ? 'hidden' : 'block'}\n                    transition-all duration-300 z-10\n                  `}>\n                    {item.label}\n                  </span>\n                  \n                  {/* Badge */}\n                  {item.badge && !isCollapsed && (\n                    <span className=\"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-sm\">\n                      {item.badge}\n                    </span>\n                  )}\n                </Link>\n              </li>\n            ))}\n          </ul>\n        </nav>\n\n        {/* Información del Usuario */}\n        <div className=\"p-3 md:p-4 border-t border-gray-200 mt-auto bg-gradient-to-r from-gray-50 to-gray-100\">\n          {/* Info del usuario */}\n          <div className={`\n            flex items-center \n            ${isCollapsed && !isMobile ? 'justify-center' : 'space-x-3'} \n            mb-3\n          `}>\n            <div className=\"relative flex-shrink-0\">\n              {currentUser?.photoURL ? (\n                <img\n                  src={currentUser.photoURL}\n                  alt=\"Usuario\"\n                  className={`\n                    rounded-full border-2 border-gray-300 shadow-md \n                    ${isCollapsed && !isMobile ? 'w-10 h-10' : 'w-11 h-11 md:w-12 md:h-12'}\n                  `}\n                />\n              ) : (\n                <div className={`\n                  rounded-full border-2 border-gray-300 shadow-md \n                  bg-gradient-to-br from-blue-100 to-blue-200 \n                  flex items-center justify-center \n                  ${isCollapsed && !isMobile ? 'w-10 h-10' : 'w-11 h-11 md:w-12 md:h-12'}\n                `}>\n                  <i className={`fas fa-user text-blue-600 ${isMobile ? 'text-lg' : 'text-base'}`}></i>\n                </div>\n              )}\n              <div className=\"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm\"></div>\n            </div>\n            \n            {/* Nombre y rol - ocultar cuando colapsado en desktop */}\n            {(!isCollapsed || isMobile) && (\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm md:text-base font-Poppins font-semibold text-gray-800 truncate\">\n                  {currentUser?.displayName || currentUser?.email?.split('@')[0]}\n                </p>\n                <div className=\"flex items-center gap-1\">\n                  <p className=\"text-xs font-Poppins text-gray-600\">\n                    {userRole === 'ADMINISTRADOR' ? 'Administrador' : 'Consulta'}\n                  </p>\n                  {userRole === 'CONSULTA' && (\n                    <span className=\"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded\" title=\"Solo lectura\">\n                      <i className=\"fas fa-eye text-[10px]\"></i>\n                    </span>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Botón logout */}\n          <button\n            onClick={handleLogout}\n            className={`\n              flex items-center \n              ${isCollapsed && !isMobile ? 'justify-center' : ''} \n              w-full px-4 py-3\n              text-sm md:text-base\n              text-gray-700 \n              rounded-xl \n              hover:bg-red-50 hover:text-red-600 hover:shadow-sm \n              transition-all duration-200 \n              font-Poppins font-medium \n              group relative overflow-hidden\n              min-h-[48px]\n            `}\n          >\n            <div className=\"absolute inset-0 bg-gradient-to-r from-red-50/50 to-red-25/30 opacity-0 group-hover:opacity-100 transition-opacity duration-200\"></div>\n            <i className={`\n              fas fa-sign-out-alt \n              ${isMobile ? 'text-lg' : 'text-base'}\n              ${isCollapsed && !isMobile ? '' : 'mr-3'} \n              group-hover:scale-110 transition-transform relative z-10\n            `}></i>\n            {(!isCollapsed || isMobile) && (\n              <span className=\"relative z-10\">Cerrar Sesión</span>\n            )}\n          </button>\n        </div>\n      </aside>\n    </>\n  );\n};\n\nexport default Sidebar;\n","import React, { useState, useEffect, useRef, useCallback, useMemo } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useAuth, useSidebarContext } from \"shared/contexts\";\nimport logo from \"../../assets/images/logos/logo.png\";\n\n/**\n * DashboardHeader - Componente reutilizable para el header del dashboard\n * Incluye menú de usuario, logo y título dinámico\n */\nconst DashboardHeader = React.memo(({ title = \"Dashboard\", subtitle = \"Bienvenido\", extraActions = null }) => {\n  const { currentUser, logout } = useAuth();\n  const history = useHistory();\n  const { sidebarCollapsed } = useSidebarContext();\n  const [userMenuOpen, setUserMenuOpen] = useState(false);\n  const userMenuRef = useRef(null);\n\n  // Close user menu on outside click or escape key\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (userMenuRef.current && !userMenuRef.current.contains(e.target)) {\n        setUserMenuOpen(false);\n      }\n    };\n\n    const handleEscape = (e) => {\n      if (e.key === 'Escape') {\n        setUserMenuOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('keydown', handleEscape);\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, []);\n\n  const handleLogout = useCallback(async (e) => {\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    try {\n      await logout();\n      setUserMenuOpen(false);\n      history.push('/');\n    } catch (e) {\n      console.error('Error al cerrar sesión', e);\n    }\n  }, [history, logout]);\n\n  const handleCopyEmail = useCallback(async () => {\n    try {\n      if (currentUser?.email) {\n        await navigator.clipboard.writeText(currentUser.email);\n        setUserMenuOpen(false);\n      }\n    } catch (e) {\n      console.error('No se pudo copiar el correo', e);\n    }\n  }, [currentUser?.email]);\n\n  const toggleUserMenu = useCallback(() => {\n    setUserMenuOpen((v) => !v);\n  }, []);\n\n  const marginClass = useMemo(() => sidebarCollapsed ? 'md:ml-20' : 'md:ml-64', [sidebarCollapsed]);\n\n  const userDisplayName = useMemo(() => \n    currentUser?.displayName || currentUser?.email, \n    [currentUser?.displayName, currentUser?.email]\n  );\n\n  return (\n    <header className={`\n      fixed top-0 right-0 left-0 z-40 \n      bg-white/95 backdrop-blur-lg \n      shadow-md border-b border-gray-200\n      transition-all duration-300\n    `}>\n      <div className={`\n        px-4 md:px-6 \n        py-2.5 md:py-3 \n        transition-all duration-300 \n        ${marginClass}\n      `}>\n        <div className=\"flex items-center justify-between gap-2 md:gap-4\">\n          {/* Sección izquierda: Logo y Título */}\n          <div className=\"flex items-center space-x-2 md:space-x-3 flex-1 min-w-0 ml-12 md:ml-0\">\n            {/* Logo - ocultar en móvil para dar espacio */}\n            <img \n              src={logo}\n              alt=\"Todo por un Alma\" \n              className=\"hidden sm:block h-8 md:h-10 w-8 md:w-10 rounded-lg shadow-sm flex-shrink-0\"\n            />\n            \n            {/* Título y Subtitle */}\n            <div className=\"flex-1 min-w-0\">\n              <h1 className=\"text-base sm:text-lg md:text-2xl font-Lato font-bold text-gray-800 truncate\">\n                {title}\n              </h1>\n              {subtitle && (\n                <p className=\"hidden md:block text-xs md:text-sm font-Poppins text-gray-600 truncate\">\n                  {subtitle}\n                </p>\n              )}\n            </div>\n          </div>\n          \n          {/* Sección derecha: Acciones y Usuario */}\n          <div className=\"flex items-center space-x-2 md:space-x-4 flex-shrink-0\">\n            {/* Extra Actions - ocultar en móvil/tablet, mostrar en desktop */}\n            {extraActions && (\n              <div className=\"hidden lg:flex items-center space-x-3\">\n                {extraActions}\n              </div>\n            )}\n            \n            {/* Perfil de Usuario */}\n            <div className=\"relative\" ref={userMenuRef}>\n              <button\n                onClick={toggleUserMenu}\n                className=\"flex items-center space-x-2 md:space-x-3 bg-gray-100 rounded-full pl-1.5 md:pl-2 pr-2 md:pr-3 py-1 md:py-1.5 hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[44px]\"\n                aria-haspopup=\"true\"\n                aria-expanded={userMenuOpen}\n              >\n                {/* Avatar */}\n                <div className=\"relative flex-shrink-0\">\n                  {currentUser?.photoURL ? (\n                    <img\n                      src={currentUser.photoURL}\n                      alt=\"Usuario\"\n                      className=\"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-blue-500\"\n                    />\n                  ) : (\n                    <div className=\"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-blue-500 bg-blue-500 flex items-center justify-center\">\n                      <i className=\"fas fa-user text-white text-sm\"></i>\n                    </div>\n                  )}\n                  <div className=\"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 md:w-3 md:h-3 bg-green-400 rounded-full border-2 border-white\"></div>\n                </div>\n                \n                {/* Nombre - ocultar en móvil pequeño */}\n                <span className=\"hidden sm:block text-sm md:text-base font-Poppins font-medium text-gray-700 max-w-[120px] md:max-w-none truncate\">\n                  {userDisplayName}\n                </span>\n                \n                {/* Chevron - ocultar en móvil pequeño */}\n                <i className={`hidden sm:block fas fa-chevron-${userMenuOpen ? 'up' : 'down'} text-gray-500 text-xs`}></i>\n              </button>\n\n              {/* Dropdown Menu */}\n              {userMenuOpen && (\n                <div className=\"absolute right-0 mt-2 w-56 md:w-64 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden\">\n                  {/* Header del menú */}\n                  <div className=\"px-4 py-3 border-b border-gray-100 bg-gray-50\">\n                    <p className=\"text-xs text-gray-500 font-Poppins\">Sesión iniciada como</p>\n                    <p className=\"text-sm md:text-base text-gray-800 truncate font-Poppins font-medium mt-0.5\">\n                      {currentUser?.email}\n                    </p>\n                  </div>\n                  \n                  {/* Opciones del menú */}\n                  <ul className=\"py-1\">\n                    <li>\n                      <button \n                        onClick={handleCopyEmail} \n                        className=\"w-full flex items-center px-4 py-3 text-sm md:text-base text-gray-700 hover:bg-gray-50 font-Poppins transition-colors min-h-[48px]\"\n                      >\n                        <i className=\"fas fa-copy mr-3 text-gray-500 w-4\"></i>\n                        Copiar correo\n                      </button>\n                    </li>\n                    <li>\n                      <button \n                        onClick={() => {\n                          history.push('/configuracion');\n                          setUserMenuOpen(false);\n                        }} \n                        className=\"w-full flex items-center px-4 py-3 text-sm md:text-base text-gray-700 hover:bg-gray-50 font-Poppins transition-colors min-h-[48px]\"\n                      >\n                        <i className=\"fas fa-cog mr-3 text-gray-500 w-4\"></i>\n                        Configuración\n                      </button>\n                    </li>\n                    <li className=\"border-t border-gray-100\">\n                      <button \n                        onClick={handleLogout} \n                        className=\"w-full flex items-center px-4 py-3 text-sm md:text-base text-red-600 hover:bg-red-50 font-Poppins transition-colors min-h-[48px]\"\n                      >\n                        <i className=\"fas fa-sign-out-alt mr-3 w-4\"></i>\n                        Cerrar sesión\n                      </button>\n                    </li>\n                  </ul>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n});\n\nexport default DashboardHeader;","import React from \"react\";\nimport { SidebarProvider, useSidebarContext } from \"shared/contexts\";\nimport Sidebar from \"./Sidebar\";\nimport DashboardHeader from \"./DashboardHeader\";\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\n\n/**\n * DashboardLayout - Componente de layout reutilizable para todas las páginas del dashboard\n * Incluye Sidebar con contexto global, header dinámico y main con márgenes responsivos\n */\nconst DashboardLayoutContent = ({ title = \"Dashboard\", subtitle = \"\", children, loading = false, loadingText = \"Cargando...\", extraActions = null }) => {\n  const { sidebarOpen, sidebarCollapsed, toggleSidebarOpen, toggleSidebarCollapsed } = useSidebarContext();\n  \n  const marginClass = sidebarCollapsed ? 'md:ml-20' : 'md:ml-64';\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\n        <div className=\"flex\">\n          <Sidebar isOpen={sidebarOpen} onToggle={toggleSidebarOpen} isCollapsed={sidebarCollapsed} onToggleCollapse={toggleSidebarCollapsed} />\n          <main className={`flex-1 transition-all duration-300 ${marginClass} pt-16 md:pt-20 px-4 md:px-0`}>\n            <div className=\"flex items-center justify-center h-screen\">\n              <LoadingSpinner size=\"xl\" text={loadingText} />\n            </div>\n          </main>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 font-sans antialiased\">\n      <div className=\"flex\">\n        <Sidebar isOpen={sidebarOpen} onToggle={toggleSidebarOpen} isCollapsed={sidebarCollapsed} onToggleCollapse={toggleSidebarCollapsed} />\n        <main className={`flex-1 transition-all duration-300 ${marginClass} pt-16 md:pt-20 px-4 md:px-0`}>\n          <DashboardHeader title={title} subtitle={subtitle} extraActions={extraActions} />\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Proveedor y layout combinados\n */\nconst DashboardLayout = (props) => (\n  <SidebarProvider>\n    <DashboardLayoutContent {...props} />\n  </SidebarProvider>\n);\n\nexport default DashboardLayout;","/**\n * Validation Utilities\n * Centralized validation functions for the application\n */\n\nimport { dbService } from '../services';\n\n/**\n * Validate that a documento number is unique for participantes\n * @param {string} numeroDocumento - Document number to validate\n * @param {number|null} participanteId - ID of current participante (for edit mode)\n * @returns {Promise<{isValid: boolean, error: string|null}>}\n */\nexport const validateParticipanteDocumentoUnico = async (numeroDocumento, participanteId = null) => {\n  try {\n    if (!numeroDocumento || !numeroDocumento.trim()) {\n      return { isValid: false, error: 'El número de documento es requerido' };\n    }\n\n    const result = await dbService.getParticipantes();\n    if (result.data && Array.isArray(result.data)) {\n      const exists = result.data.some(p => {\n        const pId = p.id || p.id_participante;\n        return p.numero_documento === numeroDocumento && pId !== participanteId;\n      });\n      \n      if (exists) {\n        return { \n          isValid: false, \n          error: 'El número de documento ya está registrado para otro participante' \n        };\n      }\n    }\n    \n    return { isValid: true, error: null };\n  } catch (err) {\n    console.error('Error validating participante documento:', err);\n    // Allow if validation fails to not block the user\n    return { isValid: true, error: null };\n  }\n};\n\n/**\n * Validate that a documento number is unique for acudientes\n * @param {string} numeroDocumento - Document number to validate\n * @param {number|null} acudienteId - ID of current acudiente (for edit mode)\n * @returns {Promise<{isValid: boolean, error: string|null}>}\n */\nexport const validateAcudienteDocumentoUnico = async (numeroDocumento, acudienteId = null) => {\n  try {\n    if (!numeroDocumento || !numeroDocumento.trim()) {\n      return { isValid: false, error: 'El número de documento es requerido' };\n    }\n\n    const result = await dbService.getAcudientes();\n    if (result.data && Array.isArray(result.data)) {\n      const exists = result.data.some(a => {\n        const aId = a.id || a.id_acudiente;\n        return a.numero_documento === numeroDocumento && aId !== acudienteId;\n      });\n      \n      if (exists) {\n        return { \n          isValid: false, \n          error: 'El número de documento ya está registrado para otro acudiente' \n        };\n      }\n    }\n    \n    return { isValid: true, error: null };\n  } catch (err) {\n    console.error('Error validating acudiente documento:', err);\n    // Allow if validation fails to not block the user\n    return { isValid: true, error: null };\n  }\n};\n\n/**\n * Validate email format\n * @param {string} email - Email to validate\n * @returns {{isValid: boolean, error: string|null}}\n */\nexport const validateEmail = (email) => {\n  if (!email || !email.trim()) {\n    return { isValid: false, error: 'El email es requerido' };\n  }\n\n  // Basic email regex pattern\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  \n  if (!emailRegex.test(email)) {\n    return { \n      isValid: false, \n      error: 'El formato del email no es válido' \n    };\n  }\n\n  return { isValid: true, error: null };\n};\n\n/**\n * Validate date format and ensure it's not in the future\n * @param {string} fecha - Date string to validate\n * @param {string} fieldName - Name of the field for error messages\n * @returns {{isValid: boolean, error: string|null}}\n */\nexport const validateFecha = (fecha, fieldName = 'fecha') => {\n  if (!fecha) {\n    return { isValid: false, error: `La ${fieldName} es requerida` };\n  }\n\n  const date = new Date(fecha);\n  const today = new Date();\n  \n  // Reset time to compare only dates\n  today.setHours(23, 59, 59, 999);\n\n  // Check if date is valid\n  if (!(date instanceof Date) || isNaN(date.getTime())) {\n    return { \n      isValid: false, \n      error: `La ${fieldName} no es válida` \n    };\n  }\n\n  // Check if date is not in the future\n  if (date > today) {\n    return { \n      isValid: false, \n      error: `La ${fieldName} no puede ser futura` \n    };\n  }\n\n  return { isValid: true, error: null };\n};\n\n/**\n * Validate fecha_nacimiento specifically\n * @param {string} fechaNacimiento - Birth date to validate\n * @returns {{isValid: boolean, error: string|null}}\n */\nexport const validateFechaNacimiento = (fechaNacimiento) => {\n  return validateFecha(fechaNacimiento, 'fecha de nacimiento');\n};\n\n/**\n * Validate fecha_ingreso specifically\n * @param {string} fechaIngreso - Entry date to validate\n * @returns {{isValid: boolean, error: string|null}}\n */\nexport const validateFechaIngreso = (fechaIngreso) => {\n  return validateFecha(fechaIngreso, 'fecha de ingreso');\n};\n\n/**\n * Validate that a participante exists\n * @param {number} participanteId - ID of participante to validate\n * @returns {Promise<{isValid: boolean, error: string|null}>}\n */\nexport const validateParticipanteExists = async (participanteId) => {\n  try {\n    if (!participanteId) {\n      return { isValid: false, error: 'Debe seleccionar un participante' };\n    }\n\n    const result = await dbService.getParticipantes();\n    if (result.data && Array.isArray(result.data)) {\n      const exists = result.data.some(p => \n        (p.id_participante || p.id) === parseInt(participanteId)\n      );\n      \n      if (!exists) {\n        return { \n          isValid: false, \n          error: 'El participante seleccionado no existe' \n        };\n      }\n    }\n    \n    return { isValid: true, error: null };\n  } catch (err) {\n    console.error('Error validating participante exists:', err);\n    return { isValid: false, error: 'Error al validar el participante' };\n  }\n};\n\n/**\n * Validate that a sede exists\n * @param {number} sedeId - ID of sede to validate\n * @returns {Promise<{isValid: boolean, error: string|null}>}\n */\nexport const validateSedeExists = async (sedeId) => {\n  try {\n    if (!sedeId) {\n      return { isValid: false, error: 'Debe seleccionar una sede' };\n    }\n\n    const result = await dbService.getSedes();\n    if (result.data && Array.isArray(result.data)) {\n      const exists = result.data.some(s => \n        (s.id_sede || s.id) === parseInt(sedeId)\n      );\n      \n      if (!exists) {\n        return { \n          isValid: false, \n          error: 'La sede seleccionada no existe' \n        };\n      }\n    }\n    \n    return { isValid: true, error: null };\n  } catch (err) {\n    console.error('Error validating sede exists:', err);\n    return { isValid: false, error: 'Error al validar la sede' };\n  }\n};\n\n/**\n * Validate that an acudiente exists\n * @param {number} acudienteId - ID of acudiente to validate\n * @returns {Promise<{isValid: boolean, error: string|null}>}\n */\nexport const validateAcudienteExists = async (acudienteId) => {\n  try {\n    if (!acudienteId) {\n      return { isValid: false, error: 'Debe seleccionar un acudiente' };\n    }\n\n    const result = await dbService.getAcudientes();\n    if (result.data && Array.isArray(result.data)) {\n      const exists = result.data.some(a => \n        (a.id_acudiente || a.id) === parseInt(acudienteId)\n      );\n      \n      if (!exists) {\n        return { \n          isValid: false, \n          error: 'El acudiente seleccionado no existe' \n        };\n      }\n    }\n    \n    return { isValid: true, error: null };\n  } catch (err) {\n    console.error('Error validating acudiente exists:', err);\n    return { isValid: false, error: 'Error al validar el acudiente' };\n  }\n};\n\n/**\n * Validate mensualidad relationships (participante and acudiente must exist)\n * @param {number} participanteId - ID of participante\n * @param {number} acudienteId - ID of acudiente\n * @returns {Promise<{isValid: boolean, error: string|null}>}\n */\nexport const validateMensualidadRelations = async (participanteId, acudienteId) => {\n  // Validate participante\n  const participanteValidation = await validateParticipanteExists(participanteId);\n  if (!participanteValidation.isValid) {\n    return participanteValidation;\n  }\n\n  // Validate acudiente\n  const acudienteValidation = await validateAcudienteExists(acudienteId);\n  if (!acudienteValidation.isValid) {\n    return acudienteValidation;\n  }\n\n  return { isValid: true, error: null };\n};\n","import React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService } from \"shared/services\";\nimport { useFilters, usePagination, useModal } from \"shared/hooks\";\nimport {\n  LoadingSpinner,\n  FilterBar,\n  DataTable,\n  Pagination,\n  StatusToggle,\n  ActionDropdown,\n  FormModal,\n  FormInput,\n  FormSelect,\n  FormTextarea,\n  ExportDropdown\n} from \"components/UI\";\nimport { validateMensualidadRelations } from \"shared/utils/validationUtils\";\nimport {\n  arrayToCSV,\n  downloadCSV,\n  formatCurrencyForCSV,\n  formatDateForCSV,\n  normalizeStatus\n} from \"shared/utils/exportUtils\";\n\n// Custom component for combined month-year filter\nconst MonthYearSelect = ({ value, onChange, label = \"Período\" }) => {\n  const months = useMemo(() => [\n    { value: 1, label: 'Enero' },\n    { value: 2, label: 'Febrero' },\n    { value: 3, label: 'Marzo' },\n    { value: 4, label: 'Abril' },\n    { value: 5, label: 'Mayo' },\n    { value: 6, label: 'Junio' },\n    { value: 7, label: 'Julio' },\n    { value: 8, label: 'Agosto' },\n    { value: 9, label: 'Septiembre' },\n    { value: 10, label: 'Octubre' },\n    { value: 11, label: 'Noviembre' },\n    { value: 12, label: 'Diciembre' }\n  ], []);\n\n  const years = useMemo(() => Array.from({ length: 11 }, (_, i) => 2020 + i), []);\n\n  const options = useMemo(() => {\n    const opts = [{ value: 'all', label: 'Todos' }];\n    years.forEach(year => {\n      months.forEach(month => {\n        opts.push({\n          value: `${month.value}-${year}`,\n          label: `${month.label} ${year}`\n        });\n      });\n    });\n    return opts;\n  }, [months, years]);\n\n  return (\n    <div className=\"w-full\">\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        {label}\n      </label>\n      <select\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors\"\n      >\n        {options.map(option => (\n          <option key={option.value} value={option.value}>\n            {option.label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\nconst Finance = React.memo(() => {\n  const [mensualidades, setMensualidades] = useState([]);\n  const [participants, setParticipants] = useState([]);\n  const [sedes, setSedes] = useState([]);\n  const [acudientes, setAcudientes] = useState([]);\n  const [filteredAcudientes, setFilteredAcudientes] = useState([]);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [formData, setFormData] = useState({\n    participant_id: '',\n    id_acudiente: '',\n    mes: '',\n    año: new Date().getFullYear(),\n    valor: '',\n    status: 'PAGADO',\n    metodo_pago: 'TRANSFERENCIA',\n    fecha_pago: '',\n    observaciones: ''\n  });\n  \n  // Use custom hooks\n  const { filters, setFilter, clearFilters } = useFilters({\n    periodo: 'all',\n    sede: 'all',\n    estado: 'all',\n    busqueda: ''\n  });\n  const { isOpen: showModal, openModal: openModalHook, closeModal, modalData, updateModalData } = useModal();\n\n  // Memoized form handlers to prevent unnecessary re-renders\n  const handleFormDataChange = useCallback((field, value) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  }, []);\n\n  const months = useMemo(() => [\n    { value: 1, label: 'Enero' },\n    { value: 2, label: 'Febrero' },\n    { value: 3, label: 'Marzo' },\n    { value: 4, label: 'Abril' },\n    { value: 5, label: 'Mayo' },\n    { value: 6, label: 'Junio' },\n    { value: 7, label: 'Julio' },\n    { value: 8, label: 'Agosto' },\n    { value: 9, label: 'Septiembre' },\n    { value: 10, label: 'Octubre' },\n    { value: 11, label: 'Noviembre' },\n    { value: 12, label: 'Diciembre' }\n  ], []);\n\n  const years = useMemo(() => Array.from({ length: 11 }, (_, i) => 2020 + i), []);\n\n  const getMonthLabel = useCallback((mes) => {\n    const month = months.find(m => m.value === mes);\n    return month ? month.label : mes.toString();\n  }, [months]);\n\n\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        console.log('🔄 Cargando datos financieros...');\n\n        const [mensRes, partsRes, sedesRes, acudRes] = await Promise.all([\n          dbService.getMensualidades(),\n          dbService.getParticipantes(),\n          dbService.getSedes(),\n          dbService.getAcudientes()\n        ]);\n\n        console.log('📊 Resultados crudos:', {\n          mensRes: { data: mensRes.data, error: mensRes.error },\n          partsRes: { data: partsRes.data, error: partsRes.error },\n          sedesRes: { data: sedesRes.data, error: sedesRes.error },\n          acudRes: { data: acudRes.data, error: acudRes.error }\n        });\n\n        // Asegurar que siempre sean arrays (API service ya extrae el nested data)\n        const mensualidadesData = Array.isArray(mensRes.data) ? mensRes.data : (mensRes.data?.data ? mensRes.data.data : []);\n        const participantesData = Array.isArray(partsRes.data) ? partsRes.data : (partsRes.data?.data ? partsRes.data.data : []);\n        const sedesData = Array.isArray(sedesRes.data) ? sedesRes.data : (sedesRes.data?.data ? sedesRes.data.data : []);\n        const acudientesData = Array.isArray(acudRes.data) ? acudRes.data : (acudRes.data?.data ? acudRes.data.data : []);\n\n        console.log('🔍 Estructura de mensualidadesData:', {\n          isArray: Array.isArray(mensualidadesData),\n          length: mensualidadesData.length,\n          firstItem: mensualidadesData[0] || 'No hay elementos',\n          rawResponse: mensRes\n        });\n\n        setMensualidades(mensualidadesData);\n        setParticipants(participantesData);\n        setSedes(sedesData);\n        setAcudientes(acudientesData);\n        setFilteredAcudientes(acudientesData);\n\n        console.log('✅ Datos cargados:', {\n          mensualidades: mensualidadesData.length,\n          participantes: participantesData.length,\n          sedes: sedesData.length,\n          acudientes: acudientesData.length\n        });\n      } catch (err) {\n        console.error('❌ Error cargando datos financieros:', err);\n        setError(err.message || 'Error desconocido al cargar datos');\n        // Asegurar arrays vacíos en caso de error\n        setMensualidades([]);\n        setParticipants([]);\n        setSedes([]);\n        setAcudientes([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // Filter acudientes when participant changes in form\n  useEffect(() => {\n    if (formData.participant_id) {\n      const filtered = acudientes.filter(a => a.id_participante === parseInt(formData.participant_id));\n      setFilteredAcudientes(filtered);\n      // Reset acudiente selection if current selection is not valid for new participant\n      if (formData.id_acudiente && !filtered.find(a => a.id_acudiente === parseInt(formData.id_acudiente))) {\n        setFormData(prev => ({ ...prev, id_acudiente: '' }));\n      }\n    } else {\n      setFilteredAcudientes(acudientes);\n    }\n  }, [formData.participant_id, acudientes, formData.id_acudiente]);\n\n  const filteredMensualidades = useMemo(() => {\n    // Asegurar que mensualidades siempre sea un array\n    const safeMensualidades = Array.isArray(mensualidades) ? mensualidades : [];\n    let filtered = safeMensualidades;\n\n    console.log('🔍 Aplicando filtros:', {\n      filtrosActivos: filters,\n      mensualidadesTotal: safeMensualidades.length,\n      mensualidadesMuestra: safeMensualidades.slice(0, 3) // Primeros 3 elementos para debug\n    });\n\n    if (filters.periodo !== 'all') {\n      const [mes, año] = filters.periodo.split('-').map(Number);\n      console.log('📅 Filtrando por período:', { mes, año });\n      filtered = filtered.filter(m => m.mes === mes && m.año === año);\n      console.log('📅 Después de filtro período:', filtered.length);\n    }\n    if (filters.sede !== 'all') {\n      console.log('🏢 Filtrando por sede:', filters.sede);\n      filtered = filtered.filter(m => m.sede_id === parseInt(filters.sede));\n      console.log('🏢 Después de filtro sede:', filtered.length);\n    }\n    if (filters.estado !== 'all') {\n      console.log('📊 Filtrando por estado:', filters.estado);\n      filtered = filtered.filter(m => m.estado === filters.estado);\n      console.log('📊 Después de filtro estado:', filtered.length);\n    }\n    if (filters.busqueda) {\n      console.log('🔍 Filtrando por búsqueda:', filters.busqueda);\n      filtered = filtered.filter(m =>\n        (m.participant_documento || '').includes(filters.busqueda) ||\n        (m.acudiente_documento || '').includes(filters.busqueda)\n      );\n      console.log('🔍 Después de filtro búsqueda:', filtered.length);\n    }\n\n    console.log('✅ Resultado final del filtrado:', {\n      totalFiltrado: filtered.length,\n      filtrosAplicados: Object.keys(filters).filter(k => filters[k] !== 'all' && filters[k] !== '')\n    });\n\n    return filtered;\n  }, [mensualidades, filters]);\n\n  // Use pagination hook\n  const {\n    currentPage,\n    totalPages,\n    paginatedData: paginatedMensualidades,\n    setPage\n  } = usePagination(filteredMensualidades, 10);\n\n  const openModal = useCallback((mensualidad = null) => {\n    if (mensualidad) {\n      // Pre-fill form with existing data\n      setFormData({\n        participant_id: mensualidad.participante_id || mensualidad.participant_id,\n        id_acudiente: mensualidad.id_acudiente || '',\n        mes: mensualidad.mes,\n        año: mensualidad.año,\n        valor: mensualidad.valor || mensualidad.monto,\n        status: mensualidad.estado || mensualidad.status,\n        metodo_pago: mensualidad.metodo_pago || 'TRANSFERENCIA',\n        fecha_pago: mensualidad.fecha_pago || '',\n        observaciones: mensualidad.observaciones || ''\n      });\n      updateModalData(mensualidad);\n    } else {\n      setFormData({\n        participant_id: '',\n        id_acudiente: '',\n        mes: '',\n        año: new Date().getFullYear(),\n        valor: '',\n        status: 'PAGADO',\n        metodo_pago: 'TRANSFERENCIA',\n        fecha_pago: '',\n        observaciones: ''\n      });\n      updateModalData(null);\n    }\n    openModalHook();\n  }, [openModalHook, updateModalData]);\n\n  const toggleStatus = useCallback(async (id, newStatus) => {\n    try {\n      await dbService.updateMensualidad(id, { estado: newStatus });\n      // Refresh data\n      const { data } = await dbService.getMensualidades();\n      setMensualidades(data || []);\n    } catch (err) {\n      console.error('Error updating status:', err);\n      // Optionally show error toast\n    }\n  }, []);\n\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n    \n    // Validate fecha_pago is required when status is PAGADO\n    if (formData.status === 'PAGADO' && !formData.fecha_pago) {\n      alert('La fecha de pago es requerida cuando el estado es PAGADO');\n      return;\n    }\n    \n    // Validate that participante and acudiente exist (if acudiente is provided)\n    try {\n      if (formData.id_acudiente) {\n        const relationsValidation = await validateMensualidadRelations(\n          parseInt(formData.participant_id),\n          parseInt(formData.id_acudiente)\n        );\n        \n        if (!relationsValidation.isValid) {\n          alert(relationsValidation.error);\n          return;\n        }\n      }\n    } catch (err) {\n      console.error('Error validating relations:', err);\n      alert('Error al validar las relaciones: ' + (err.message || 'Error desconocido'));\n      return;\n    }\n    \n    const submitData = {\n      participant_id: parseInt(formData.participant_id),\n      id_acudiente: formData.id_acudiente ? parseInt(formData.id_acudiente) : null,\n      mes: parseInt(formData.mes),\n      año: parseInt(formData.año),\n      monto: parseFloat(formData.valor),\n      estado: formData.status,\n      metodo_pago: formData.metodo_pago,\n      fecha_pago: formData.status === 'PAGADO' ? formData.fecha_pago : null,\n      observaciones: formData.observaciones || null\n    };\n    \n    try {\n      if (modalData?.id) {\n        await dbService.updateMensualidad(modalData.id, submitData);\n      } else {\n        await dbService.createMensualidad(submitData);\n      }\n      closeModal();\n      const { data } = await dbService.getMensualidades();\n      setMensualidades(data || []);\n    } catch (err) {\n      console.error('Error saving payment:', err);\n      alert('Error al guardar la mensualidad: ' + (err.message || 'Error desconocido'));\n    }\n  }, [formData, modalData, closeModal]);\n\n  const handleExportPDF = useCallback(() => {\n    const printWindow = window.open('', '_blank');\n    const currentDate = new Date().toLocaleDateString('es-ES');\n\n    const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Lista de Mensualidades - ${currentDate}</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              color: #333;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #333;\n              padding-bottom: 20px;\n            }\n            .header h1 {\n              color: #2563eb;\n              margin: 0;\n              font-size: 24px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px 12px;\n              text-align: left;\n            }\n            th {\n              background-color: #f8f9fa;\n              font-weight: bold;\n              color: #495057;\n            }\n            tr:nth-child(even) {\n              background-color: #f9f9f9;\n            }\n            @media print {\n              body { margin: 0; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>Lista de Mensualidades</h1>\n            <p>Corporación Todo por un Alma</p>\n            <p>Fecha de generación: ${currentDate}</p>\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Participante</th>\n                <th>Acudiente</th>\n                <th>Mes</th>\n                <th>Año</th>\n                <th>Valor</th>\n                <th>Estado</th>\n                <th>Método de Pago</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${filteredMensualidades.map(m => `\n                <tr>\n                  <td>${m.participant_name || 'N/A'}</td>\n                  <td>${m.acudiente_name || 'N/A'}</td>\n                  <td>${getMonthLabel(m.mes)}</td>\n                  <td>${m.año || 'N/A'}</td>\n                  <td>$${(m.valor || m.monto || 0).toLocaleString()}</td>\n                  <td>${normalizeStatus(m.estado || m.status)}</td>\n                  <td>${m.metodo_pago || 'N/A'}</td>\n                </tr>\n              `).join('')}\n            </tbody>\n          </table>\n\n          <script>\n            window.onload = function() {\n              window.print();\n              setTimeout(function() {\n                window.close();\n              }, 1000);\n            }\n          </script>\n        </body>\n      </html>\n    `;\n\n    printWindow.document.write(htmlContent);\n    printWindow.document.close();\n  }, [filteredMensualidades, getMonthLabel]);\n\n  const handleExportCSV = useCallback(() => {\n    const headers = [\n      { key: 'id', label: 'ID' },\n      { key: 'participant_name', label: 'Participante' },\n      { key: 'participant_documento', label: 'Documento Participante' },\n      { key: 'acudiente_name', label: 'Acudiente' },\n      { key: 'acudiente_documento', label: 'Documento Acudiente' },\n      { key: 'mes', label: 'Mes' },\n      { key: 'año', label: 'Año' },\n      { key: 'periodo', label: 'Período' },\n      { key: 'valor', label: 'Valor' },\n      { key: 'estado', label: 'Estado' },\n      { key: 'metodo_pago', label: 'Método de Pago' },\n      { key: 'fecha_pago', label: 'Fecha Pago' },\n      { key: 'observaciones', label: 'Observaciones' }\n    ];\n\n    const csvData = filteredMensualidades.map(m => ({\n      id: m.id || 'N/A',\n      participant_name: m.participant_name || 'N/A',\n      participant_documento: m.participant_documento || 'N/A',\n      acudiente_name: m.acudiente_name || 'N/A',\n      acudiente_documento: m.acudiente_documento || 'N/A',\n      mes: getMonthLabel(m.mes),\n      año: m.año || 'N/A',\n      periodo: `${getMonthLabel(m.mes)} ${m.año}`,\n      valor: formatCurrencyForCSV(m.valor || m.monto || 0),\n      estado: normalizeStatus(m.estado || m.status),\n      metodo_pago: m.metodo_pago === 'TRANSFERENCIA' ? 'Transferencia' :\n                   m.metodo_pago === 'EFECTIVO' ? 'Efectivo' : 'N/A',\n      fecha_pago: formatDateForCSV(m.fecha_pago),\n      observaciones: m.observaciones || 'N/A'\n    }));\n\n    const csvContent = arrayToCSV(csvData, headers);\n    const filename = `mensualidades_${new Date().toISOString().split('T')[0]}.csv`;\n    downloadCSV(csvContent, filename);\n  }, []);\n\n  if (loading) {\n    return (\n      <DashboardLayout\n        title=\"Mensualidades\"\n        subtitle=\"Cargando mensualidades...\"\n        loading={true}\n      >\n        <LoadingSpinner />\n      </DashboardLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout\n        title=\"Mensualidades\"\n        subtitle=\"Error al cargar datos\"\n        loading={false}\n      >\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-600\">Error loading payments: {error}</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout\n      title=\"Mensualidades\"\n      subtitle=\"Pagadas, pendientes y vencidas\"\n      extraActions={\n        <div className=\"flex space-x-3\">\n          <ExportDropdown\n            onExportPDF={handleExportPDF}\n            onExportCSV={handleExportCSV}\n          />\n          <button onClick={() => openModal()} className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\">\n            <i className=\"fas fa-plus mr-2\"></i>Nueva Mensualidad\n          </button>\n        </div>\n      }\n    >\n      <section className=\"px-4 md:px-6 py-4 md:py-6\">\n            <FilterBar\n              filters={[\n                {\n                  type: 'custom',\n                  name: 'periodo',\n                  component: MonthYearSelect,\n                  props: { label: 'Período' }\n                },\n                {\n                  type: 'select',\n                  name: 'sede',\n                  label: 'Sede',\n                  placeholder: 'Todas',\n                  options: [\n                    { value: 'all', label: 'Todas' },\n                    ...sedes.map(s => ({ value: s.id.toString(), label: s.nombre }))\n                  ]\n                },\n                {\n                  type: 'select',\n                  name: 'estado',\n                  label: 'Estado',\n                  placeholder: 'Todos',\n                  options: [\n                    { value: 'all', label: 'Todos' },\n                    { value: 'PAGADO', label: 'Pagada' },\n                    { value: 'PENDIENTE', label: 'Pendiente' }\n                  ]\n                },\n                {\n                  type: 'search',\n                  name: 'busqueda',\n                  label: 'Búsqueda por Documento',\n                  placeholder: 'Número de documento...'\n                }\n              ]}\n              values={filters}\n              onChange={setFilter}\n              onClear={clearFilters}\n              showClearButton={true}\n            />\n            <div className=\"mt-6\">\n              <DataTable\n                data={paginatedMensualidades}\n                columns={[\n                  {\n                    key: 'participant_name',\n                    header: 'Participante',\n                    render: (row) => (\n                      <span className=\"font-medium text-gray-900\">{row.participant_name}</span>\n                    )\n                  },\n                  {\n                    key: 'acudiente_name',\n                    header: 'Acudiente',\n                    render: (row) => (\n                      <span className=\"text-gray-700\">{row.acudiente_name || 'N/A'}</span>\n                    )\n                  },\n                  {\n                    key: 'mes',\n                    header: 'Mes',\n                    render: (row) => getMonthLabel(row.mes)\n                  },\n                  {\n                    key: 'valor',\n                    header: 'Cantidad',\n                    render: (row) => `$${(row.valor || row.monto || 0).toLocaleString()}`\n                  },\n                  {\n                    key: 'metodo_pago',\n                    header: 'Método de Pago',\n                    render: (row) => (\n                      <span className=\"text-sm text-gray-600\">\n                        {row.metodo_pago === 'TRANSFERENCIA' ? 'Transferencia' : \n                         row.metodo_pago === 'EFECTIVO' ? 'Efectivo' : 'N/A'}\n                      </span>\n                    )\n                  },\n                  {\n                    key: 'status',\n                    header: 'Estado',\n                    render: (row) => (\n                      <StatusToggle\n                        currentStatus={row.status || row.estado}\n                        statuses={[\n                          { value: 'PAGADO', label: 'PAGADO', variant: 'success' },\n                          { value: 'PENDIENTE', label: 'PENDIENTE', variant: 'danger' }\n                        ]}\n                        onChange={(newStatus) => toggleStatus(row.id, newStatus)}\n                      />\n                    )\n                  },\n                  {\n                    key: 'observaciones',\n                    header: 'Observaciones',\n                    render: (row) => (\n                      <span className=\"text-sm text-gray-600 truncate max-w-xs block\" title={row.observaciones || ''}>\n                        {row.observaciones ? \n                          (row.observaciones.length > 30 ? \n                            row.observaciones.substring(0, 30) + '...' : \n                            row.observaciones) : \n                          '-'}\n                      </span>\n                    )\n                  },\n                  {\n                    key: 'actions',\n                    header: 'Acciones',\n                    render: (row) => (\n                      <ActionDropdown\n                        actions={[\n                          {\n                            label: 'Ver',\n                            icon: 'fas fa-eye',\n                            onClick: () => openModal(row)\n                          },\n                          {\n                            label: 'Editar',\n                            icon: 'fas fa-edit',\n                            onClick: () => openModal(row)\n                          }\n                        ]}\n                      />\n                    )\n                  }\n                ]}\n                keyExtractor={(row) => row.id}\n                loading={loading}\n                emptyState={\n                  <div className=\"text-center py-8 text-gray-500\">\n                    <div className=\"mb-4\">\n                      <strong>No hay mensualidades que mostrar</strong>\n                    </div>\n                    <div className=\"text-sm text-gray-400 space-y-1\">\n                      <div>📊 Total mensualidades en BD: {mensualidades.length}</div>\n                      <div>🔍 Después de filtros: {filteredMensualidades.length}</div>\n                      <div>⚙️ Filtros activos: {Object.keys(filters).filter(k => filters[k] !== 'all' && filters[k] !== '').length > 0 ?\n                        Object.keys(filters).filter(k => filters[k] !== 'all' && filters[k] !== '').join(', ') :\n                        'Ninguno'}</div>\n                      <div>🔧 Estado de carga: {loading ? 'Cargando...' : 'Completado'}</div>\n                      {error && <div className=\"text-red-400\">❌ Error: {error}</div>}\n                    </div>\n                  </div>\n                }\n              />\n              {totalPages > 1 && (\n                <Pagination\n                  currentPage={currentPage}\n                  totalPages={totalPages}\n                  onPageChange={setPage}\n                  itemsPerPage={10}\n                  totalItems={filteredMensualidades.length}\n                  showInfo={true}\n                  className=\"mt-4\"\n                />\n              )}\n            </div>\n          </section>\n\n          {/* Modal */}\n          <FormModal\n            isOpen={showModal}\n            onClose={closeModal}\n            title={modalData ? 'Ver/Editar Mensualidad' : 'Nueva Mensualidad'}\n            onSubmit={handleSubmit}\n            submitLabel=\"Guardar\"\n            size=\"lg\"\n          >\n            <div className=\"space-y-4\">\n              <FormSelect\n                label=\"Participante\"\n                name=\"participant_id\"\n                value={formData.participant_id}\n                onChange={(value) => handleFormDataChange('participant_id', value)}\n                options={participants.map(p => ({\n                  value: p.id,\n                  label: `${p.nombres} ${p.apellidos} - ${p.documento}`\n                }))}\n                placeholder=\"Seleccionar Participante\"\n                required\n              />\n              \n              <FormSelect\n                label=\"Acudiente\"\n                name=\"id_acudiente\"\n                value={formData.id_acudiente}\n                onChange={(value) => handleFormDataChange('id_acudiente', value)}\n                options={filteredAcudientes.map(a => ({\n                  value: a.id_acudiente || a.id,\n                  label: `${a.nombres} ${a.apellidos} - ${a.parentesco}`\n                }))}\n                placeholder=\"Seleccionar Acudiente\"\n                disabled={!formData.participant_id}\n              />\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormSelect\n                  label=\"Mes\"\n                  name=\"mes\"\n                  value={formData.mes}\n                  onChange={(value) => handleFormDataChange('mes', value)}\n                  options={months.map(m => ({\n                    value: m.value,\n                    label: m.label\n                  }))}\n                  placeholder=\"Seleccionar Mes\"\n                  required\n                />\n                \n                <FormSelect\n                  label=\"Año\"\n                  name=\"año\"\n                  value={formData.año}\n                  onChange={(value) => handleFormDataChange('año', value)}\n                  options={years.map(y => ({\n                    value: y,\n                    label: y.toString()\n                  }))}\n                  required\n                />\n              </div>\n              \n              <FormInput\n                label=\"Valor\"\n                name=\"valor\"\n                type=\"number\"\n                value={formData.valor}\n                onChange={(value) => handleFormDataChange('valor', value)}\n                placeholder=\"Valor\"\n                required\n              />\n              \n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormSelect\n                  label=\"Estado\"\n                  name=\"status\"\n                  value={formData.status}\n                  onChange={(value) => handleFormDataChange('status', value)}\n                  options={[\n                    { value: 'PAGADO', label: 'Pagada' },\n                    { value: 'PENDIENTE', label: 'Pendiente' }\n                  ]}\n                  required\n                />\n                \n                <FormSelect\n                  label=\"Método de Pago\"\n                  name=\"metodo_pago\"\n                  value={formData.metodo_pago}\n                  onChange={(value) => handleFormDataChange('metodo_pago', value)}\n                  options={[\n                    { value: 'TRANSFERENCIA', label: 'Transferencia' },\n                    { value: 'EFECTIVO', label: 'Efectivo' }\n                  ]}\n                  required\n                />\n              </div>\n              \n              {formData.status === 'PAGADO' && (\n                <FormInput\n                  label=\"Fecha de Pago\"\n                  name=\"fecha_pago\"\n                  type=\"date\"\n                  value={formData.fecha_pago}\n                  onChange={(value) => handleFormDataChange('fecha_pago', value)}\n                  required={formData.status === 'PAGADO'}\n                />\n              )}\n              \n              <FormTextarea\n                label=\"Observaciones\"\n                name=\"observaciones\"\n                value={formData.observaciones}\n                onChange={(value) => handleFormDataChange('observaciones', value)}\n                placeholder=\"Observaciones adicionales...\"\n                rows={3}\n              />\n              \n              {modalData && (\n                <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n                  <h4 className=\"font-semibold text-gray-700 mb-2\">Información Completa</h4>\n                  <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                    <div>\n                      <span className=\"text-gray-600\">Participante:</span>\n                      <span className=\"ml-2 font-medium\">{modalData.participant_name}</span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Acudiente:</span>\n                      <span className=\"ml-2 font-medium\">{modalData.acudiente_name || 'N/A'}</span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Método de Pago:</span>\n                      <span className=\"ml-2 font-medium\">\n                        {modalData.metodo_pago === 'TRANSFERENCIA' ? 'Transferencia' : \n                         modalData.metodo_pago === 'EFECTIVO' ? 'Efectivo' : 'N/A'}\n                      </span>\n                    </div>\n                    <div>\n                      <span className=\"text-gray-600\">Fecha de Pago:</span>\n                      <span className=\"ml-2 font-medium\">\n                        {modalData.fecha_pago ? new Date(modalData.fecha_pago).toLocaleDateString() : 'N/A'}\n                      </span>\n                    </div>\n                    {modalData.observaciones && (\n                      <div className=\"col-span-2\">\n                        <span className=\"text-gray-600\">Observaciones:</span>\n                        <p className=\"ml-2 mt-1 text-gray-700\">{modalData.observaciones}</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          </FormModal>\n        </DashboardLayout>\n      );\n    });\n\nexport default Finance;\n"],"names":["formatParticipantName","participante","nombres","apellidos","concat","trim","nombre","formatSede","sede","direccion","String","normalizeStatus","estado","upper","toUpperCase","formatGender","genero","formatDocument","tipo","numero","arrayToCSV","data","headers","Array","isArray","length","map","header","label","join","row","value","getNestedValue","key","stringValue","includes","replace","downloadCSV","csvContent","filename","csvFilename","endsWith","csvContentWithProperLineEndings","blob","Blob","type","link","document","createElement","undefined","download","url","URL","createObjectURL","setAttribute","style","visibility","body","appendChild","click","removeChild","revokeObjectURL","obj","path","split","reduce","current","formatDateForCSV","date","Date","toLocaleDateString","_unused","formatCurrencyForCSV","amount","Intl","NumberFormat","currency","minimumFractionDigits","format","_unused2","calculateAge","birthDate","birth","today","age","getFullYear","monthDiff","getMonth","getDate","_unused3","_ref","_currentUser$email","isOpen","onToggle","isCollapsed","onToggleCollapse","currentUser","logout","useAuth","history","useHistory","isMobile","setIsMobile","useState","location","useLocation","userRole","rol","role","React","checkScreenSize","window","innerWidth","addEventListener","removeEventListener","menuItems","id","icon","badge","roles","adminOnly","filter","item","_jsxs","_Fragment","children","_jsx","className","onClick","background","backdropFilter","borderRight","src","logo","alt","Link","to","pathname","startsWith","photoURL","displayName","email","title","async","push","error","console","subtitle","extraActions","sidebarCollapsed","useSidebarContext","userMenuOpen","setUserMenuOpen","userMenuRef","useRef","useEffect","handleClickOutside","e","contains","target","handleEscape","handleLogout","useCallback","preventDefault","stopPropagation","handleCopyEmail","navigator","clipboard","writeText","toggleUserMenu","v","marginClass","useMemo","userDisplayName","ref","DashboardLayoutContent","loading","loadingText","sidebarOpen","toggleSidebarOpen","toggleSidebarCollapsed","Sidebar","LoadingSpinner","size","text","DashboardHeader","props","SidebarProvider","_objectSpread","validateParticipanteDocumentoUnico","numeroDocumento","participanteId","arguments","isValid","result","dbService","getParticipantes","some","p","pId","id_participante","numero_documento","err","validateAcudienteDocumentoUnico","acudienteId","getAcudientes","a","aId","id_acudiente","validateEmail","test","validateFecha","fecha","fieldName","setHours","isNaN","getTime","validateFechaNacimiento","fechaNacimiento","validateFechaIngreso","fechaIngreso","validateParticipanteExists","parseInt","validateSedeExists","sedeId","getSedes","s","id_sede","validateMensualidadRelations","participanteValidation","acudienteValidation","validateAcudienteExists","MonthYearSelect","onChange","months","years","from","_","i","options","opts","forEach","year","month","option","mensualidades","setMensualidades","participants","setParticipants","sedes","setSedes","acudientes","setAcudientes","filteredAcudientes","setFilteredAcudientes","setError","setLoading","formData","setFormData","participant_id","mes","año","valor","status","metodo_pago","fecha_pago","observaciones","filters","setFilter","clearFilters","useFilters","periodo","busqueda","showModal","openModal","openModalHook","closeModal","modalData","updateModalData","useModal","handleFormDataChange","field","prev","getMonthLabel","find","m","toString","_mensRes$data","_partsRes$data","_sedesRes$data","_acudRes$data","log","mensRes","partsRes","sedesRes","acudRes","Promise","all","getMensualidades","mensualidadesData","participantesData","sedesData","acudientesData","firstItem","rawResponse","participantes","message","loadData","filtered","filteredMensualidades","safeMensualidades","filtrosActivos","mensualidadesTotal","mensualidadesMuestra","slice","Number","sede_id","participant_documento","acudiente_documento","totalFiltrado","filtrosAplicados","Object","keys","k","currentPage","totalPages","paginatedData","paginatedMensualidades","setPage","usePagination","mensualidad","participante_id","monto","toggleStatus","newStatus","updateMensualidad","handleSubmit","alert","relationsValidation","submitData","parseFloat","createMensualidad","handleExportPDF","printWindow","open","currentDate","htmlContent","participant_name","acudiente_name","toLocaleString","write","close","handleExportCSV","csvData","toISOString","DashboardLayout","ExportDropdown","onExportPDF","onExportCSV","FilterBar","name","component","placeholder","values","onClear","showClearButton","DataTable","columns","render","StatusToggle","currentStatus","statuses","variant","substring","ActionDropdown","actions","keyExtractor","emptyState","Pagination","onPageChange","itemsPerPage","totalItems","showInfo","FormModal","onClose","onSubmit","submitLabel","FormSelect","documento","required","parentesco","disabled","y","FormInput","FormTextarea","rows"],"sourceRoot":""}