"use strict";(self.webpackChunkfundacion_todo_por_un_alma=self.webpackChunkfundacion_todo_por_un_alma||[]).push([[422],{1379:(e,a,s)=>{s.d(a,{s5:()=>h,M9:()=>x,J$:()=>l});var t=s(5043),n=s(3900),r=s(579);const l=e=>{let{isOpen:a,onClose:s,title:t,data:l,actions:o,size:i="lg",className:d=""}=e;return(0,r.jsx)(n.A,{isOpen:a,onClose:s,title:t,data:l,actions:o,size:i,className:d})};var o=s(9379),i=s(1791),d=s(2199),c=s(9883),m=s(5633),u=s(294);const x=e=>{let{isOpen:a,onClose:s,title:n,initialData:l,onSubmit:x,children:h,fields:p,submitLabel:b="Guardar Cambios",size:f="lg",validate:g,className:y=""}=e;const[v,j]=(0,t.useState)(l||{}),[N,w]=(0,t.useState)({}),[A,C]=(0,t.useState)(!1),[k,S]=(0,t.useState)("");(0,t.useEffect)(()=>{l&&(j(l),w({}),S(""))},[l,a]);const O=(e,a)=>{j(s=>(0,o.A)((0,o.A)({},s),{},{[e]:a})),N[e]&&w(a=>(0,o.A)((0,o.A)({},a),{},{[e]:""}))};return(0,r.jsx)(i.A,{isOpen:a,onClose:()=>{A||(j(l||{}),w({}),S(""),"function"===typeof s?s():console.error("onClose is not a function in EditFormModal"))},title:n,onSubmit:async e=>{if(e.preventDefault(),S(""),g){const e=g(v);if(Object.keys(e).length>0)return void w(e)}C(!0);try{await x(v),"function"===typeof s?s():console.error("onClose is not a function in EditFormModal"),j(l||{}),w({})}catch(a){S(a.message||"Error al guardar los cambios")}finally{C(!1)}},loading:A,error:k,submitLabel:b,size:f,className:y,children:p?p&&Array.isArray(p)?(0,r.jsx)(u.A,{columns:2,children:p.map((e,a)=>{const s=(0,o.A)({key:e.name||a,name:e.name,label:e.label,value:v[e.name]||"",onChange:a=>O(e.name,a),error:N[e.name],required:e.required,placeholder:e.placeholder,disabled:e.disabled},e);switch(e.type){case"select":return(0,r.jsx)(c.A,(0,o.A)((0,o.A)({},s),{},{options:e.options||[]}));case"textarea":return(0,r.jsx)(m.A,(0,o.A)({},s));default:return(0,r.jsx)(d.A,(0,o.A)((0,o.A)({},s),{},{type:e.type||"text"}))}})}):null:"function"===typeof h?h({formData:v,handleChange:O,errors:N}):t.Children.map(h,e=>t.isValidElement(e)?t.cloneElement(e,{formData:v,handleChange:O,errors:N}):e)})},h=e=>{let{isOpen:a,onClose:s,title:n,defaultValues:l={},onSubmit:x,children:h,fields:p,initialData:b,submitLabel:f="Crear",size:g="lg",validate:y,resetOnSuccess:v=!0,className:j=""}=e;const N=b||l,[w,A]=(0,t.useState)(N),[C,k]=(0,t.useState)({}),[S,O]=(0,t.useState)(!1),[D,T]=(0,t.useState)("");(0,t.useEffect)(()=>{a&&(A(N),k({}),T(""))},[a,N]);const L=(e,a)=>{A(s=>(0,o.A)((0,o.A)({},s),{},{[e]:a})),C[e]&&k(a=>(0,o.A)((0,o.A)({},a),{},{[e]:""}))};return(0,r.jsx)(i.A,{isOpen:a,onClose:()=>{S||(A(N),k({}),T(""),"function"===typeof s?s():console.error("onClose is not a function in CreateFormModal"))},title:n,onSubmit:async e=>{if(e.preventDefault(),T(""),y){const e=y(w);if(Object.keys(e).length>0)return void k(e)}O(!0);try{await x(w),v&&(A(l),k({})),"function"===typeof s?s():console.error("onClose is not a function in CreateFormModal handleSubmit")}catch(a){T(a.message||"Error al crear el registro")}finally{O(!1)}},loading:S,error:D,submitLabel:f,size:g,className:j,children:p?p&&Array.isArray(p)?(0,r.jsx)(u.A,{columns:2,children:p.map((e,a)=>{const s=(0,o.A)({key:e.name||a,name:e.name,label:e.label,value:w[e.name]||"",onChange:a=>L(e.name,a),error:C[e.name],required:e.required,placeholder:e.placeholder,disabled:e.disabled},e);switch(e.type){case"select":return(0,r.jsx)(c.A,(0,o.A)((0,o.A)({},s),{},{options:e.options||[]}));case"textarea":return(0,r.jsx)(m.A,(0,o.A)({},s));default:return(0,r.jsx)(d.A,(0,o.A)((0,o.A)({},s),{},{type:e.type||"text"}))}})}):null:"function"===typeof h?h({formData:w,handleChange:L,errors:C}):t.Children.map(h,e=>t.isValidElement(e)?t.cloneElement(e,{formData:w,handleChange:L,errors:C}):e)})}},3474:(e,a,s)=>{s.d(a,{A:()=>h});var t=s(9379),n=s(5043),r=s(8635),l=s(1688),o=s(2582),i=s(3001),d=s(579);const c=e=>{var a;let{isOpen:s=!1,onToggle:t=()=>{},isCollapsed:c=!1,onToggleCollapse:m=()=>{}}=e;const{currentUser:u,logout:x}=(0,r.As)(),h=(0,l.W6)(),[p,b]=(0,n.useState)(!1),f=(0,l.zy)(),g=(null===u||void 0===u?void 0:u.rol)||(null===u||void 0===u?void 0:u.role)||"CONSULTA";n.useEffect(()=>{const e=()=>{b(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const y=[{id:"dashboard",icon:"fas fa-home",label:"Dashboard",link:"/dashboard",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"participantes",icon:"fas fa-users",label:"Participantes",link:"/participantes",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"acudientes",icon:"fas fa-user-friends",label:"Acudientes",link:"/acudientes",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"financiero",icon:"fas fa-dollar-sign",label:"Mensualidades",link:"/financiero",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"usuarios",icon:"fas fa-users-cog",label:"Usuarios",link:"/usuarios",badge:null,roles:["ADMINISTRADOR"],adminOnly:!0},{id:"formatos",icon:"fas fa-file-alt",label:"Formatos",link:"/formatos",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"sedes",icon:"fas fa-building",label:"Sedes",link:"/sedes",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"configuracion",icon:"fas fa-cog",label:"Configuraci\xf3n",link:"/configuracion",badge:null,roles:["ADMINISTRADOR","CONSULTA"]}].filter(e=>e.roles.includes(g));return(0,d.jsxs)(d.Fragment,{children:[s&&p&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300",onClick:t,"aria-hidden":"true"}),p&&(0,d.jsx)("button",{onClick:t,className:"fixed top-4 right-4 z-[70] md:hidden bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 min-w-[48px] min-h-[48px] flex items-center justify-center","aria-label":s?"Cerrar men\xfa":"Abrir men\xfa",children:(0,d.jsx)("i",{className:"fas ".concat(s?"fa-times":"fa-bars"," text-xl transition-transform duration-200 ").concat(s?"rotate-90":"")})}),(0,d.jsxs)("aside",{"data-testid":"sidebar",className:"\n          fixed top-0 left-0 h-full text-gray-700 z-50\n          transform transition-transform duration-300 ease-in-out shadow-2xl\n          ".concat(p?"w-[280px] ".concat(s?"translate-x-0":"-translate-x-full"):c?"w-20 translate-x-0 hover:w-64":"w-64 translate-x-0","\n        "),style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(20px)",borderRight:"1px solid rgba(0, 0, 0, 0.1)"},children:[(0,d.jsxs)("div",{className:"\n          ".concat(c&&!p?"p-4":"p-5 md:p-6"," \n          border-b border-gray-200 \n          bg-gradient-to-r from-gray-50 to-gray-100 \n          transition-all duration-300 \n          relative\n        "),children:[!p&&(0,d.jsx)("button",{onClick:m,"aria-label":c?"Expandir men\xfa":"Colapsar men\xfa",className:"absolute -right-3 top-1/2 -translate-y-1/2 w-7 h-7 rounded-full bg-white border border-gray-200 shadow-md flex items-center justify-center hover:bg-gray-50 transition-colors z-10",children:(0,d.jsx)("i",{className:"fas ".concat(c?"fa-angle-double-right":"fa-angle-double-left"," text-sm text-gray-600")})}),(0,d.jsxs)("div",{className:"flex items-center ".concat(c&&!p?"justify-center":"space-x-3"),children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,d.jsx)("img",{src:i,alt:"Corporaci\xf3n Logo",className:"\n                  ".concat(c&&!p?"w-10 h-10":"w-12 h-12 md:w-14 md:h-14"," \n                  rounded-xl object-cover bg-white p-2 shadow-md transition-all duration-300\n                ")}),(0,d.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 md:w-4 md:h-4 bg-green-500 rounded-full border-2 border-white shadow-sm"})]}),(0,d.jsxs)("div",{className:"".concat(c&&!p?"hidden":"block"," transition-all duration-300"),children:[(0,d.jsx)("h2",{className:"text-base md:text-lg font-Lato font-bold text-gray-800 leading-tight",children:"Corporaci\xf3n"}),(0,d.jsx)("p",{className:"text-xs font-Poppins text-gray-600",children:"Todo por un Alma"})]})]})]}),(0,d.jsx)("nav",{className:"p-3 md:p-4 flex-1 overflow-y-auto",children:(0,d.jsx)("ul",{className:"space-y-1",children:y.map(e=>(0,d.jsx)("li",{children:(0,d.jsxs)(o.N_,{to:e.link,className:"\n                    flex items-center \n                    ".concat(c&&!p?"justify-center px-3":"space-x-3 px-4"," \n                    py-3 md:py-3.5\n                    rounded-xl \n                    hover:bg-gray-100 hover:shadow-sm \n                    transition-all duration-200 \n                    group relative overflow-hidden\n                    min-h-[48px]\n                    ").concat(f.pathname.startsWith(e.link)?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"","\n                  "),onClick:p?t:void 0,"aria-current":f.pathname.startsWith(e.link)?"page":void 0,children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/50 to-blue-25/30 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),(0,d.jsx)("i",{className:"\n                    ".concat(e.icon," \n                    ").concat(p?"text-xl":"text-lg","\n                    ").concat(f.pathname.startsWith(e.link)?"text-blue-700":"text-gray-600 group-hover:text-blue-600"," \n                    group-hover:scale-110 transition-all flex-shrink-0 relative z-10\n                  ")}),(0,d.jsx)("span",{className:"\n                    font-Poppins font-medium \n                    ".concat(p?"text-base":"text-sm","\n                    ").concat(f.pathname.startsWith(e.link)?"text-blue-800":"text-gray-700 group-hover:text-gray-900"," \n                    ").concat(c&&!p?"hidden":"block","\n                    transition-all duration-300 z-10\n                  "),children:e.label}),e.badge&&!c&&(0,d.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-sm",children:e.badge})]})},e.id))})}),(0,d.jsxs)("div",{className:"p-3 md:p-4 border-t border-gray-200 mt-auto bg-gradient-to-r from-gray-50 to-gray-100",children:[(0,d.jsxs)("div",{className:"\n            flex items-center \n            ".concat(c&&!p?"justify-center":"space-x-3"," \n            mb-3\n          "),children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[null!==u&&void 0!==u&&u.photoURL?(0,d.jsx)("img",{src:u.photoURL,alt:"Usuario",className:"\n                    rounded-full border-2 border-gray-300 shadow-md \n                    ".concat(c&&!p?"w-10 h-10":"w-11 h-11 md:w-12 md:h-12","\n                  ")}):(0,d.jsx)("div",{className:"\n                  rounded-full border-2 border-gray-300 shadow-md \n                  bg-gradient-to-br from-blue-100 to-blue-200 \n                  flex items-center justify-center \n                  ".concat(c&&!p?"w-10 h-10":"w-11 h-11 md:w-12 md:h-12","\n                "),children:(0,d.jsx)("i",{className:"fas fa-user text-blue-600 ".concat(p?"text-lg":"text-base")})}),(0,d.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"})]}),(!c||p)&&(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"text-sm md:text-base font-Poppins font-semibold text-gray-800 truncate",children:(null===u||void 0===u?void 0:u.displayName)||(null===u||void 0===u||null===(a=u.email)||void 0===a?void 0:a.split("@")[0])}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)("p",{className:"text-xs font-Poppins text-gray-600",children:"ADMINISTRADOR"===g?"Administrador":"Consulta"}),"CONSULTA"===g&&(0,d.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded",title:"Solo lectura",children:(0,d.jsx)("i",{className:"fas fa-eye text-[10px]"})})]})]})]}),(0,d.jsxs)("button",{onClick:async()=>{try{await x(),h.push("/")}catch(e){console.error("Error during logout:",e)}},className:"\n              flex items-center \n              ".concat(c&&!p?"justify-center":""," \n              w-full px-4 py-3\n              text-sm md:text-base\n              text-gray-700 \n              rounded-xl \n              hover:bg-red-50 hover:text-red-600 hover:shadow-sm \n              transition-all duration-200 \n              font-Poppins font-medium \n              group relative overflow-hidden\n              min-h-[48px]\n            "),children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-red-50/50 to-red-25/30 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),(0,d.jsx)("i",{className:"\n              fas fa-sign-out-alt \n              ".concat(p?"text-lg":"text-base","\n              ").concat(c&&!p?"":"mr-3"," \n              group-hover:scale-110 transition-transform relative z-10\n            ")}),(!c||p)&&(0,d.jsx)("span",{className:"relative z-10",children:"Cerrar Sesi\xf3n"})]})]})]})]})},m=n.memo(e=>{let{title:a="Dashboard",subtitle:s="Bienvenido",extraActions:t=null}=e;const{currentUser:o,logout:c}=(0,r.As)(),m=(0,l.W6)(),{sidebarCollapsed:u}=(0,r.VF)(),[x,h]=(0,n.useState)(!1),p=(0,n.useRef)(null);(0,n.useEffect)(()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&h(!1)},a=e=>{"Escape"===e.key&&h(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",a),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",a)}},[]);const b=(0,n.useCallback)(async e=>{e&&(e.preventDefault(),e.stopPropagation());try{await c(),h(!1),m.push("/")}catch(e){console.error("Error al cerrar sesi\xf3n",e)}},[m,c]),f=(0,n.useCallback)(async()=>{try{null!==o&&void 0!==o&&o.email&&(await navigator.clipboard.writeText(o.email),h(!1))}catch(e){console.error("No se pudo copiar el correo",e)}},[null===o||void 0===o?void 0:o.email]),g=(0,n.useCallback)(()=>{h(e=>!e)},[]),y=(0,n.useMemo)(()=>u?"md:ml-20":"md:ml-64",[u]),v=(0,n.useMemo)(()=>(null===o||void 0===o?void 0:o.displayName)||(null===o||void 0===o?void 0:o.email),[null===o||void 0===o?void 0:o.displayName,null===o||void 0===o?void 0:o.email]);return(0,d.jsx)("header",{className:"\n      fixed top-0 right-0 left-0 z-40 \n      bg-white/95 backdrop-blur-lg \n      shadow-md border-b border-gray-200\n      transition-all duration-300\n    ",children:(0,d.jsx)("div",{className:"\n        px-4 md:px-6 \n        py-2.5 md:py-3 \n        transition-all duration-300 \n        ".concat(y,"\n      "),children:(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2 md:gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-3 flex-1 min-w-0 ml-12 md:ml-0",children:[(0,d.jsx)("img",{src:i,alt:"Todo por un Alma",className:"hidden sm:block h-8 md:h-10 w-8 md:w-10 rounded-lg shadow-sm flex-shrink-0"}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h1",{className:"text-base sm:text-lg md:text-2xl font-Lato font-bold text-gray-800 truncate",children:a}),s&&(0,d.jsx)("p",{className:"hidden md:block text-xs md:text-sm font-Poppins text-gray-600 truncate",children:s})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-4 flex-shrink-0",children:[t&&(0,d.jsx)("div",{className:"hidden lg:flex items-center space-x-3",children:t}),(0,d.jsxs)("div",{className:"relative",ref:p,children:[(0,d.jsxs)("button",{onClick:g,className:"flex items-center space-x-2 md:space-x-3 bg-gray-100 rounded-full pl-1.5 md:pl-2 pr-2 md:pr-3 py-1 md:py-1.5 hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[44px]","aria-haspopup":"true","aria-expanded":x,children:[(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[null!==o&&void 0!==o&&o.photoURL?(0,d.jsx)("img",{src:o.photoURL,alt:"Usuario",className:"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-blue-500"}):(0,d.jsx)("div",{className:"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-blue-500 bg-blue-500 flex items-center justify-center",children:(0,d.jsx)("i",{className:"fas fa-user text-white text-sm"})}),(0,d.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 md:w-3 md:h-3 bg-green-400 rounded-full border-2 border-white"})]}),(0,d.jsx)("span",{className:"hidden sm:block text-sm md:text-base font-Poppins font-medium text-gray-700 max-w-[120px] md:max-w-none truncate",children:v}),(0,d.jsx)("i",{className:"hidden sm:block fas fa-chevron-".concat(x?"up":"down"," text-gray-500 text-xs")})]}),x&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-56 md:w-64 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden",children:[(0,d.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:[(0,d.jsx)("p",{className:"text-xs text-gray-500 font-Poppins",children:"Sesi\xf3n iniciada como"}),(0,d.jsx)("p",{className:"text-sm md:text-base text-gray-800 truncate font-Poppins font-medium mt-0.5",children:null===o||void 0===o?void 0:o.email})]}),(0,d.jsxs)("ul",{className:"py-1",children:[(0,d.jsx)("li",{children:(0,d.jsxs)("button",{onClick:f,className:"w-full flex items-center px-4 py-3 text-sm md:text-base text-gray-700 hover:bg-gray-50 font-Poppins transition-colors min-h-[48px]",children:[(0,d.jsx)("i",{className:"fas fa-copy mr-3 text-gray-500 w-4"}),"Copiar correo"]})}),(0,d.jsx)("li",{children:(0,d.jsxs)("button",{onClick:()=>{m.push("/configuracion"),h(!1)},className:"w-full flex items-center px-4 py-3 text-sm md:text-base text-gray-700 hover:bg-gray-50 font-Poppins transition-colors min-h-[48px]",children:[(0,d.jsx)("i",{className:"fas fa-cog mr-3 text-gray-500 w-4"}),"Configuraci\xf3n"]})}),(0,d.jsx)("li",{className:"border-t border-gray-100",children:(0,d.jsxs)("button",{onClick:b,className:"w-full flex items-center px-4 py-3 text-sm md:text-base text-red-600 hover:bg-red-50 font-Poppins transition-colors min-h-[48px]",children:[(0,d.jsx)("i",{className:"fas fa-sign-out-alt mr-3 w-4"}),"Cerrar sesi\xf3n"]})})]})]})]})]})]})})})});var u=s(6761);const x=e=>{let{title:a="Dashboard",subtitle:s="",children:t,loading:n=!1,loadingText:l="Cargando...",extraActions:o=null}=e;const{sidebarOpen:i,sidebarCollapsed:x,toggleSidebarOpen:h,toggleSidebarCollapsed:p}=(0,r.VF)(),b=x?"md:ml-20":"md:ml-64";return n?(0,d.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(c,{isOpen:i,onToggle:h,isCollapsed:x,onToggleCollapse:p}),(0,d.jsx)("main",{className:"flex-1 transition-all duration-300 ".concat(b," pt-16 md:pt-20 px-4 md:px-0"),children:(0,d.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,d.jsx)(u.A,{size:"xl",text:l})})})]})}):(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 font-sans antialiased",children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(c,{isOpen:i,onToggle:h,isCollapsed:x,onToggleCollapse:p}),(0,d.jsxs)("main",{className:"flex-1 transition-all duration-300 ".concat(b," pt-16 md:pt-20 px-4 md:px-0"),children:[(0,d.jsx)(m,{title:a,subtitle:s,extraActions:o}),t]})]})})},h=e=>(0,d.jsx)(r.GB,{children:(0,d.jsx)(x,(0,t.A)({},e))})},4349:(e,a,s)=>{s.d(a,{C5:()=>n.C5,FH:()=>t.FH,gg:()=>n.gg});var t=s(493),n=s(5848);s(6752),s(7479)}}]);
//# sourceMappingURL=422.7aca8102.chunk.js.map