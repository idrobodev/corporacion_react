"use strict";(self.webpackChunkfundacion_todo_por_un_alma=self.webpackChunkfundacion_todo_por_un_alma||[]).push([[466],{2466:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(5043),s=a(3474),o=a(8368),n=a(9379),l=a(854),i=a.n(l);const c="http://formatos-service:8082/api";console.log("\ud83d\udd27 FORMATOS_API_BASE_URL configurada como:",c);const d=i().create({baseURL:c,timeout:3e4,withCredentials:!1,headers:{"Content-Type":"application/json",Accept:"application/json"}});d.interceptors.response.use(e=>e,e=>{var t,a,r,s,o,n,l,i,c;if(console.error("Error en formatos API:",null===(t=e.config)||void 0===t?void 0:t.url,null===(a=e.response)||void 0===a?void 0:a.status,e.message),413===(null===(r=e.response)||void 0===r?void 0:r.status))throw new Error("El archivo es demasiado grande (m\xe1ximo 100MB)");if(409===(null===(s=e.response)||void 0===s?void 0:s.status))throw new Error((null===(i=e.response.data)||void 0===i?void 0:i.detail)||"Conflicto: el recurso ya existe");if(404===(null===(o=e.response)||void 0===o?void 0:o.status))throw new Error("Recurso no encontrado");if(400===(null===(n=e.response)||void 0===n?void 0:n.status))throw new Error((null===(c=e.response.data)||void 0===c?void 0:c.detail)||"Datos inv\xe1lidos");if(500===(null===(l=e.response)||void 0===l?void 0:l.status))throw new Error("Error interno del servidor");if(!e.response)throw new Error("No se puede conectar con el servidor de formatos");throw e});const m=new class{async listFiles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return(await d.get("/files/list",{params:{path:e}})).data}catch(t){throw console.error("Error listando archivos:",t),t}}async uploadFile(e){try{const t=new FormData;t.append("file",e);return(await d.post("/files/upload",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error subiendo archivo:",t),t}}async downloadFile(e){try{return(await d.get("/files/download/".concat(e),{responseType:"blob"})).data}catch(t){throw console.error("Error descargando archivo:",t),t}}async deleteFile(e){try{return(await d.delete("/files/".concat(e))).data}catch(t){throw console.error("Error eliminando archivo:",t),t}}async createFolder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return(await d.post("/folders/create",{nombre:e,parentPath:t})).data}catch(a){throw console.error("Error creando carpeta:",a),a}}async renameFolder(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return(await d.put("/folders/rename",{oldName:e,newName:t,parentPath:a})).data}catch(r){throw console.error("Error renombrando carpeta:",r),r}}async deleteFolder(e){try{return(await d.delete("/folders/".concat(e))).data}catch(t){throw console.error("Error eliminando carpeta:",t),t}}};var x=a(4349),u=a(3714);const h=()=>{const[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)([]),[o,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[d,h]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)([]),w=(0,r.useRef)(!1),[j,N]=(0,r.useState)(""),A=(0,u.$x)(j,300),[k,C]=(0,r.useState)(""),[F,D]=(0,r.useState)(null),E=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const a=Date.now();v(r=>[...r,{id:a,message:e,type:t}]),setTimeout(()=>v(e=>e.filter(e=>e.id!==a)),5e3)},[]),R=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c(!0);try{const a=await m.listFiles(e),{files:r,folders:o}=a;s(r||[]),l(o||[]),t(e)}catch(d){E("Error loading files: ".concat(d.message),"error"),s([]),l([])}finally{c(!1)}},[E]),S=(0,r.useCallback)(async()=>{try{const e=await x.C5.hasPermission(x.gg.ADMINISTRADOR);b(e)}catch(e){h(e.message)}finally{c(!1)}},[]);(0,r.useEffect)(()=>{S()},[S]),(0,r.useEffect)(()=>{if(!w.current){w.current=!0;const e=localStorage.getItem("lastFileManagerPath")||"";R(e)}},[R]),(0,r.useEffect)(()=>{localStorage.setItem("lastFileManagerPath",e)},[e]);const T=e=>{R(e)},I=(0,r.useMemo)(()=>a.filter(e=>e.nombre.toLowerCase().includes(A.toLowerCase())).sort((e,t)=>new Date(t.createdAt||0)-new Date(e.createdAt||0)),[a,A]);return{currentPath:e,files:a,folders:o,loading:i,error:d,uploading:g,isAdmin:p,notifications:y,searchTerm:j,debouncedSearchTerm:A,newFolderName:k,renamingFolder:F,filteredAndSortedFiles:I,setSearchTerm:N,setNewFolderName:C,setRenamingFolder:D,setUploading:f,setError:h,loadFiles:R,addNotification:E,checkAdmin:S,navigateToPath:T,navigateToFolder:t=>{const a=e?"".concat(e,"/").concat(t):t;R(a)},handleBreadcrumbClick:e=>{T(e)},handleCreateFolder:async()=>{if(p&&k.trim())try{await m.createFolder(k.trim(),e),E("Folder created successfully","success"),C(""),R(e)}catch(d){E("Error creating folder: ".concat(d.message),"error")}},handleRenameFolder:async t=>{if(p&&F&&F.newName.trim())try{await m.renameFolder(t,F.newName.trim(),e),E("Folder renamed successfully","success"),D(null),R(e)}catch(d){E("Error renaming folder: ".concat(d.message),"error"),D(null)}},startRename:e=>{D({folderName:e,newName:e})},cancelRename:()=>{D(null)},updateRenameName:e=>{D(t=>(0,n.A)((0,n.A)({},t),{},{newName:e}))},handleDeleteFolder:async t=>{if(p&&window.confirm("Delete folder '".concat(t,"' and all contents?")))try{const a=o.find(e=>e.nombre===t);if(!a)return void E("Folder not found","error");await m.deleteFolder(a.id),E("Folder deleted successfully","success"),R(e)}catch(d){E("Error deleting folder: ".concat(d.message),"error")}},handleDeleteFile:async t=>{if(p&&window.confirm("Delete file '".concat(t,"'?")))try{const r=a.find(e=>e.nombre===t);if(!r)return void E("File not found","error");await m.deleteFile(r.id),E("File deleted successfully","success"),R(e)}catch(d){E("Error deleting file: ".concat(d.message),"error")}},handleDownload:async e=>{try{const t=a.find(t=>t.nombre===e);if(!t)return void E("File not found","error");const r=await m.downloadFile(t.id),s=URL.createObjectURL(r),o=document.createElement("a");o.href=s,o.download=e,o.click(),URL.revokeObjectURL(s)}catch(d){E("Error downloading file: ".concat(d.message),"error")}},onDrop:async t=>{if(console.log("onDrop called with files:",t),!p)return console.log("onDrop: User is not admin"),void E("Permission denied: Admin access required for uploads","error");f(!0);try{console.log("onDrop: Starting upload for",t.length,"files");for(const e of t)await m.uploadFile(e);E("".concat(t.length," files uploaded successfully"),"success"),R(e)}catch(d){console.error("onDrop: Upload error:",d),E("Upload error: ".concat(d.message),"error")}finally{f(!1)}}}};var g=a(579);const f=e=>{let{currentPath:t,onBreadcrumbClick:a}=e;const s=t?t.split("/").filter(Boolean):[];return(0,g.jsx)("div",{className:"mb-4 md:mb-2 ",children:(0,g.jsxs)("nav",{className:"flex items-center bg-white rounded-lg border border-gray-200 px-2 md:px-4 py-3 shadow-sm overflow-x-auto w-full",children:[(0,g.jsxs)("button",{onClick:()=>a(""),className:"flex items-center px-1 md:px-2 py-1 rounded-md text-xs md:text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-all duration-200 whitespace-nowrap",children:[(0,g.jsx)("i",{className:"fas fa-home mr-2 text-gray-500"}),"Dashboard"]}),(0,g.jsx)("i",{className:"fas fa-chevron-right mx-1 md:mx-2 text-gray-400 text-xs"}),(0,g.jsxs)("button",{onClick:()=>a(""),className:"flex items-center px-1 md:px-2 py-1 rounded-md text-xs md:text-sm font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-all duration-200 whitespace-nowrap",children:[(0,g.jsx)("i",{className:"fas fa-folder mr-2 text-blue-500"}),"Ra\xedz"]}),s.map((e,t)=>{const o=s.slice(0,t+1).join("/"),n=t===s.length-1;return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)("i",{className:"fas fa-chevron-right mx-1 md:mx-2 text-gray-400 text-xs"}),(0,g.jsxs)("button",{onClick:()=>a(o),className:"flex items-center px-1 md:px-2 py-1 rounded-md text-xs md:text-sm transition-all duration-200 whitespace-nowrap ".concat(n?"font-semibold text-blue-700 bg-blue-50":"font-medium text-gray-700 hover:bg-blue-50 hover:text-blue-700"),disabled:n,children:[(0,g.jsx)("i",{className:"fas fa-folder mr-2 ".concat(n?"text-blue-600":"text-gray-500")}),e]})]},t)})]})})},p=e=>{let{folders:t,isAdmin:a,currentPath:r,newFolderName:s,setNewFolderName:o,onCreateFolder:n,renamingFolder:l,onUpdateRenameName:i,onStartRename:c,onCancelRename:d,onRenameFolder:m,onDeleteFolder:x,onNavigateToFolder:u}=e;const h=(()=>{if(!r)return null;const e=r.split("/").filter(Boolean);return e.length>0?e[e.length-1]:null})(),f=["Documentos","Im\xe1genes","Videos","Audio","Archivos","C\xf3digo","Otros"];return(0,g.jsxs)("div",{className:"lg:col-span-1 bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow duration-300",children:[(0,g.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[(0,g.jsx)("i",{className:"fas fa-folder-tree mr-2 text-blue-600"}),"Carpetas"]}),(0,g.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[t.map((e,t)=>{const r=e.nombre,s=r===h,o=(null===l||void 0===l?void 0:l.folderName)===r,n=f.includes(r);return(0,g.jsxs)("div",{className:"group relative rounded-xl border transition-all duration-300 hover:shadow-md ".concat(s?"bg-blue-50 border-blue-300 shadow-md":"bg-gray-50 border-gray-200 hover:border-gray-300"," ").concat(o?"ring-2 ring-blue-400 ring-opacity-50":""," ").concat(n?"opacity-75":""),style:{animationDelay:"".concat(50*t,"ms"),animation:"slideInLeft 0.3s ease-out forwards"},children:[s&&(0,g.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-blue-500 rounded-l-xl"}),(0,g.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,g.jsx)("button",{onClick:()=>u(r),className:"flex-1 text-left p-2 rounded-lg transition-all duration-200 ".concat(s?"bg-blue-100 hover:bg-blue-200":"hover:bg-gray-100"),children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("i",{className:"fas mr-3 text-lg transition-all duration-200 ".concat(s?"fa-folder-open text-blue-600":"fa-folder text-yellow-500 group-hover:text-yellow-600")}),o?(0,g.jsx)("input",{type:"text",value:l.newName,onChange:e=>i(e.target.value),onBlur:()=>{l.newName.trim()?m(r):d()},onKeyDown:e=>{"Enter"===e.key?m(r):"Escape"===e.key&&d()},autoFocus:!0,className:"bg-transparent border-b-2 border-blue-500 px-1 py-0.5 focus:outline-none text-gray-800 font-medium animate-pulse"}):(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("span",{className:"font-medium transition-colors duration-200 ".concat(s?"text-blue-800":"text-gray-700"),children:r}),n&&(0,g.jsx)("i",{className:"fas fa-shield-alt ml-2 text-xs text-gray-400",title:"Carpeta del sistema - no se puede editar ni eliminar"})]})]})}),a&&!n&&(0,g.jsx)("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:o?(0,g.jsxs)("div",{className:"flex space-x-1 animate-fadeIn",children:[(0,g.jsx)("button",{onClick:()=>m(r),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Guardar",children:(0,g.jsx)("i",{className:"fas fa-check"})}),(0,g.jsx)("button",{onClick:d,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Cancelar",children:(0,g.jsx)("i",{className:"fas fa-times"})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{onClick:()=>c(r),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Renombrar",children:(0,g.jsx)("i",{className:"fas fa-edit"})}),(0,g.jsx)("button",{onClick:()=>x(r),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Eliminar",children:(0,g.jsx)("i",{className:"fas fa-trash"})})]})})]})]},e.id)}),0===t.length&&(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("i",{className:"fas fa-folder-open text-4xl text-gray-300 mb-3"}),(0,g.jsx)("p",{className:"text-gray-500",children:"No hay carpetas"}),(0,g.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Crea tu primera carpeta para organizar tus archivos"})]})]})]})},b={pdf:{icon:"fas fa-file-pdf",color:"text-red-500",category:"document"},doc:{icon:"fas fa-file-word",color:"text-blue-500",category:"document"},docx:{icon:"fas fa-file-word",color:"text-blue-500",category:"document"},xls:{icon:"fas fa-file-excel",color:"text-green-500",category:"document"},xlsx:{icon:"fas fa-file-excel",color:"text-green-500",category:"document"},ppt:{icon:"fas fa-file-powerpoint",color:"text-orange-500",category:"document"},pptx:{icon:"fas fa-file-powerpoint",color:"text-orange-500",category:"document"},txt:{icon:"fas fa-file-alt",color:"text-gray-500",category:"document"},jpg:{icon:"fas fa-file-image",color:"text-purple-500",category:"image"},jpeg:{icon:"fas fa-file-image",color:"text-purple-500",category:"image"},png:{icon:"fas fa-file-image",color:"text-purple-500",category:"image"},gif:{icon:"fas fa-file-image",color:"text-purple-500",category:"image"},svg:{icon:"fas fa-file-image",color:"text-purple-500",category:"image"},webp:{icon:"fas fa-file-image",color:"text-purple-500",category:"image"},mp4:{icon:"fas fa-file-video",color:"text-red-600",category:"video"},avi:{icon:"fas fa-file-video",color:"text-red-600",category:"video"},mov:{icon:"fas fa-file-video",color:"text-red-600",category:"video"},wmv:{icon:"fas fa-file-video",color:"text-red-600",category:"video"},mp3:{icon:"fas fa-file-audio",color:"text-indigo-500",category:"audio"},wav:{icon:"fas fa-file-audio",color:"text-indigo-500",category:"audio"},flac:{icon:"fas fa-file-audio",color:"text-indigo-500",category:"audio"},zip:{icon:"fas fa-file-archive",color:"text-yellow-600",category:"archive"},rar:{icon:"fas fa-file-archive",color:"text-yellow-600",category:"archive"},"7z":{icon:"fas fa-file-archive",color:"text-yellow-600",category:"archive"},js:{icon:"fas fa-file-code",color:"text-yellow-500",category:"code"},html:{icon:"fas fa-file-code",color:"text-orange-600",category:"code"},css:{icon:"fas fa-file-code",color:"text-blue-600",category:"code"},json:{icon:"fas fa-file-code",color:"text-green-600",category:"code"},default:{icon:"fas fa-file",color:"text-gray-400",category:"other"}},y=e=>{var t;const a=null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase();return b[a]||b.default},v=e=>{if(!e||0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB","TB"][t]},w=e=>{if(!e)return"N/A";const t=new Date(e),a=new Date,r=Math.abs(a-t),s=Math.ceil(r/864e5);return 1===s?"Ayer":s<7?"Hace ".concat(s," d\xedas"):s<30?"Hace ".concat(Math.ceil(s/7)," semanas"):t.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})},j=e=>{let{filteredAndSortedFiles:t,searchTerm:a,onDownload:r,onDeleteFile:s,isAdmin:o}=e;const n=(e,t)=>{if(!t||!e)return e;const a=new RegExp("(".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(a).map((e,t)=>a.test(e)?(0,g.jsx)("mark",{className:"bg-yellow-200 text-gray-900 px-0.5 rounded",children:e},t):e)};return(0,g.jsx)("div",{className:"p-6",children:(0,g.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:t.map(e=>{var t;const l=y(e.nombre);return(0,g.jsxs)("div",{className:"group relative bg-gray-50 rounded-xl border border-gray-200 hover:border-blue-300 hover:shadow-lg transition-all duration-200 overflow-hidden",children:[(0,g.jsxs)("div",{className:"aspect-square flex items-center justify-center bg-white relative",children:[(0,g.jsx)("i",{className:"".concat(l.icon," ").concat(l.color," text-3xl")}),(0,g.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,g.jsxs)("div",{className:"flex space-x-2",children:[(0,g.jsx)("button",{onClick:()=>r(e.nombre),className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-50 transition-colors",title:"Descargar",children:(0,g.jsx)("i",{className:"fas fa-download text-blue-600"})}),o&&(0,g.jsx)("button",{onClick:()=>s(e.nombre),className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-50 transition-colors",title:"Eliminar",children:(0,g.jsx)("i",{className:"fas fa-trash text-red-600"})})]})})]}),(0,g.jsxs)("div",{className:"p-3",children:[(0,g.jsx)("h4",{className:"font-medium text-sm text-gray-900 truncate mb-1",title:e.nombre,children:n(e.nombre,a)}),(0,g.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,g.jsx)("span",{children:e.tama\u00f1o?v(e.tama\u00f1o):"Desconocido"}),(0,g.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ".concat("document"===l.category?"bg-blue-100 text-blue-800":"image"===l.category?"bg-purple-100 text-purple-800":"video"===l.category?"bg-red-100 text-red-800":"audio"===l.category?"bg-indigo-100 text-indigo-800":"archive"===l.category?"bg-yellow-100 text-yellow-800":"code"===l.category?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:null===(t=e.nombre.split(".").pop())||void 0===t?void 0:t.toUpperCase()})]}),(0,g.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.createdAt?w(e.createdAt):"Desconocido"})]})]},e.id)})})})},N=e=>{let{filteredAndSortedFiles:t,searchTerm:a,onDownload:r,onDeleteFile:s,isAdmin:o}=e;const n=(0,u.al)(),l=(e,t)=>{if(!t||!e)return e;const a=new RegExp("(".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(a).map((e,t)=>a.test(e)?(0,g.jsx)("mark",{className:"bg-yellow-200 text-gray-900 px-0.5 rounded",children:e},t):e)};return n?(0,g.jsx)("div",{className:"space-y-3",children:t.map(e=>{var t;const n=y(e.nombre);return(0,g.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:(0,g.jsxs)("div",{className:"flex items-start justify-between",children:[(0,g.jsxs)("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[(0,g.jsx)("i",{className:"".concat(n.icon," ").concat(n.color," text-xl mt-1 flex-shrink-0")}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsx)("div",{className:"font-medium text-gray-900 truncate",title:e.nombre,children:l(e.nombre,a)}),(0,g.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[null===(t=e.nombre.split(".").pop())||void 0===t?void 0:t.toUpperCase()," \u2022 ",n.category]}),(0,g.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,g.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat("document"===n.category?"bg-blue-100 text-blue-800":"image"===n.category?"bg-purple-100 text-purple-800":"video"===n.category?"bg-red-100 text-red-800":"audio"===n.category?"bg-indigo-100 text-indigo-800":"archive"===n.category?"bg-yellow-100 text-yellow-800":"code"===n.category?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:n.category}),(0,g.jsx)("span",{className:"text-xs text-gray-500",children:e.tama\u00f1o?v(e.tama\u00f1o):"Desconocido"})]}),(0,g.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:e.createdAt?w(e.createdAt):"Desconocido"})]})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[(0,g.jsx)("button",{onClick:()=>r(e.nombre),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Descargar",children:(0,g.jsx)("i",{className:"fas fa-download text-sm"})}),o&&(0,g.jsx)("button",{onClick:()=>s(e.nombre),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors",title:"Eliminar",children:(0,g.jsx)("i",{className:"fas fa-trash text-sm"})})]})]})},e.id)})}):(0,g.jsx)("div",{className:"overflow-x-auto",children:(0,g.jsxs)("table",{className:"w-full",children:[(0,g.jsx)("thead",{className:"bg-gray-50",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tama\xf1o"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,g.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,g.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>{var t;const n=y(e.nombre);return(0,g.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("i",{className:"".concat(n.icon," ").concat(n.color," mr-3 text-lg")}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"font-medium text-gray-900 max-w-xs truncate",title:e.nombre,children:l(e.nombre,a)}),(0,g.jsxs)("div",{className:"text-sm text-gray-500",children:[null===(t=e.nombre.split(".").pop())||void 0===t?void 0:t.toUpperCase()," \u2022 ",n.category]})]})]})}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,g.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("document"===n.category?"bg-blue-100 text-blue-800":"image"===n.category?"bg-purple-100 text-purple-800":"video"===n.category?"bg-red-100 text-red-800":"audio"===n.category?"bg-indigo-100 text-indigo-800":"archive"===n.category?"bg-yellow-100 text-yellow-800":"code"===n.category?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:n.category})}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.tama\u00f1o?v(e.tama\u00f1o):"Desconocido"}),(0,g.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,g.jsx)("div",{children:e.createdAt?w(e.createdAt):"Desconocido"}),(0,g.jsx)("div",{className:"text-xs text-gray-400",children:e.createdAt?new Date(e.createdAt).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):""})]}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,g.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,g.jsx)("button",{onClick:()=>r(e.nombre),className:"text-blue-600 hover:text-blue-800 p-1 rounded transition-colors",title:"Descargar",children:(0,g.jsx)("i",{className:"fas fa-download"})}),o&&(0,g.jsx)("button",{onClick:()=>s(e.nombre),className:"text-red-600 hover:text-red-800 p-1 rounded transition-colors",title:"Eliminar",children:(0,g.jsx)("i",{className:"fas fa-trash"})})]})})]},e.id)})})]})})},A=e=>{let{loading:t,filteredAndSortedFiles:a,files:r,viewMode:s,searchTerm:n,onDownload:l,onDeleteFile:i,isAdmin:c}=e;return(0,g.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,g.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,g.jsxs)("h3",{className:"text-lg font-bold text-gray-800",children:["Archivos (",a.length,r.length!==a.length?" de ".concat(r.length):"",")"]})}),t?(0,g.jsx)("div",{className:"p-6",children:"grid"===s?(0,g.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:Array.from({length:10}).map((e,t)=>(0,g.jsxs)("div",{className:"bg-gray-50 rounded-xl border border-gray-200 overflow-hidden",children:[(0,g.jsx)("div",{className:"aspect-square bg-white flex items-center justify-center",children:(0,g.jsx)(o.EA,{variant:"circle",width:"3rem",height:"3rem"})}),(0,g.jsxs)("div",{className:"p-3 space-y-2",children:[(0,g.jsx)(o.EA,{variant:"text",width:"80%"}),(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)(o.EA,{variant:"text",width:"40%"}),(0,g.jsx)(o.EA,{variant:"rectangle",width:"20%",height:"1.5rem"})]}),(0,g.jsx)(o.EA,{variant:"text",width:"60%"})]})]},t))}):(0,g.jsx)("div",{className:"overflow-x-auto",children:(0,g.jsxs)("table",{className:"w-full",children:[(0,g.jsx)("thead",{className:"bg-gray-50",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tama\xf1o"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,g.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,g.jsx)("tbody",{className:"divide-y divide-gray-200",children:Array.from({length:8}).map((e,t)=>(0,g.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(o.EA,{variant:"circle",width:"2rem",height:"2rem",className:"mr-3"}),(0,g.jsxs)("div",{className:"space-y-1",children:[(0,g.jsx)(o.EA,{variant:"text",width:"120px"}),(0,g.jsx)(o.EA,{variant:"text",width:"80px"})]})]})}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,g.jsx)(o.EA,{variant:"rectangle",width:"60px",height:"1.5rem"})}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,g.jsx)(o.EA,{variant:"text",width:"50px"})}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,g.jsxs)("div",{className:"space-y-1",children:[(0,g.jsx)(o.EA,{variant:"text",width:"70px"}),(0,g.jsx)(o.EA,{variant:"text",width:"50px"})]})}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,g.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,g.jsx)(o.EA,{variant:"circle",width:"2rem",height:"2rem"}),(0,g.jsx)(o.EA,{variant:"circle",width:"2rem",height:"2rem"})]})})]},t))})]})})}):0===a.length?(0,g.jsxs)("div",{className:"p-12 text-center text-gray-500",children:[(0,g.jsx)("i",{className:"fas fa-folder-open text-6xl mb-4 text-gray-300"}),(0,g.jsx)("h3",{className:"text-lg font-medium mb-2",children:0===r.length?"No hay archivos":"No se encontraron archivos"}),(0,g.jsx)("p",{className:"text-gray-400 mb-4",children:0===r.length?"Esta carpeta est\xe1 vac\xeda":"Intenta ajustar los filtros de b\xfasqueda"}),c&&0===r.length&&(0,g.jsx)("p",{className:"text-sm text-gray-400",children:"Sube archivos o crea carpetas para organizar."})]}):"grid"===s?(0,g.jsx)(j,{filteredAndSortedFiles:a,searchTerm:n,onDownload:l,onDeleteFile:i,isAdmin:c}):(0,g.jsx)(N,{filteredAndSortedFiles:a,searchTerm:n,onDownload:l,onDeleteFile:i,isAdmin:c})]})},k=()=>{const[e,t]=(0,r.useState)(!1),{currentPath:a,files:n,folders:l,loading:i,error:c,uploading:d,isAdmin:m,notifications:x,searchTerm:u,debouncedSearchTerm:b,newFolderName:y,renamingFolder:v,filteredAndSortedFiles:w,setSearchTerm:j,setNewFolderName:N,navigateToFolder:k,handleBreadcrumbClick:C,handleCreateFolder:F,handleRenameFolder:D,startRename:E,cancelRename:R,updateRenameName:S,handleDeleteFolder:T,handleDeleteFile:I,handleDownload:L,onDrop:U}=h();return i?(0,g.jsx)(s.A,{title:"Formatos",subtitle:"Cargando archivos...",loading:!0,loadingText:"Cargando formatos y carpetas...",children:(0,g.jsx)(o.kt,{})}):c?(0,g.jsx)(s.A,{title:"Formatos",subtitle:"Error al cargar datos",loading:!1,children:(0,g.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,g.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,g.jsxs)("p",{className:"text-red-600",children:["Error loading formats: ",c]})})})}):m||!1!==i?(0,g.jsxs)(s.A,{title:"Formatos",subtitle:"Gesti\xf3n de Archivos y Carpetas",children:[(0,g.jsx)("div",{className:"fixed top-4 left-4 right-4 md:left-auto md:right-4 z-50 space-y-3 max-w-sm md:max-w-md mx-auto md:mx-0",children:x.map(e=>{let{id:t,message:a,type:r}=e;return(0,g.jsxs)("div",{className:"flex items-center p-4 rounded-lg shadow-xl border-l-4 text-white transform transition-all duration-300 ease-out animate-slideInRight ".concat((()=>{switch(r){case"success":return"bg-gradient-to-r from-green-500 to-green-600 border-green-400";case"error":return"bg-gradient-to-r from-red-500 to-red-600 border-red-400";case"warning":return"bg-gradient-to-r from-yellow-500 to-yellow-600 border-yellow-400";default:return"bg-gradient-to-r from-blue-500 to-blue-600 border-blue-400"}})()),style:{animation:"slideInRight 0.5s ease-out forwards"},children:[(0,g.jsx)("i",{className:"".concat((()=>{switch(r){case"success":return"fas fa-check-circle";case"error":return"fas fa-exclamation-circle";case"warning":return"fas fa-exclamation-triangle";default:return"fas fa-info-circle"}})()," mr-3 text-lg flex-shrink-0")}),(0,g.jsx)("span",{className:"flex-1 text-sm font-medium",children:a}),(0,g.jsx)("button",{onClick:()=>{const e=document.getElementById("toast-".concat(t));e&&(e.style.animation="slideOutRight 0.3s ease-in forwards",setTimeout(()=>{},300))},className:"ml-3 p-1 rounded-full hover:bg-black hover:bg-opacity-20 transition-colors duration-200 flex-shrink-0",id:"toast-".concat(t),children:(0,g.jsx)("i",{className:"fas fa-times text-sm"})})]},t)})}),(0,g.jsx)("style",{children:"\n        @keyframes slideInRight {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n\n        @keyframes slideOutRight {\n          from {\n            transform: translateX(0);\n            opacity: 1;\n          }\n          to {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n        }\n\n        .animate-slideInRight {\n          animation: slideInRight 0.5s ease-out forwards;\n        }\n      "}),(0,g.jsx)("div",{className:"px-4 md:px-6 pb-2 md:pb-3 mt-6",children:(0,g.jsx)(f,{currentPath:a,onBreadcrumbClick:C})}),(0,g.jsx)("div",{className:"px-4 md:px-6",children:(0,g.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 mt-2 md:mt-3",children:[(0,g.jsx)(p,{folders:l,isAdmin:m,newFolderName:y,setNewFolderName:N,onCreateFolder:F,renamingFolder:v,onUpdateRenameName:S,onStartRename:E,onCancelRename:R,onRenameFolder:D,onDeleteFolder:T,onNavigateToFolder:k}),(0,g.jsxs)("div",{className:"lg:col-span-2",children:[(0,g.jsx)("div",{className:"mb-4 md:mb-6",children:(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"B\xfasqueda"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,g.jsx)("i",{className:"fas fa-search text-gray-400"})}),(0,g.jsx)("input",{type:"text",placeholder:"Buscar archivos por nombre...",value:u,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded-md pl-10 pr-10 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),u&&(0,g.jsx)("button",{onClick:()=>j(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:(0,g.jsx)("i",{className:"fas fa-times"})})]})]})}),m&&(0,g.jsx)("div",{className:"mb-4 md:mb-6",children:(0,g.jsxs)("button",{onClick:()=>t(!0),disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-4 md:px-6 py-3 md:py-4 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none disabled:cursor-not-allowed text-sm md:text-base",children:[(0,g.jsx)("i",{className:"fas fa-cloud-upload-alt mr-2 md:mr-3"}),"Subir Archivos"]})}),(0,g.jsx)(A,{loading:i,filteredAndSortedFiles:w,files:n,viewMode:"list",searchTerm:b,onDownload:L,onDeleteFile:I,isAdmin:m})]})]})}),(0,g.jsx)(o.Bx,{isOpen:e,onClose:()=>t(!1),onUpload:async e=>{await U(e)},uploading:d})]}):(0,g.jsx)(s.A,{title:"Formatos",subtitle:"Acceso Restringido",loading:!1,children:(0,g.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,g.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[(0,g.jsx)("i",{className:"fas fa-lock text-yellow-500 text-3xl mb-4"}),(0,g.jsx)("h3",{className:"text-lg font-bold text-yellow-800 mb-2",children:"Acceso Restringido"}),(0,g.jsx)("p",{className:"text-yellow-700",children:"Solo administradores pueden gestionar archivos."})]})})})}},3474:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(9379),s=a(5043),o=a(8635),n=a(1688),l=a(2582),i=a(3001),c=a(579);const d=e=>{var t;let{isOpen:a=!1,onToggle:r=()=>{},isCollapsed:d=!1,onToggleCollapse:m=()=>{}}=e;const{currentUser:x,logout:u}=(0,o.As)(),h=(0,n.W6)(),[g,f]=(0,s.useState)(!1),p=(0,n.zy)(),b=(null===x||void 0===x?void 0:x.rol)||(null===x||void 0===x?void 0:x.role)||"CONSULTA";s.useEffect(()=>{const e=()=>{f(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const y=[{id:"dashboard",icon:"fas fa-home",label:"Dashboard",link:"/dashboard",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"participantes",icon:"fas fa-users",label:"Participantes",link:"/participantes",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"acudientes",icon:"fas fa-user-friends",label:"Acudientes",link:"/acudientes",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"financiero",icon:"fas fa-dollar-sign",label:"Mensualidades",link:"/financiero",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"usuarios",icon:"fas fa-users-cog",label:"Usuarios",link:"/usuarios",badge:null,roles:["ADMINISTRADOR"],adminOnly:!0},{id:"formatos",icon:"fas fa-file-alt",label:"Formatos",link:"/formatos",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"sedes",icon:"fas fa-building",label:"Sedes",link:"/sedes",badge:null,roles:["ADMINISTRADOR","CONSULTA"]},{id:"configuracion",icon:"fas fa-cog",label:"Configuraci\xf3n",link:"/configuracion",badge:null,roles:["ADMINISTRADOR","CONSULTA"]}].filter(e=>e.roles.includes(b));return(0,c.jsxs)(c.Fragment,{children:[a&&g&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden transition-opacity duration-300",onClick:r,"aria-hidden":"true"}),g&&(0,c.jsx)("button",{onClick:r,className:"fixed top-4 right-4 z-[70] md:hidden bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 min-w-[48px] min-h-[48px] flex items-center justify-center","aria-label":a?"Cerrar men\xfa":"Abrir men\xfa",children:(0,c.jsx)("i",{className:"fas ".concat(a?"fa-times":"fa-bars"," text-xl transition-transform duration-200 ").concat(a?"rotate-90":"")})}),(0,c.jsxs)("aside",{"data-testid":"sidebar",className:"\n          fixed top-0 left-0 h-full text-gray-700 z-50\n          transform transition-transform duration-300 ease-in-out shadow-2xl\n          ".concat(g?"w-[280px] ".concat(a?"translate-x-0":"-translate-x-full"):d?"w-20 translate-x-0 hover:w-64":"w-64 translate-x-0","\n        "),style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(20px)",borderRight:"1px solid rgba(0, 0, 0, 0.1)"},children:[(0,c.jsxs)("div",{className:"\n          ".concat(d&&!g?"p-4":"p-5 md:p-6"," \n          border-b border-gray-200 \n          bg-gradient-to-r from-gray-50 to-gray-100 \n          transition-all duration-300 \n          relative\n        "),children:[!g&&(0,c.jsx)("button",{onClick:m,"aria-label":d?"Expandir men\xfa":"Colapsar men\xfa",className:"absolute -right-3 top-1/2 -translate-y-1/2 w-7 h-7 rounded-full bg-white border border-gray-200 shadow-md flex items-center justify-center hover:bg-gray-50 transition-colors z-10",children:(0,c.jsx)("i",{className:"fas ".concat(d?"fa-angle-double-right":"fa-angle-double-left"," text-sm text-gray-600")})}),(0,c.jsxs)("div",{className:"flex items-center ".concat(d&&!g?"justify-center":"space-x-3"),children:[(0,c.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,c.jsx)("img",{src:i,alt:"Corporaci\xf3n Logo",className:"\n                  ".concat(d&&!g?"w-10 h-10":"w-12 h-12 md:w-14 md:h-14"," \n                  rounded-xl object-cover bg-white p-2 shadow-md transition-all duration-300\n                ")}),(0,c.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 md:w-4 md:h-4 bg-green-500 rounded-full border-2 border-white shadow-sm"})]}),(0,c.jsxs)("div",{className:"".concat(d&&!g?"hidden":"block"," transition-all duration-300"),children:[(0,c.jsx)("h2",{className:"text-base md:text-lg font-Lato font-bold text-gray-800 leading-tight",children:"Corporaci\xf3n"}),(0,c.jsx)("p",{className:"text-xs font-Poppins text-gray-600",children:"Todo por un Alma"})]})]})]}),(0,c.jsx)("nav",{className:"p-3 md:p-4 flex-1 overflow-y-auto",children:(0,c.jsx)("ul",{className:"space-y-1",children:y.map(e=>(0,c.jsx)("li",{children:(0,c.jsxs)(l.N_,{to:e.link,className:"\n                    flex items-center \n                    ".concat(d&&!g?"justify-center px-3":"space-x-3 px-4"," \n                    py-3 md:py-3.5\n                    rounded-xl \n                    hover:bg-gray-100 hover:shadow-sm \n                    transition-all duration-200 \n                    group relative overflow-hidden\n                    min-h-[48px]\n                    ").concat(p.pathname.startsWith(e.link)?"bg-blue-50 text-blue-700 ring-1 ring-blue-100":"","\n                  "),onClick:g?r:void 0,"aria-current":p.pathname.startsWith(e.link)?"page":void 0,children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/50 to-blue-25/30 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),(0,c.jsx)("i",{className:"\n                    ".concat(e.icon," \n                    ").concat(g?"text-xl":"text-lg","\n                    ").concat(p.pathname.startsWith(e.link)?"text-blue-700":"text-gray-600 group-hover:text-blue-600"," \n                    group-hover:scale-110 transition-all flex-shrink-0 relative z-10\n                  ")}),(0,c.jsx)("span",{className:"\n                    font-Poppins font-medium \n                    ".concat(g?"text-base":"text-sm","\n                    ").concat(p.pathname.startsWith(e.link)?"text-blue-800":"text-gray-700 group-hover:text-gray-900"," \n                    ").concat(d&&!g?"hidden":"block","\n                    transition-all duration-300 z-10\n                  "),children:e.label}),e.badge&&!d&&(0,c.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-sm",children:e.badge})]})},e.id))})}),(0,c.jsxs)("div",{className:"p-3 md:p-4 border-t border-gray-200 mt-auto bg-gradient-to-r from-gray-50 to-gray-100",children:[(0,c.jsxs)("div",{className:"\n            flex items-center \n            ".concat(d&&!g?"justify-center":"space-x-3"," \n            mb-3\n          "),children:[(0,c.jsxs)("div",{className:"relative flex-shrink-0",children:[null!==x&&void 0!==x&&x.photoURL?(0,c.jsx)("img",{src:x.photoURL,alt:"Usuario",className:"\n                    rounded-full border-2 border-gray-300 shadow-md \n                    ".concat(d&&!g?"w-10 h-10":"w-11 h-11 md:w-12 md:h-12","\n                  ")}):(0,c.jsx)("div",{className:"\n                  rounded-full border-2 border-gray-300 shadow-md \n                  bg-gradient-to-br from-blue-100 to-blue-200 \n                  flex items-center justify-center \n                  ".concat(d&&!g?"w-10 h-10":"w-11 h-11 md:w-12 md:h-12","\n                "),children:(0,c.jsx)("i",{className:"fas fa-user text-blue-600 ".concat(g?"text-lg":"text-base")})}),(0,c.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white shadow-sm"})]}),(!d||g)&&(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsx)("p",{className:"text-sm md:text-base font-Poppins font-semibold text-gray-800 truncate",children:(null===x||void 0===x?void 0:x.displayName)||(null===x||void 0===x||null===(t=x.email)||void 0===t?void 0:t.split("@")[0])}),(0,c.jsxs)("div",{className:"flex items-center gap-1",children:[(0,c.jsx)("p",{className:"text-xs font-Poppins text-gray-600",children:"ADMINISTRADOR"===b?"Administrador":"Consulta"}),"CONSULTA"===b&&(0,c.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-1.5 py-0.5 rounded",title:"Solo lectura",children:(0,c.jsx)("i",{className:"fas fa-eye text-[10px]"})})]})]})]}),(0,c.jsxs)("button",{onClick:async()=>{try{await u(),h.push("/")}catch(e){console.error("Error during logout:",e)}},className:"\n              flex items-center \n              ".concat(d&&!g?"justify-center":""," \n              w-full px-4 py-3\n              text-sm md:text-base\n              text-gray-700 \n              rounded-xl \n              hover:bg-red-50 hover:text-red-600 hover:shadow-sm \n              transition-all duration-200 \n              font-Poppins font-medium \n              group relative overflow-hidden\n              min-h-[48px]\n            "),children:[(0,c.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-red-50/50 to-red-25/30 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),(0,c.jsx)("i",{className:"\n              fas fa-sign-out-alt \n              ".concat(g?"text-lg":"text-base","\n              ").concat(d&&!g?"":"mr-3"," \n              group-hover:scale-110 transition-transform relative z-10\n            ")}),(!d||g)&&(0,c.jsx)("span",{className:"relative z-10",children:"Cerrar Sesi\xf3n"})]})]})]})]})},m=s.memo(e=>{let{title:t="Dashboard",subtitle:a="Bienvenido",extraActions:r=null}=e;const{currentUser:l,logout:d}=(0,o.As)(),m=(0,n.W6)(),{sidebarCollapsed:x}=(0,o.VF)(),[u,h]=(0,s.useState)(!1),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&h(!1)},t=e=>{"Escape"===e.key&&h(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[]);const f=(0,s.useCallback)(async e=>{e&&(e.preventDefault(),e.stopPropagation());try{await d(),h(!1),m.push("/")}catch(e){console.error("Error al cerrar sesi\xf3n",e)}},[m,d]),p=(0,s.useCallback)(async()=>{try{null!==l&&void 0!==l&&l.email&&(await navigator.clipboard.writeText(l.email),h(!1))}catch(e){console.error("No se pudo copiar el correo",e)}},[null===l||void 0===l?void 0:l.email]),b=(0,s.useCallback)(()=>{h(e=>!e)},[]),y=(0,s.useMemo)(()=>x?"md:ml-20":"md:ml-64",[x]),v=(0,s.useMemo)(()=>(null===l||void 0===l?void 0:l.displayName)||(null===l||void 0===l?void 0:l.email),[null===l||void 0===l?void 0:l.displayName,null===l||void 0===l?void 0:l.email]);return(0,c.jsx)("header",{className:"\n      fixed top-0 right-0 left-0 z-40 \n      bg-white/95 backdrop-blur-lg \n      shadow-md border-b border-gray-200\n      transition-all duration-300\n    ",children:(0,c.jsx)("div",{className:"\n        px-4 md:px-6 \n        py-2.5 md:py-3 \n        transition-all duration-300 \n        ".concat(y,"\n      "),children:(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2 md:gap-4",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-3 flex-1 min-w-0 ml-12 md:ml-0",children:[(0,c.jsx)("img",{src:i,alt:"Todo por un Alma",className:"hidden sm:block h-8 md:h-10 w-8 md:w-10 rounded-lg shadow-sm flex-shrink-0"}),(0,c.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,c.jsx)("h1",{className:"text-base sm:text-lg md:text-2xl font-Lato font-bold text-gray-800 truncate",children:t}),a&&(0,c.jsx)("p",{className:"hidden md:block text-xs md:text-sm font-Poppins text-gray-600 truncate",children:a})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-4 flex-shrink-0",children:[r&&(0,c.jsx)("div",{className:"hidden lg:flex items-center space-x-3",children:r}),(0,c.jsxs)("div",{className:"relative",ref:g,children:[(0,c.jsxs)("button",{onClick:b,className:"flex items-center space-x-2 md:space-x-3 bg-gray-100 rounded-full pl-1.5 md:pl-2 pr-2 md:pr-3 py-1 md:py-1.5 hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[44px]","aria-haspopup":"true","aria-expanded":u,children:[(0,c.jsxs)("div",{className:"relative flex-shrink-0",children:[null!==l&&void 0!==l&&l.photoURL?(0,c.jsx)("img",{src:l.photoURL,alt:"Usuario",className:"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-blue-500"}):(0,c.jsx)("div",{className:"w-8 h-8 md:w-9 md:h-9 rounded-full border-2 border-blue-500 bg-blue-500 flex items-center justify-center",children:(0,c.jsx)("i",{className:"fas fa-user text-white text-sm"})}),(0,c.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 md:w-3 md:h-3 bg-green-400 rounded-full border-2 border-white"})]}),(0,c.jsx)("span",{className:"hidden sm:block text-sm md:text-base font-Poppins font-medium text-gray-700 max-w-[120px] md:max-w-none truncate",children:v}),(0,c.jsx)("i",{className:"hidden sm:block fas fa-chevron-".concat(u?"up":"down"," text-gray-500 text-xs")})]}),u&&(0,c.jsxs)("div",{className:"absolute right-0 mt-2 w-56 md:w-64 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden",children:[(0,c.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50",children:[(0,c.jsx)("p",{className:"text-xs text-gray-500 font-Poppins",children:"Sesi\xf3n iniciada como"}),(0,c.jsx)("p",{className:"text-sm md:text-base text-gray-800 truncate font-Poppins font-medium mt-0.5",children:null===l||void 0===l?void 0:l.email})]}),(0,c.jsxs)("ul",{className:"py-1",children:[(0,c.jsx)("li",{children:(0,c.jsxs)("button",{onClick:p,className:"w-full flex items-center px-4 py-3 text-sm md:text-base text-gray-700 hover:bg-gray-50 font-Poppins transition-colors min-h-[48px]",children:[(0,c.jsx)("i",{className:"fas fa-copy mr-3 text-gray-500 w-4"}),"Copiar correo"]})}),(0,c.jsx)("li",{children:(0,c.jsxs)("button",{onClick:()=>{m.push("/configuracion"),h(!1)},className:"w-full flex items-center px-4 py-3 text-sm md:text-base text-gray-700 hover:bg-gray-50 font-Poppins transition-colors min-h-[48px]",children:[(0,c.jsx)("i",{className:"fas fa-cog mr-3 text-gray-500 w-4"}),"Configuraci\xf3n"]})}),(0,c.jsx)("li",{className:"border-t border-gray-100",children:(0,c.jsxs)("button",{onClick:f,className:"w-full flex items-center px-4 py-3 text-sm md:text-base text-red-600 hover:bg-red-50 font-Poppins transition-colors min-h-[48px]",children:[(0,c.jsx)("i",{className:"fas fa-sign-out-alt mr-3 w-4"}),"Cerrar sesi\xf3n"]})})]})]})]})]})]})})})});var x=a(6761);const u=e=>{let{title:t="Dashboard",subtitle:a="",children:r,loading:s=!1,loadingText:n="Cargando...",extraActions:l=null}=e;const{sidebarOpen:i,sidebarCollapsed:u,toggleSidebarOpen:h,toggleSidebarCollapsed:g}=(0,o.VF)(),f=u?"md:ml-20":"md:ml-64";return s?(0,c.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(d,{isOpen:i,onToggle:h,isCollapsed:u,onToggleCollapse:g}),(0,c.jsx)("main",{className:"flex-1 transition-all duration-300 ".concat(f," pt-16 md:pt-20 px-4 md:px-0"),children:(0,c.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,c.jsx)(x.A,{size:"xl",text:n})})})]})}):(0,c.jsx)("div",{className:"min-h-screen bg-gray-50 font-sans antialiased",children:(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(d,{isOpen:i,onToggle:h,isCollapsed:u,onToggleCollapse:g}),(0,c.jsxs)("main",{className:"flex-1 transition-all duration-300 ".concat(f," pt-16 md:pt-20 px-4 md:px-0"),children:[(0,c.jsx)(m,{title:t,subtitle:a,extraActions:l}),r]})]})})},h=e=>(0,c.jsx)(o.GB,{children:(0,c.jsx)(u,(0,r.A)({},e))})},4349:(e,t,a)=>{a.d(t,{C5:()=>s.C5,FH:()=>r.FH,gg:()=>s.gg});var r=a(493),s=a(5848);a(6752),a(7479)}}]);
//# sourceMappingURL=466.22e3aa53.chunk.js.map