{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback}from\"react\";import DashboardLayout from\"components/layout/DashboardLayout\";import{dbService}from\"shared/services\";import{FilterBar,StatsGrid,DataTable,ActionDropdown,StatusToggle,FormInput,FormSelect,FormGroup,ExportDropdown}from\"components/UI\";import{ViewDetailsModal,EditFormModal,CreateFormModal}from\"components/common\";import{useFilters,useModal}from\"shared/hooks\";import{validateParticipanteDocumentoUnico,validateFechaNacimiento,validateFechaIngreso,validateSedeExists}from\"shared/utils/validationUtils\";import{arrayToCSV,downloadCSV,calculateAge,formatDateForCSV,formatParticipantName,formatSede,normalizeStatus,formatGender}from\"shared/utils/exportUtils\";// import jsPDF from 'jspdf'; // Temporarily disabled - not available in Docker dev\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Participantes=/*#__PURE__*/React.memo(()=>{const[participantes,setParticipantes]=useState([]);// Asegurar que siempre sea array\nconst[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Use the useFilters hook for filter state management\nconst{filters:filtros,setFilter,clearFilters}=useFilters({sede:\"Todas\",genero:\"Todos\",estado:\"Todos\",busqueda:\"\"});// Use the useModal hook for modal state management\nconst viewModal=useModal();const editModal=useModal();const createModal=useModal();// Funci√≥n para cargar participantes (usando useCallback para evitar re-renders)\nconst loadParticipantes=useCallback(async()=>{try{var _result$data;setLoading(true);setError(null);console.log('üîÑ Cargando participantes...');const result=await dbService.getParticipantes();console.log('üìä Resultado participantes:',result);console.log('üì¶ result.data:',result.data);console.log('üì¶ result.data type:',typeof result.data);console.log('üì¶ result.data isArray:',Array.isArray(result.data));if(result.error){throw new Error(result.error.message||'Error al cargar participantes');}// The API returns {data: {data: [...], error: null}, error: null}, so we need result.data.data\nconst participantesData=Array.isArray((_result$data=result.data)===null||_result$data===void 0?void 0:_result$data.data)?result.data.data:[];console.log('üîÑ participantesData:',participantesData);console.log('üîÑ participantesData.length:',participantesData.length);setParticipantes(participantesData);console.log('‚úÖ Participantes cargados:',participantesData.length);}catch(err){console.error('‚ùå Error cargando participantes:',err);setError(err.message||'Error desconocido al cargar participantes');setParticipantes([]);// Asegurar que no quede undefined\n}finally{setLoading(false);}},[]);useEffect(()=>{loadParticipantes();},[loadParticipantes]);// Funciones para manejar modales (memoized)\nconst abrirModal=useCallback((tipo,participante)=>{if(tipo==='ver'){viewModal.openModal(null,participante);}else if(tipo==='editar'){editModal.openModal(null,participante);}else if(tipo==='crear'){createModal.openModal();}},[viewModal,editModal,createModal]);const filteredParticipantes=useMemo(()=>{// Asegurar que participantes siempre sea un array\nconst safeParticipantes=Array.isArray(participantes)?participantes:[];let filtered=safeParticipantes;if(filtros.sede!==\"Todas\"){filtered=filtered.filter(p=>{var _p$sede;const sedeNombre=((_p$sede=p.sede)===null||_p$sede===void 0?void 0:_p$sede.direccion)||p.sede||'';return sedeNombre.toLowerCase().includes(filtros.sede.toLowerCase());});}if(filtros.genero!==\"Todos\"){filtered=filtered.filter(p=>p.genero===filtros.genero);}if(filtros.estado!==\"Todos\"){// Support both ACTIVO/INACTIVO and Activo/Inactivo\nconst estadoUpper=filtros.estado.toUpperCase();filtered=filtered.filter(p=>p.estado===filtros.estado||p.estado===estadoUpper||filtros.estado==='Activo'&&p.estado==='ACTIVO'||filtros.estado==='Inactivo'&&p.estado==='INACTIVO');}if(filtros.busqueda){const searchLower=filtros.busqueda.toLowerCase();filtered=filtered.filter(p=>{const documento=(p.numero_documento||'').toLowerCase();return documento.includes(searchLower);});}return filtered;},[participantes,filtros]);const toggleEstado=useCallback(async(id,newEstado)=>{try{await dbService.updateParticipante(id,{estado:newEstado});// Refresh data\nconst{data}=await dbService.getParticipantes();setParticipantes(data||[]);}catch(err){console.error('Error updating status:',err);}},[]);const handleActionClick=useCallback((action,participante)=>{switch(action){case'ver':abrirModal('ver',participante);break;case'editar':abrirModal('editar',participante);break;default:// No action\nbreak;}},[abrirModal]);const handleExportPDF=useCallback(()=>{// Create a new window for printing\nconst printWindow=window.open('','_blank');const currentDate=new Date().toLocaleDateString('es-ES');// Generate HTML content for PDF\nconst htmlContent=\"\\n      <!DOCTYPE html>\\n      <html>\\n        <head>\\n          <title>Lista de Participantes - \".concat(currentDate,\"</title>\\n          <style>\\n            body {\\n              font-family: Arial, sans-serif;\\n              margin: 20px;\\n              color: #333;\\n            }\\n            .header {\\n              text-align: center;\\n              margin-bottom: 30px;\\n              border-bottom: 2px solid #333;\\n              padding-bottom: 20px;\\n            }\\n            .header h1 {\\n              color: #2563eb;\\n              margin: 0;\\n              font-size: 24px;\\n            }\\n            .filters {\\n              margin-bottom: 20px;\\n              background: #f8f9fa;\\n              padding: 15px;\\n              border-radius: 5px;\\n            }\\n            .filters h3 {\\n              margin: 0 0 10px 0;\\n              color: #495057;\\n            }\\n            .filters p {\\n              margin: 5px 0;\\n              font-size: 14px;\\n            }\\n            table {\\n              width: 100%;\\n              border-collapse: collapse;\\n              margin-top: 20px;\\n            }\\n            th, td {\\n              border: 1px solid #ddd;\\n              padding: 8px 12px;\\n              text-align: left;\\n            }\\n            th {\\n              background-color: #f8f9fa;\\n              font-weight: bold;\\n              color: #495057;\\n            }\\n            tr:nth-child(even) {\\n              background-color: #f9f9f9;\\n            }\\n            .stats {\\n              margin-top: 30px;\\n              background: #e3f2fd;\\n              padding: 15px;\\n              border-radius: 5px;\\n            }\\n            .stats h3 {\\n              margin: 0 0 10px 0;\\n              color: #1976d2;\\n            }\\n            .stats p {\\n              margin: 5px 0;\\n              font-size: 14px;\\n            }\\n            @media print {\\n              body { margin: 0; }\\n              .no-print { display: none; }\\n            }\\n          </style>\\n        </head>\\n        <body>\\n          <div class=\\\"header\\\">\\n            <h1>Lista de Participantes</h1>\\n            <p>Corporaci\\xF3n Todo por un Alma</p>\\n            <p>Fecha de generaci\\xF3n: \").concat(currentDate,\"</p>\\n          </div>\\n\\n          <div class=\\\"filters\\\">\\n            <h3>Filtros aplicados:</h3>\\n            <p><strong>Sede:</strong> \").concat(filtros.sede==='Todas'?'Todas las sedes':filtros.sede,\"</p>\\n            <p><strong>G\\xE9nero:</strong> \").concat(filtros.genero==='Todos'?'Todos los g√©neros':filtros.genero,\"</p>\\n            <p><strong>Estado:</strong> \").concat(filtros.estado==='Todos'?'Todos los estados':filtros.estado,\"</p>\\n            \").concat(filtros.busqueda?\"<p><strong>B\\xFAsqueda:</strong> \\\"\".concat(filtros.busqueda,\"\\\"</p>\"):'',\"\\n          </div>\\n\\n          <table>\\n            <thead>\\n              <tr>\\n                <th>Nombre</th>\\n                <th>Edad</th>\\n                <th>G\\xE9nero</th>\\n                <th>Tel\\xE9fono</th>\\n                <th>Sede</th>\\n                <th>Estado</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              \").concat(filteredParticipantes.map(participante=>\"\\n                <tr>\\n                  <td>\".concat(formatParticipantName(participante),\"</td>\\n                  <td>\").concat(calculateAge(participante.fecha_nacimiento)||'N/A',\"</td>\\n                  <td>\").concat(formatGender(participante.genero),\"</td>\\n                  <td>\").concat(participante.telefono||'N/A',\"</td>\\n                  <td>\").concat(formatSede(participante.sede),\"</td>\\n                  <td>\").concat(normalizeStatus(participante.estado),\"</td>\\n                </tr>\\n              \")).join(''),\"\\n            </tbody>\\n          </table>\\n\\n          <div class=\\\"stats\\\">\\n            <h3>Estad\\xEDsticas:</h3>\\n            <p><strong>Total de participantes:</strong> \").concat(filteredParticipantes.length,\"</p>\\n            <p><strong>Activos:</strong> \").concat(filteredParticipantes.filter(p=>{const upper=String(p.estado||'').toUpperCase();return upper==='ACTIVO';}).length,\"</p>\\n            <p><strong>Inactivos:</strong> \").concat(filteredParticipantes.filter(p=>{const upper=String(p.estado||'').toUpperCase();return upper==='INACTIVO';}).length,\"</p>\\n          </div>\\n\\n          <script>\\n            window.onload = function() {\\n              window.print();\\n              setTimeout(function() {\\n                window.close();\\n              }, 1000);\\n            }\\n          </script>\\n        </body>\\n      </html>\\n    \");printWindow.document.write(htmlContent);printWindow.document.close();},[filtros,filteredParticipantes]);const handleExportCSV=useCallback(()=>{const headers=[{key:'tipo_documento',label:'Tipo Documento'},{key:'numero_documento',label:'N√∫mero Documento'},{key:'nombres',label:'Nombres'},{key:'apellidos',label:'Apellidos'},{key:'nombre_completo',label:'Nombre Completo'},{key:'fecha_nacimiento',label:'Fecha Nacimiento'},{key:'edad',label:'Edad'},{key:'genero',label:'G√©nero'},{key:'telefono',label:'Tel√©fono'},{key:'sede',label:'Sede'},{key:'fecha_ingreso',label:'Fecha Ingreso'},{key:'estado',label:'Estado'}];const csvData=filteredParticipantes.map(participante=>({tipo_documento:participante.tipo_documento||'N/A',numero_documento:participante.numero_documento||'N/A',nombres:participante.nombres||'N/A',apellidos:participante.apellidos||'N/A',nombre_completo:formatParticipantName(participante),fecha_nacimiento:formatDateForCSV(participante.fecha_nacimiento),edad:calculateAge(participante.fecha_nacimiento)||'N/A',genero:formatGender(participante.genero),telefono:participante.telefono||'N/A',sede:formatSede(participante.sede),fecha_ingreso:formatDateForCSV(participante.fecha_ingreso),estado:normalizeStatus(participante.estado)}));const csvContent=arrayToCSV(csvData,headers);const filename=\"participantes_\".concat(new Date().toISOString().split('T')[0],\".csv\");downloadCSV(csvContent,filename);},[filteredParticipantes,filtros]);if(loading){return/*#__PURE__*/_jsx(DashboardLayout,{title:\"Participantes\",subtitle:\"Gesti\\xF3n de participantes\",loading:true,loadingText:\"Cargando participantes...\"});}if(error){return/*#__PURE__*/_jsx(DashboardLayout,{title:\"Participantes\",subtitle:\"Error al cargar datos\",loading:false,children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-600\",children:[\"Error loading participants: \",error]})})})});}return/*#__PURE__*/_jsxs(DashboardLayout,{title:\"Gesti\\xF3n de Participantes\",subtitle:\"Administra los participantes de la fundaci\\xF3n\",extraActions:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(ExportDropdown,{onExportPDF:handleExportPDF,onExportCSV:handleExportCSV}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>abrirModal('crear',null),className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-2\"}),\"Nuevo Participante\"]})]}),children:[/*#__PURE__*/_jsxs(\"section\",{className:\"px-6 py-6\",children:[/*#__PURE__*/_jsx(FilterBar,{filters:[{type:'select',name:'sede',label:'Sede',options:[{value:'Todas',label:'Todas las Sedes'},{value:'Bello Principal',label:'Bello Principal'},{value:'Bello Campestre',label:'Bello Campestre'},{value:'Apartad√≥',label:'Apartad√≥'}]},{type:'select',name:'genero',label:'G√©nero',options:[{value:'Todos',label:'Todos los G√©neros'},{value:'MASCULINO',label:'Masculino'},{value:'FEMENINO',label:'Femenino'}]},{type:'select',name:'estado',label:'Estado',options:[{value:'Todos',label:'Todos los Estados'},{value:'Activo',label:'Activo'},{value:'Inactivo',label:'Inactivo'}]},{type:'search',name:'busqueda',label:'B√∫squeda por Documento',placeholder:'N√∫mero de documento...',debounceMs:300}],values:filtros,onChange:setFilter,onClear:clearFilters,showClearButton:true}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(StatsGrid,{stats:[{title:'Total Participantes',value:filteredParticipantes.length,icon:'fas fa-users',color:'blue'},{title:'Activos',value:filteredParticipantes.filter(p=>p.estado===\"ACTIVO\"||p.estado===\"Activo\").length,icon:'fas fa-user-check',color:'green'},{title:'Inactivos',value:filteredParticipantes.filter(p=>p.estado===\"INACTIVO\"||p.estado===\"Inactivo\").length,icon:'fas fa-user-times',color:'red'}],columns:3,gap:\"md\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:\"Lista de Participantes\"})}),/*#__PURE__*/_jsx(DataTable,{data:filteredParticipantes,keyExtractor:row=>row.id||row.id_participante,columns:[{key:'participante',header:'Participante',render:row=>{const nombreCompleto=row.nombres&&row.apellidos?\"\".concat(row.nombres,\" \").concat(row.apellidos):row.nombre||'N/A';const tipoDoc=row.tipo_documento||'N/A';const numDoc=row.numero_documento||'N/A';return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:nombreCompleto}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[tipoDoc,\" \",numDoc]})]})]});}},{key:'edad',header:'Edad',render:row=>{if(row.fecha_nacimiento){const birthDate=new Date(row.fecha_nacimiento);const today=new Date();let age=today.getFullYear()-birthDate.getFullYear();const monthDiff=today.getMonth()-birthDate.getMonth();if(monthDiff<0||monthDiff===0&&today.getDate()<birthDate.getDate()){age--;}return\"\".concat(age,\" a\\xF1os\");}return row.edad?\"\".concat(row.edad,\" a\\xF1os\"):'N/A';}},{key:'genero',header:'G√©nero',render:row=>row.genero==='MASCULINO'?'Masculino':row.genero==='FEMENINO'?'Femenino':'N/A'},{key:'fecha_ingreso',header:'Fecha Ingreso',render:row=>{if(row.fecha_ingreso){return new Date(row.fecha_ingreso).toLocaleDateString('es-ES');}return'N/A';}},{key:'sede',header:'Sede',render:row=>{var _row$sede;return((_row$sede=row.sede)===null||_row$sede===void 0?void 0:_row$sede.direccion)||row.sede||'N/A';}},{key:'estado',header:'Estado',render:row=>/*#__PURE__*/_jsx(StatusToggle,{currentStatus:row.estado,statuses:[{value:'ACTIVO',label:'Activo',variant:'success'},{value:'Activo',label:'Activo',variant:'success'},{value:'INACTIVO',label:'Inactivo',variant:'danger'},{value:'Inactivo',label:'Inactivo',variant:'danger'}],onChange:newEstado=>toggleEstado(row.id||row.id_participante,newEstado)})},{key:'acciones',header:'Acciones',render:row=>/*#__PURE__*/_jsx(ActionDropdown,{actions:[{label:'Ver detalles',icon:'fas fa-eye',onClick:()=>handleActionClick('ver',row)},{label:'Editar',icon:'fas fa-edit',onClick:()=>handleActionClick('editar',row)}]})}],loading:loading})]})})]}),/*#__PURE__*/_jsx(ParticipanteViewModal,{isOpen:viewModal.isOpen,onClose:viewModal.closeModal,participante:viewModal.modalData,onCrearAcudiente:()=>{// TODO: Open acudiente creation modal with participante pre-selected\nconsole.log('Crear acudiente para participante:',viewModal.modalData);}}),/*#__PURE__*/_jsx(ParticipanteEditModal,{isOpen:editModal.isOpen,onClose:editModal.closeModal,participante:editModal.modalData,onActualizar:loadParticipantes}),/*#__PURE__*/_jsx(ParticipanteCreateModal,{isOpen:createModal.isOpen,onClose:createModal.closeModal,onCrear:loadParticipantes})]});});// View Modal Component with Acudientes\nconst ParticipanteViewModal=_ref=>{var _participante$sede;let{isOpen,onClose,participante,onCrearAcudiente}=_ref;const[acudientes,setAcudientes]=useState([]);const[loadingAcudientes,setLoadingAcudientes]=useState(false);const loadAcudientes=useCallback(async()=>{if(!(participante!==null&&participante!==void 0&&participante.id)&&!(participante!==null&&participante!==void 0&&participante.id_participante))return;try{setLoadingAcudientes(true);const participanteId=participante.id||participante.id_participante;const result=await dbService.getAcudientesByParticipante(participanteId);if(result.data&&Array.isArray(result.data)){setAcudientes(result.data);}else{setAcudientes([]);}}catch(err){console.error('Error loading acudientes:',err);setAcudientes([]);}finally{setLoadingAcudientes(false);}},[participante]);useEffect(()=>{if(isOpen&&participante){loadAcudientes();}},[isOpen,participante,loadAcudientes]);if(!participante)return null;const nombreCompleto=participante.nombres&&participante.apellidos?\"\".concat(participante.nombres,\" \").concat(participante.apellidos):participante.nombre||'N/A';const edad=(()=>{if(participante.fecha_nacimiento){const birthDate=new Date(participante.fecha_nacimiento);const today=new Date();let age=today.getFullYear()-birthDate.getFullYear();const monthDiff=today.getMonth()-birthDate.getMonth();if(monthDiff<0||monthDiff===0&&today.getDate()<birthDate.getDate()){age--;}return age;}return participante.edad||'N/A';})();const estadoLabel=participante.estado==='ACTIVO'||participante.estado==='Activo'?'Activo':'Inactivo';const estadoClass=participante.estado==='ACTIVO'||participante.estado==='Activo'?'bg-green-100 text-green-800':'bg-red-100 text-red-800';return/*#__PURE__*/_jsx(ViewDetailsModal,{isOpen:isOpen,onClose:onClose,title:\"Detalles del Participante\",data:[{label:'Nombre Completo',value:nombreCompleto},{label:'Tipo de Documento',value:participante.tipo_documento||'N/A'},{label:'N√∫mero de Documento',value:participante.numero_documento||'N/A'},{label:'Edad',value:typeof edad==='number'?\"\".concat(edad,\" a\\xF1os\"):edad},{label:'Fecha de Nacimiento',value:participante.fecha_nacimiento?new Date(participante.fecha_nacimiento).toLocaleDateString('es-ES'):'N/A'},{label:'G√©nero',value:participante.genero==='MASCULINO'?'Masculino':participante.genero==='FEMENINO'?'Femenino':'N/A'},{label:'Fecha de Ingreso',value:participante.fecha_ingreso?new Date(participante.fecha_ingreso).toLocaleDateString('es-ES'):'N/A'},{label:'Sede',value:((_participante$sede=participante.sede)===null||_participante$sede===void 0?void 0:_participante$sede.direccion)||participante.sede||'N/A'},{label:'Tel√©fono',value:participante.telefono||'N/A'},{label:'Estado',value:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-3 py-1 text-sm font-semibold rounded-full \".concat(estadoClass),children:estadoLabel})},{label:'Acudientes',value:/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:loadingAcudientes?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Cargando acudientes...\"}):acudientes.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[acudientes.map((acudiente,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded-lg border border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[acudiente.nombres,\" \",acudiente.apellidos]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[acudiente.parentesco,\" \\u2022 \",acudiente.tipo_documento,\" \",acudiente.numero_documento]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone mr-1\"}),acudiente.telefono,acudiente.email&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope mr-1\"}),acudiente.email]})]})]})})},acudiente.id_acudiente||index)),/*#__PURE__*/_jsxs(\"button\",{onClick:onCrearAcudiente,className:\"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-1\"}),\"Agregar otro acudiente\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-2\",children:\"No hay acudientes registrados\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onCrearAcudiente,className:\"text-sm text-blue-600 hover:text-blue-700 font-medium\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-1\"}),\"Agregar acudiente\"]})]})})}]});};// Edit Modal Component\nconst ParticipanteEditModal=_ref2=>{var _participante$nombre,_participante$nombre2;let{isOpen,onClose,participante,onActualizar}=_ref2;if(!participante)return null;const handleSubmit=async formData=>{var _formData$nombres,_formData$apellidos;console.log('üîÑ Actualizando participante:',formData);// Validate required fields\nif(!formData.tipo_documento||!formData.numero_documento){throw new Error('Tipo y n√∫mero de documento son requeridos');}if(!((_formData$nombres=formData.nombres)!==null&&_formData$nombres!==void 0&&_formData$nombres.trim())||!((_formData$apellidos=formData.apellidos)!==null&&_formData$apellidos!==void 0&&_formData$apellidos.trim())){throw new Error('Nombres y apellidos son requeridos');}if(!formData.fecha_nacimiento||!formData.fecha_ingreso){throw new Error('Fechas de nacimiento e ingreso son requeridas');}if(!formData.id_sede){throw new Error('Debe seleccionar una sede');}// Validate fecha_nacimiento format and value\nconst fechaNacimientoValidation=validateFechaNacimiento(formData.fecha_nacimiento);if(!fechaNacimientoValidation.isValid){throw new Error(fechaNacimientoValidation.error);}// Validate fecha_ingreso format and value\nconst fechaIngresoValidation=validateFechaIngreso(formData.fecha_ingreso);if(!fechaIngresoValidation.isValid){throw new Error(fechaIngresoValidation.error);}// Validate documento √∫nico\nconst participanteId=participante.id||participante.id_participante;const documentoValidation=await validateParticipanteDocumentoUnico(formData.numero_documento,participanteId);if(!documentoValidation.isValid){throw new Error(documentoValidation.error);}// Validate sede exists\nconst sedeValidation=await validateSedeExists(formData.id_sede);if(!sedeValidation.isValid){throw new Error(sedeValidation.error);}const result=await dbService.updateParticipante(participanteId,formData);if(result.error){throw new Error(result.error.message||'Error al actualizar participante');}console.log('‚úÖ Participante actualizado exitosamente');onActualizar();};return/*#__PURE__*/_jsx(EditFormModal,{isOpen:isOpen,onClose:onClose,title:\"Editar Participante\",initialData:{tipo_documento:participante.tipo_documento||'CC',numero_documento:participante.numero_documento||'',nombres:participante.nombres||((_participante$nombre=participante.nombre)===null||_participante$nombre===void 0?void 0:_participante$nombre.split(' ')[0])||'',apellidos:participante.apellidos||((_participante$nombre2=participante.nombre)===null||_participante$nombre2===void 0?void 0:_participante$nombre2.split(' ').slice(1).join(' '))||'',fecha_nacimiento:participante.fecha_nacimiento||'',genero:participante.genero||'MASCULINO',fecha_ingreso:participante.fecha_ingreso||'',estado:participante.estado||'ACTIVO',id_sede:participante.id_sede||participante.sede_id||''},onSubmit:handleSubmit,submitLabel:\"Guardar Cambios\",children:_ref3=>{let{formData,handleChange,errors}=_ref3;return/*#__PURE__*/_jsx(ParticipanteForm,{formData:formData,handleChange:handleChange,errors:errors});}});};// Create Modal Component\nconst ParticipanteCreateModal=_ref4=>{let{isOpen,onClose,onCrear}=_ref4;const handleSubmit=async formData=>{var _formData$nombres2,_formData$apellidos2;console.log('üîÑ Creando participante:',formData);// Validate required fields\nif(!formData.tipo_documento||!formData.numero_documento){throw new Error('Tipo y n√∫mero de documento son requeridos');}if(!((_formData$nombres2=formData.nombres)!==null&&_formData$nombres2!==void 0&&_formData$nombres2.trim())||!((_formData$apellidos2=formData.apellidos)!==null&&_formData$apellidos2!==void 0&&_formData$apellidos2.trim())){throw new Error('Nombres y apellidos son requeridos');}if(!formData.fecha_nacimiento||!formData.fecha_ingreso){throw new Error('Fechas de nacimiento e ingreso son requeridas');}if(!formData.id_sede){throw new Error('Debe seleccionar una sede');}// Validate fecha_nacimiento format and value\nconst fechaNacimientoValidation=validateFechaNacimiento(formData.fecha_nacimiento);if(!fechaNacimientoValidation.isValid){throw new Error(fechaNacimientoValidation.error);}// Validate fecha_ingreso format and value\nconst fechaIngresoValidation=validateFechaIngreso(formData.fecha_ingreso);if(!fechaIngresoValidation.isValid){throw new Error(fechaIngresoValidation.error);}// Validate documento √∫nico\nconst documentoValidation=await validateParticipanteDocumentoUnico(formData.numero_documento);if(!documentoValidation.isValid){throw new Error(documentoValidation.error);}// Validate sede exists\nconst sedeValidation=await validateSedeExists(formData.id_sede);if(!sedeValidation.isValid){throw new Error(sedeValidation.error);}const result=await dbService.createParticipante(formData);if(result.error){throw new Error(result.error.message||'Error al crear participante');}console.log('‚úÖ Participante creado exitosamente');onCrear();};return/*#__PURE__*/_jsx(CreateFormModal,{isOpen:isOpen,onClose:onClose,title:\"Nuevo Participante\",defaultValues:{tipo_documento:'CC',numero_documento:'',nombres:'',apellidos:'',fecha_nacimiento:'',genero:'MASCULINO',fecha_ingreso:'',estado:'ACTIVO',id_sede:''},onSubmit:handleSubmit,submitLabel:\"Crear Participante\",children:_ref5=>{let{formData,handleChange,errors}=_ref5;return/*#__PURE__*/_jsx(ParticipanteForm,{formData:formData,handleChange:handleChange,errors:errors});}});};// Shared Form Component using reusable Form components\nconst ParticipanteForm=_ref6=>{let{formData,handleChange,errors}=_ref6;const[sedes,setSedes]=useState([]);const[loadingSedes,setLoadingSedes]=useState(true);useEffect(()=>{const loadSedes=async()=>{try{setLoadingSedes(true);const result=await dbService.getSedes();if(result.data&&Array.isArray(result.data)){setSedes(result.data);}}catch(err){console.error('Error loading sedes:',err);}finally{setLoadingSedes(false);}};loadSedes();},[]);return/*#__PURE__*/_jsxs(FormGroup,{columns:2,gap:\"md\",children:[/*#__PURE__*/_jsx(FormSelect,{label:\"Tipo de Documento\",name:\"tipo_documento\",value:formData.tipo_documento,onChange:value=>handleChange('tipo_documento',value),options:[{value:'CC',label:'C√©dula de Ciudadan√≠a'},{value:'TI',label:'Tarjeta de Identidad'},{value:'CE',label:'C√©dula de Extranjer√≠a'},{value:'PASAPORTE',label:'Pasaporte'}],error:errors===null||errors===void 0?void 0:errors.tipo_documento,required:true}),/*#__PURE__*/_jsx(FormInput,{label:\"N\\xFAmero de Documento\",name:\"numero_documento\",type:\"text\",value:formData.numero_documento,onChange:value=>handleChange('numero_documento',value),error:errors===null||errors===void 0?void 0:errors.numero_documento,required:true,placeholder:\"Ingrese el n\\xFAmero de documento\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Nombres\",name:\"nombres\",type:\"text\",value:formData.nombres,onChange:value=>handleChange('nombres',value),error:errors===null||errors===void 0?void 0:errors.nombres,required:true,placeholder:\"Ingrese los nombres\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Apellidos\",name:\"apellidos\",type:\"text\",value:formData.apellidos,onChange:value=>handleChange('apellidos',value),error:errors===null||errors===void 0?void 0:errors.apellidos,required:true,placeholder:\"Ingrese los apellidos\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Fecha de Nacimiento\",name:\"fecha_nacimiento\",type:\"date\",value:formData.fecha_nacimiento,onChange:value=>handleChange('fecha_nacimiento',value),error:errors===null||errors===void 0?void 0:errors.fecha_nacimiento,required:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"G\\xE9nero\",name:\"genero\",value:formData.genero,onChange:value=>handleChange('genero',value),options:[{value:'MASCULINO',label:'Masculino'},{value:'FEMENINO',label:'Femenino'}],error:errors===null||errors===void 0?void 0:errors.genero,required:true}),/*#__PURE__*/_jsx(FormInput,{label:\"Fecha de Ingreso\",name:\"fecha_ingreso\",type:\"date\",value:formData.fecha_ingreso,onChange:value=>handleChange('fecha_ingreso',value),error:errors===null||errors===void 0?void 0:errors.fecha_ingreso,required:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"Estado\",name:\"estado\",value:formData.estado,onChange:value=>handleChange('estado',value),options:[{value:'ACTIVO',label:'Activo'},{value:'INACTIVO',label:'Inactivo'}],error:errors===null||errors===void 0?void 0:errors.estado,required:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"Sede\",name:\"id_sede\",value:formData.id_sede,onChange:value=>handleChange('id_sede',value),options:loadingSedes?[{value:'',label:'Cargando sedes...'}]:sedes.map(sede=>({value:sede.id_sede||sede.id,label:sede.direccion||sede.nombre})),error:errors===null||errors===void 0?void 0:errors.id_sede,required:true,disabled:loadingSedes})]});};export default Participantes;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","DashboardLayout","dbService","FilterBar","StatsGrid","DataTable","ActionDropdown","StatusToggle","FormInput","FormSelect","FormGroup","ExportDropdown","ViewDetailsModal","EditFormModal","CreateFormModal","useFilters","useModal","validateParticipanteDocumentoUnico","validateFechaNacimiento","validateFechaIngreso","validateSedeExists","arrayToCSV","downloadCSV","calculateAge","formatDateForCSV","formatParticipantName","formatSede","normalizeStatus","formatGender","jsx","_jsx","jsxs","_jsxs","Participantes","memo","participantes","setParticipantes","loading","setLoading","error","setError","filters","filtros","setFilter","clearFilters","sede","genero","estado","busqueda","viewModal","editModal","createModal","loadParticipantes","_result$data","console","log","result","getParticipantes","data","Array","isArray","Error","message","participantesData","length","err","abrirModal","tipo","participante","openModal","filteredParticipantes","safeParticipantes","filtered","filter","p","_p$sede","sedeNombre","direccion","toLowerCase","includes","estadoUpper","toUpperCase","searchLower","documento","numero_documento","toggleEstado","id","newEstado","updateParticipante","handleActionClick","action","handleExportPDF","printWindow","window","open","currentDate","Date","toLocaleDateString","htmlContent","concat","map","fecha_nacimiento","telefono","join","upper","String","document","write","close","handleExportCSV","headers","key","label","csvData","tipo_documento","nombres","apellidos","nombre_completo","edad","fecha_ingreso","csvContent","filename","toISOString","split","title","subtitle","loadingText","children","className","extraActions","onExportPDF","onExportCSV","onClick","type","name","options","value","placeholder","debounceMs","values","onChange","onClear","showClearButton","stats","icon","color","columns","gap","keyExtractor","row","id_participante","header","render","nombreCompleto","nombre","tipoDoc","numDoc","birthDate","today","age","getFullYear","monthDiff","getMonth","getDate","_row$sede","currentStatus","statuses","variant","actions","ParticipanteViewModal","isOpen","onClose","closeModal","modalData","onCrearAcudiente","ParticipanteEditModal","onActualizar","ParticipanteCreateModal","onCrear","_ref","_participante$sede","acudientes","setAcudientes","loadingAcudientes","setLoadingAcudientes","loadAcudientes","participanteId","getAcudientesByParticipante","estadoLabel","estadoClass","acudiente","index","parentesco","email","id_acudiente","_ref2","_participante$nombre","_participante$nombre2","handleSubmit","formData","_formData$nombres","_formData$apellidos","trim","id_sede","fechaNacimientoValidation","isValid","fechaIngresoValidation","documentoValidation","sedeValidation","initialData","slice","sede_id","onSubmit","submitLabel","_ref3","handleChange","errors","ParticipanteForm","_ref4","_formData$nombres2","_formData$apellidos2","createParticipante","defaultValues","_ref5","_ref6","sedes","setSedes","loadingSedes","setLoadingSedes","loadSedes","getSedes","required","disabled"],"sources":["/Users/todoporunalma/Desktop/coptua/corporacion_react/src/pages/Dashboard/Participantes.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService } from \"shared/services\";\nimport { FilterBar, StatsGrid, DataTable, ActionDropdown, StatusToggle, FormInput, FormSelect, FormGroup, ExportDropdown } from \"components/UI\";\nimport { ViewDetailsModal, EditFormModal, CreateFormModal } from \"components/common\";\nimport { useFilters, useModal } from \"shared/hooks\";\nimport {\n  validateParticipanteDocumentoUnico,\n  validateFechaNacimiento,\n  validateFechaIngreso,\n  validateSedeExists\n} from \"shared/utils/validationUtils\";\nimport {\n  arrayToCSV,\n  downloadCSV,\n  calculateAge,\n  formatDateForCSV,\n  formatParticipantName,\n  formatSede,\n  normalizeStatus,\n  formatGender\n} from \"shared/utils/exportUtils\";\n// import jsPDF from 'jspdf'; // Temporarily disabled - not available in Docker dev\n\nconst Participantes = React.memo(() => {\n  const [participantes, setParticipantes] = useState([]); // Asegurar que siempre sea array\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  // Use the useFilters hook for filter state management\n  const { filters: filtros, setFilter, clearFilters } = useFilters({\n    sede: \"Todas\",\n    genero: \"Todos\",\n    estado: \"Todos\",\n    busqueda: \"\"\n  });\n\n  // Use the useModal hook for modal state management\n  const viewModal = useModal();\n  const editModal = useModal();\n  const createModal = useModal();\n\n  // Funci√≥n para cargar participantes (usando useCallback para evitar re-renders)\n  const loadParticipantes = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('üîÑ Cargando participantes...');\n      \n      const result = await dbService.getParticipantes();\n      console.log('üìä Resultado participantes:', result);\n      console.log('üì¶ result.data:', result.data);\n      console.log('üì¶ result.data type:', typeof result.data);\n      console.log('üì¶ result.data isArray:', Array.isArray(result.data));\n\n      if (result.error) {\n        throw new Error(result.error.message || 'Error al cargar participantes');\n      }\n\n      // The API returns {data: {data: [...], error: null}, error: null}, so we need result.data.data\n      const participantesData = Array.isArray(result.data?.data) ? result.data.data : [];\n      console.log('üîÑ participantesData:', participantesData);\n      console.log('üîÑ participantesData.length:', participantesData.length);\n      setParticipantes(participantesData);\n      console.log('‚úÖ Participantes cargados:', participantesData.length);\n    } catch (err) {\n      console.error('‚ùå Error cargando participantes:', err);\n      setError(err.message || 'Error desconocido al cargar participantes');\n      setParticipantes([]); // Asegurar que no quede undefined\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadParticipantes();\n  }, [loadParticipantes]);\n\n  // Funciones para manejar modales (memoized)\n  const abrirModal = useCallback((tipo, participante) => {\n    if (tipo === 'ver') {\n      viewModal.openModal(null, participante);\n    } else if (tipo === 'editar') {\n      editModal.openModal(null, participante);\n    } else if (tipo === 'crear') {\n      createModal.openModal();\n    }\n  }, [viewModal, editModal, createModal]);\n\n  const filteredParticipantes = useMemo(() => {\n    // Asegurar que participantes siempre sea un array\n    const safeParticipantes = Array.isArray(participantes) ? participantes : [];\n    let filtered = safeParticipantes;\n\n    if (filtros.sede !== \"Todas\") {\n      filtered = filtered.filter(p => {\n        const sedeNombre = p.sede?.direccion || p.sede || '';\n        return sedeNombre.toLowerCase().includes(filtros.sede.toLowerCase());\n      });\n    }\n    if (filtros.genero !== \"Todos\") {\n      filtered = filtered.filter(p => p.genero === filtros.genero);\n    }\n    if (filtros.estado !== \"Todos\") {\n      // Support both ACTIVO/INACTIVO and Activo/Inactivo\n      const estadoUpper = filtros.estado.toUpperCase();\n      filtered = filtered.filter(p => \n        p.estado === filtros.estado || \n        p.estado === estadoUpper ||\n        (filtros.estado === 'Activo' && p.estado === 'ACTIVO') ||\n        (filtros.estado === 'Inactivo' && p.estado === 'INACTIVO')\n      );\n    }\n    if (filtros.busqueda) {\n      const searchLower = filtros.busqueda.toLowerCase();\n      filtered = filtered.filter(p => {\n        const documento = (p.numero_documento || '').toLowerCase();\n\n        return documento.includes(searchLower);\n      });\n    }\n    return filtered;\n  }, [participantes, filtros]);\n\n  const toggleEstado = useCallback(async (id, newEstado) => {\n    try {\n      await dbService.updateParticipante(id, { estado: newEstado });\n      // Refresh data\n      const { data } = await dbService.getParticipantes();\n      setParticipantes(data || []);\n    } catch (err) {\n      console.error('Error updating status:', err);\n    }\n  }, []);\n\n  const handleActionClick = useCallback((action, participante) => {\n    switch (action) {\n      case 'ver':\n        abrirModal('ver', participante);\n        break;\n      case 'editar':\n        abrirModal('editar', participante);\n        break;\n      default:\n        // No action\n        break;\n    }\n  }, [abrirModal]);\n\n  const handleExportPDF = useCallback(() => {\n    // Create a new window for printing\n    const printWindow = window.open('', '_blank');\n    const currentDate = new Date().toLocaleDateString('es-ES');\n\n    // Generate HTML content for PDF\n    const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Lista de Participantes - ${currentDate}</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              color: #333;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #333;\n              padding-bottom: 20px;\n            }\n            .header h1 {\n              color: #2563eb;\n              margin: 0;\n              font-size: 24px;\n            }\n            .filters {\n              margin-bottom: 20px;\n              background: #f8f9fa;\n              padding: 15px;\n              border-radius: 5px;\n            }\n            .filters h3 {\n              margin: 0 0 10px 0;\n              color: #495057;\n            }\n            .filters p {\n              margin: 5px 0;\n              font-size: 14px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px 12px;\n              text-align: left;\n            }\n            th {\n              background-color: #f8f9fa;\n              font-weight: bold;\n              color: #495057;\n            }\n            tr:nth-child(even) {\n              background-color: #f9f9f9;\n            }\n            .stats {\n              margin-top: 30px;\n              background: #e3f2fd;\n              padding: 15px;\n              border-radius: 5px;\n            }\n            .stats h3 {\n              margin: 0 0 10px 0;\n              color: #1976d2;\n            }\n            .stats p {\n              margin: 5px 0;\n              font-size: 14px;\n            }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>Lista de Participantes</h1>\n            <p>Corporaci√≥n Todo por un Alma</p>\n            <p>Fecha de generaci√≥n: ${currentDate}</p>\n          </div>\n\n          <div class=\"filters\">\n            <h3>Filtros aplicados:</h3>\n            <p><strong>Sede:</strong> ${filtros.sede === 'Todas' ? 'Todas las sedes' : filtros.sede}</p>\n            <p><strong>G√©nero:</strong> ${filtros.genero === 'Todos' ? 'Todos los g√©neros' : filtros.genero}</p>\n            <p><strong>Estado:</strong> ${filtros.estado === 'Todos' ? 'Todos los estados' : filtros.estado}</p>\n            ${filtros.busqueda ? `<p><strong>B√∫squeda:</strong> \"${filtros.busqueda}\"</p>` : ''}\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Nombre</th>\n                <th>Edad</th>\n                <th>G√©nero</th>\n                <th>Tel√©fono</th>\n                <th>Sede</th>\n                <th>Estado</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${filteredParticipantes.map(participante => `\n                <tr>\n                  <td>${formatParticipantName(participante)}</td>\n                  <td>${calculateAge(participante.fecha_nacimiento) || 'N/A'}</td>\n                  <td>${formatGender(participante.genero)}</td>\n                  <td>${participante.telefono || 'N/A'}</td>\n                  <td>${formatSede(participante.sede)}</td>\n                  <td>${normalizeStatus(participante.estado)}</td>\n                </tr>\n              `).join('')}\n            </tbody>\n          </table>\n\n          <div class=\"stats\">\n            <h3>Estad√≠sticas:</h3>\n            <p><strong>Total de participantes:</strong> ${filteredParticipantes.length}</p>\n            <p><strong>Activos:</strong> ${filteredParticipantes.filter(p => {\n              const upper = String(p.estado || '').toUpperCase();\n              return upper === 'ACTIVO';\n            }).length}</p>\n            <p><strong>Inactivos:</strong> ${filteredParticipantes.filter(p => {\n              const upper = String(p.estado || '').toUpperCase();\n              return upper === 'INACTIVO';\n            }).length}</p>\n          </div>\n\n          <script>\n            window.onload = function() {\n              window.print();\n              setTimeout(function() {\n                window.close();\n              }, 1000);\n            }\n          </script>\n        </body>\n      </html>\n    `;\n\n    printWindow.document.write(htmlContent);\n    printWindow.document.close();\n  }, [filtros, filteredParticipantes]);\n\n  const handleExportCSV = useCallback(() => {\n    const headers = [\n      { key: 'tipo_documento', label: 'Tipo Documento' },\n      { key: 'numero_documento', label: 'N√∫mero Documento' },\n      { key: 'nombres', label: 'Nombres' },\n      { key: 'apellidos', label: 'Apellidos' },\n      { key: 'nombre_completo', label: 'Nombre Completo' },\n      { key: 'fecha_nacimiento', label: 'Fecha Nacimiento' },\n      { key: 'edad', label: 'Edad' },\n      { key: 'genero', label: 'G√©nero' },\n      { key: 'telefono', label: 'Tel√©fono' },\n      { key: 'sede', label: 'Sede' },\n      { key: 'fecha_ingreso', label: 'Fecha Ingreso' },\n      { key: 'estado', label: 'Estado' }\n    ];\n\n    const csvData = filteredParticipantes.map(participante => ({\n      tipo_documento: participante.tipo_documento || 'N/A',\n      numero_documento: participante.numero_documento || 'N/A',\n      nombres: participante.nombres || 'N/A',\n      apellidos: participante.apellidos || 'N/A',\n      nombre_completo: formatParticipantName(participante),\n      fecha_nacimiento: formatDateForCSV(participante.fecha_nacimiento),\n      edad: calculateAge(participante.fecha_nacimiento) || 'N/A',\n      genero: formatGender(participante.genero),\n      telefono: participante.telefono || 'N/A',\n      sede: formatSede(participante.sede),\n      fecha_ingreso: formatDateForCSV(participante.fecha_ingreso),\n      estado: normalizeStatus(participante.estado)\n    }));\n\n\n    const csvContent = arrayToCSV(csvData, headers);\n\n    const filename = `participantes_${new Date().toISOString().split('T')[0]}.csv`;\n    downloadCSV(csvContent, filename);\n  }, [filteredParticipantes, filtros]);\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Participantes\" subtitle=\"Gesti√≥n de participantes\" loading={true} loadingText=\"Cargando participantes...\" />\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout title=\"Participantes\" subtitle=\"Error al cargar datos\" loading={false}>\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-600\">Error loading participants: {error}</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout title=\"Gesti√≥n de Participantes\" subtitle=\"Administra los participantes de la fundaci√≥n\" extraActions={\n      <div className=\"flex space-x-3\">\n        <ExportDropdown\n          onExportPDF={handleExportPDF}\n          onExportCSV={handleExportCSV}\n        />\n        <button\n          onClick={() => abrirModal('crear', null)}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          <i className=\"fas fa-plus mr-2\"></i>\n          Nuevo Participante\n        </button>\n      </div>\n    }>\n      <section className=\"px-6 py-6\">\n        <FilterBar\n          filters={[\n            {\n              type: 'select',\n              name: 'sede',\n              label: 'Sede',\n              options: [\n                { value: 'Todas', label: 'Todas las Sedes' },\n                { value: 'Bello Principal', label: 'Bello Principal' },\n                { value: 'Bello Campestre', label: 'Bello Campestre' },\n                { value: 'Apartad√≥', label: 'Apartad√≥' }\n              ]\n            },\n            {\n              type: 'select',\n              name: 'genero',\n              label: 'G√©nero',\n              options: [\n                { value: 'Todos', label: 'Todos los G√©neros' },\n                { value: 'MASCULINO', label: 'Masculino' },\n                { value: 'FEMENINO', label: 'Femenino' }\n              ]\n            },\n            {\n              type: 'select',\n              name: 'estado',\n              label: 'Estado',\n              options: [\n                { value: 'Todos', label: 'Todos los Estados' },\n                { value: 'Activo', label: 'Activo' },\n                { value: 'Inactivo', label: 'Inactivo' }\n              ]\n            },\n            {\n              type: 'search',\n              name: 'busqueda',\n              label: 'B√∫squeda por Documento',\n              placeholder: 'N√∫mero de documento...',\n              debounceMs: 300\n            }\n          ]}\n          values={filtros}\n          onChange={setFilter}\n          onClear={clearFilters}\n          showClearButton={true}\n        />\n\n        {/* Estad√≠sticas R√°pidas */}\n        <div className=\"mt-6\">\n          <StatsGrid\n            stats={[\n              {\n                title: 'Total Participantes',\n                value: filteredParticipantes.length,\n                icon: 'fas fa-users',\n                color: 'blue'\n              },\n              {\n                title: 'Activos',\n                value: filteredParticipantes.filter(p => p.estado === \"ACTIVO\" || p.estado === \"Activo\").length,\n                icon: 'fas fa-user-check',\n                color: 'green'\n              },\n              {\n                title: 'Inactivos',\n                value: filteredParticipantes.filter(p => p.estado === \"INACTIVO\" || p.estado === \"Inactivo\").length,\n                icon: 'fas fa-user-times',\n                color: 'red'\n              }\n            ]}\n            columns={3}\n            gap=\"md\"\n          />\n        </div>\n\n        {/* Tabla de Participantes */}\n        <div className=\"mt-6\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">Lista de Participantes</h3>\n          </div>\n          \n          <DataTable\n            data={filteredParticipantes}\n            keyExtractor={(row) => row.id || row.id_participante}\n            columns={[\n              {\n                key: 'participante',\n                header: 'Participante',\n                render: (row) => {\n                  const nombreCompleto = row.nombres && row.apellidos \n                    ? `${row.nombres} ${row.apellidos}` \n                    : row.nombre || 'N/A';\n                  const tipoDoc = row.tipo_documento || 'N/A';\n                  const numDoc = row.numero_documento || 'N/A';\n                  \n                  return (\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                        <i className=\"fas fa-user text-blue-600\"></i>\n                      </div>\n                      <div className=\"ml-4\">\n                        <div className=\"text-sm font-medium text-gray-900\">\n                          {nombreCompleto}\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {tipoDoc} {numDoc}\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n              },\n              {\n                key: 'edad',\n                header: 'Edad',\n                render: (row) => {\n                  if (row.fecha_nacimiento) {\n                    const birthDate = new Date(row.fecha_nacimiento);\n                    const today = new Date();\n                    let age = today.getFullYear() - birthDate.getFullYear();\n                    const monthDiff = today.getMonth() - birthDate.getMonth();\n                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n                      age--;\n                    }\n                    return `${age} a√±os`;\n                  }\n                  return row.edad ? `${row.edad} a√±os` : 'N/A';\n                }\n              },\n              {\n                key: 'genero',\n                header: 'G√©nero',\n                render: (row) => (\n                  row.genero === 'MASCULINO' ? 'Masculino' : row.genero === 'FEMENINO' ? 'Femenino' : 'N/A'\n                )\n              },\n              {\n                key: 'fecha_ingreso',\n                header: 'Fecha Ingreso',\n                render: (row) => {\n                  if (row.fecha_ingreso) {\n                    return new Date(row.fecha_ingreso).toLocaleDateString('es-ES');\n                  }\n                  return 'N/A';\n                }\n              },\n              {\n                key: 'sede',\n                header: 'Sede',\n                render: (row) => row.sede?.direccion || row.sede || 'N/A'\n              },\n              {\n                key: 'estado',\n                header: 'Estado',\n                render: (row) => (\n                  <StatusToggle\n                    currentStatus={row.estado}\n                    statuses={[\n                      { value: 'ACTIVO', label: 'Activo', variant: 'success' },\n                      { value: 'Activo', label: 'Activo', variant: 'success' },\n                      { value: 'INACTIVO', label: 'Inactivo', variant: 'danger' },\n                      { value: 'Inactivo', label: 'Inactivo', variant: 'danger' }\n                    ]}\n                    onChange={(newEstado) => toggleEstado(row.id || row.id_participante, newEstado)}\n                  />\n                )\n              },\n              {\n                key: 'acciones',\n                header: 'Acciones',\n                render: (row) => (\n                  <ActionDropdown\n                    actions={[\n                      {\n                        label: 'Ver detalles',\n                        icon: 'fas fa-eye',\n                        onClick: () => handleActionClick('ver', row)\n                      },\n                      {\n                        label: 'Editar',\n                        icon: 'fas fa-edit',\n                        onClick: () => handleActionClick('editar', row)\n                      }\n                    ]}\n                  />\n                )\n              }\n            ]}\n            loading={loading}\n          />\n        </div>\n        </div>\n      </section>\n\n      {/* Modales */}\n      <ParticipanteViewModal\n        isOpen={viewModal.isOpen}\n        onClose={viewModal.closeModal}\n        participante={viewModal.modalData}\n        onCrearAcudiente={() => {\n          // TODO: Open acudiente creation modal with participante pre-selected\n          console.log('Crear acudiente para participante:', viewModal.modalData);\n        }}\n      />\n\n      <ParticipanteEditModal\n        isOpen={editModal.isOpen}\n        onClose={editModal.closeModal}\n        participante={editModal.modalData}\n        onActualizar={loadParticipantes}\n      />\n\n      <ParticipanteCreateModal\n        isOpen={createModal.isOpen}\n        onClose={createModal.closeModal}\n        onCrear={loadParticipantes}\n      />\n    </DashboardLayout>\n  );\n});\n\n// View Modal Component with Acudientes\nconst ParticipanteViewModal = ({ isOpen, onClose, participante, onCrearAcudiente }) => {\n  const [acudientes, setAcudientes] = useState([]);\n  const [loadingAcudientes, setLoadingAcudientes] = useState(false);\n\n  const loadAcudientes = useCallback(async () => {\n    if (!participante?.id && !participante?.id_participante) return;\n\n    try {\n      setLoadingAcudientes(true);\n      const participanteId = participante.id || participante.id_participante;\n      const result = await dbService.getAcudientesByParticipante(participanteId);\n\n      if (result.data && Array.isArray(result.data)) {\n        setAcudientes(result.data);\n      } else {\n        setAcudientes([]);\n      }\n    } catch (err) {\n      console.error('Error loading acudientes:', err);\n      setAcudientes([]);\n    } finally {\n      setLoadingAcudientes(false);\n    }\n  }, [participante]);\n\n  useEffect(() => {\n    if (isOpen && participante) {\n      loadAcudientes();\n    }\n  }, [isOpen, participante, loadAcudientes]);\n\n  if (!participante) return null;\n\n  const nombreCompleto = participante.nombres && participante.apellidos \n    ? `${participante.nombres} ${participante.apellidos}` \n    : participante.nombre || 'N/A';\n\n  const edad = (() => {\n    if (participante.fecha_nacimiento) {\n      const birthDate = new Date(participante.fecha_nacimiento);\n      const today = new Date();\n      let age = today.getFullYear() - birthDate.getFullYear();\n      const monthDiff = today.getMonth() - birthDate.getMonth();\n      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n        age--;\n      }\n      return age;\n    }\n    return participante.edad || 'N/A';\n  })();\n\n  const estadoLabel = participante.estado === 'ACTIVO' || participante.estado === 'Activo' ? 'Activo' : 'Inactivo';\n  const estadoClass = participante.estado === 'ACTIVO' || participante.estado === 'Activo' \n    ? 'bg-green-100 text-green-800' \n    : 'bg-red-100 text-red-800';\n\n  return (\n    <ViewDetailsModal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Detalles del Participante\"\n      data={[\n        { label: 'Nombre Completo', value: nombreCompleto },\n        { label: 'Tipo de Documento', value: participante.tipo_documento || 'N/A' },\n        { label: 'N√∫mero de Documento', value: participante.numero_documento || 'N/A' },\n        { label: 'Edad', value: typeof edad === 'number' ? `${edad} a√±os` : edad },\n        { label: 'Fecha de Nacimiento', value: participante.fecha_nacimiento \n          ? new Date(participante.fecha_nacimiento).toLocaleDateString('es-ES') \n          : 'N/A' \n        },\n        { label: 'G√©nero', value: participante.genero === 'MASCULINO' ? 'Masculino' : participante.genero === 'FEMENINO' ? 'Femenino' : 'N/A' },\n        { label: 'Fecha de Ingreso', value: participante.fecha_ingreso\n          ? new Date(participante.fecha_ingreso).toLocaleDateString('es-ES')\n          : 'N/A'\n        },\n        { label: 'Sede', value: participante.sede?.direccion || participante.sede || 'N/A' },\n        { label: 'Tel√©fono', value: participante.telefono || 'N/A' },\n        { \n          label: 'Estado', \n          value: (\n            <span className={`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${estadoClass}`}>\n              {estadoLabel}\n            </span>\n          )\n        },\n        {\n          label: 'Acudientes',\n          value: (\n            <div className=\"mt-2\">\n              {loadingAcudientes ? (\n                <p className=\"text-sm text-gray-500\">Cargando acudientes...</p>\n              ) : acudientes.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {acudientes.map((acudiente, index) => (\n                    <div key={acudiente.id_acudiente || index} className=\"bg-gray-50 p-3 rounded-lg border border-gray-200\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <p className=\"text-sm font-medium text-gray-900\">\n                            {acudiente.nombres} {acudiente.apellidos}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            {acudiente.parentesco} ‚Ä¢ {acudiente.tipo_documento} {acudiente.numero_documento}\n                          </p>\n                          <p className=\"text-xs text-gray-500 mt-1\">\n                            <i className=\"fas fa-phone mr-1\"></i>{acudiente.telefono}\n                            {acudiente.email && (\n                              <span className=\"ml-2\">\n                                <i className=\"fas fa-envelope mr-1\"></i>{acudiente.email}\n                              </span>\n                            )}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                  <button\n                    onClick={onCrearAcudiente}\n                    className=\"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium\"\n                  >\n                    <i className=\"fas fa-plus mr-1\"></i>\n                    Agregar otro acudiente\n                  </button>\n                </div>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <p className=\"text-sm text-gray-500 mb-2\">No hay acudientes registrados</p>\n                  <button\n                    onClick={onCrearAcudiente}\n                    className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n                  >\n                    <i className=\"fas fa-plus mr-1\"></i>\n                    Agregar acudiente\n                  </button>\n                </div>\n              )}\n            </div>\n          )\n        }\n      ]}\n    />\n  );\n};\n\n// Edit Modal Component\nconst ParticipanteEditModal = ({ isOpen, onClose, participante, onActualizar }) => {\n  if (!participante) return null;\n\n  const handleSubmit = async (formData) => {\n    console.log('üîÑ Actualizando participante:', formData);\n    \n    // Validate required fields\n    if (!formData.tipo_documento || !formData.numero_documento) {\n      throw new Error('Tipo y n√∫mero de documento son requeridos');\n    }\n    if (!formData.nombres?.trim() || !formData.apellidos?.trim()) {\n      throw new Error('Nombres y apellidos son requeridos');\n    }\n    if (!formData.fecha_nacimiento || !formData.fecha_ingreso) {\n      throw new Error('Fechas de nacimiento e ingreso son requeridas');\n    }\n    if (!formData.id_sede) {\n      throw new Error('Debe seleccionar una sede');\n    }\n    \n    // Validate fecha_nacimiento format and value\n    const fechaNacimientoValidation = validateFechaNacimiento(formData.fecha_nacimiento);\n    if (!fechaNacimientoValidation.isValid) {\n      throw new Error(fechaNacimientoValidation.error);\n    }\n    \n    // Validate fecha_ingreso format and value\n    const fechaIngresoValidation = validateFechaIngreso(formData.fecha_ingreso);\n    if (!fechaIngresoValidation.isValid) {\n      throw new Error(fechaIngresoValidation.error);\n    }\n    \n    // Validate documento √∫nico\n    const participanteId = participante.id || participante.id_participante;\n    const documentoValidation = await validateParticipanteDocumentoUnico(formData.numero_documento, participanteId);\n    if (!documentoValidation.isValid) {\n      throw new Error(documentoValidation.error);\n    }\n    \n    // Validate sede exists\n    const sedeValidation = await validateSedeExists(formData.id_sede);\n    if (!sedeValidation.isValid) {\n      throw new Error(sedeValidation.error);\n    }\n    \n    const result = await dbService.updateParticipante(participanteId, formData);\n    \n    if (result.error) {\n      throw new Error(result.error.message || 'Error al actualizar participante');\n    }\n    \n    console.log('‚úÖ Participante actualizado exitosamente');\n    onActualizar();\n  };\n\n  return (\n    <EditFormModal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Editar Participante\"\n      initialData={{\n        tipo_documento: participante.tipo_documento || 'CC',\n        numero_documento: participante.numero_documento || '',\n        nombres: participante.nombres || participante.nombre?.split(' ')[0] || '',\n        apellidos: participante.apellidos || participante.nombre?.split(' ').slice(1).join(' ') || '',\n        fecha_nacimiento: participante.fecha_nacimiento || '',\n        genero: participante.genero || 'MASCULINO',\n        fecha_ingreso: participante.fecha_ingreso || '',\n        estado: participante.estado || 'ACTIVO',\n        id_sede: participante.id_sede || participante.sede_id || '',\n      }}\n      onSubmit={handleSubmit}\n      submitLabel=\"Guardar Cambios\"\n    >\n      {({ formData, handleChange, errors }) => (\n        <ParticipanteForm \n          formData={formData} \n          handleChange={handleChange} \n          errors={errors}\n        />\n      )}\n    </EditFormModal>\n  );\n};\n\n// Create Modal Component\nconst ParticipanteCreateModal = ({ isOpen, onClose, onCrear }) => {\n  const handleSubmit = async (formData) => {\n    console.log('üîÑ Creando participante:', formData);\n    \n    // Validate required fields\n    if (!formData.tipo_documento || !formData.numero_documento) {\n      throw new Error('Tipo y n√∫mero de documento son requeridos');\n    }\n    if (!formData.nombres?.trim() || !formData.apellidos?.trim()) {\n      throw new Error('Nombres y apellidos son requeridos');\n    }\n    if (!formData.fecha_nacimiento || !formData.fecha_ingreso) {\n      throw new Error('Fechas de nacimiento e ingreso son requeridas');\n    }\n    if (!formData.id_sede) {\n      throw new Error('Debe seleccionar una sede');\n    }\n    \n    // Validate fecha_nacimiento format and value\n    const fechaNacimientoValidation = validateFechaNacimiento(formData.fecha_nacimiento);\n    if (!fechaNacimientoValidation.isValid) {\n      throw new Error(fechaNacimientoValidation.error);\n    }\n    \n    // Validate fecha_ingreso format and value\n    const fechaIngresoValidation = validateFechaIngreso(formData.fecha_ingreso);\n    if (!fechaIngresoValidation.isValid) {\n      throw new Error(fechaIngresoValidation.error);\n    }\n    \n    // Validate documento √∫nico\n    const documentoValidation = await validateParticipanteDocumentoUnico(formData.numero_documento);\n    if (!documentoValidation.isValid) {\n      throw new Error(documentoValidation.error);\n    }\n    \n    // Validate sede exists\n    const sedeValidation = await validateSedeExists(formData.id_sede);\n    if (!sedeValidation.isValid) {\n      throw new Error(sedeValidation.error);\n    }\n    \n    const result = await dbService.createParticipante(formData);\n    \n    if (result.error) {\n      throw new Error(result.error.message || 'Error al crear participante');\n    }\n    \n    console.log('‚úÖ Participante creado exitosamente');\n    onCrear();\n  };\n\n  return (\n    <CreateFormModal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Nuevo Participante\"\n      defaultValues={{\n        tipo_documento: 'CC',\n        numero_documento: '',\n        nombres: '',\n        apellidos: '',\n        fecha_nacimiento: '',\n        genero: 'MASCULINO',\n        fecha_ingreso: '',\n        estado: 'ACTIVO',\n        id_sede: '',\n      }}\n      onSubmit={handleSubmit}\n      submitLabel=\"Crear Participante\"\n    >\n      {({ formData, handleChange, errors }) => (\n        <ParticipanteForm \n          formData={formData} \n          handleChange={handleChange} \n          errors={errors}\n        />\n      )}\n    </CreateFormModal>\n  );\n};\n\n// Shared Form Component using reusable Form components\nconst ParticipanteForm = ({ formData, handleChange, errors }) => {\n  const [sedes, setSedes] = useState([]);\n  const [loadingSedes, setLoadingSedes] = useState(true);\n\n  useEffect(() => {\n    const loadSedes = async () => {\n      try {\n        setLoadingSedes(true);\n        const result = await dbService.getSedes();\n        if (result.data && Array.isArray(result.data)) {\n          setSedes(result.data);\n        }\n      } catch (err) {\n        console.error('Error loading sedes:', err);\n      } finally {\n        setLoadingSedes(false);\n      }\n    };\n    loadSedes();\n  }, []);\n\n  return (\n    <FormGroup columns={2} gap=\"md\">\n      <FormSelect\n        label=\"Tipo de Documento\"\n        name=\"tipo_documento\"\n        value={formData.tipo_documento}\n        onChange={(value) => handleChange('tipo_documento', value)}\n        options={[\n          { value: 'CC', label: 'C√©dula de Ciudadan√≠a' },\n          { value: 'TI', label: 'Tarjeta de Identidad' },\n          { value: 'CE', label: 'C√©dula de Extranjer√≠a' },\n          { value: 'PASAPORTE', label: 'Pasaporte' }\n        ]}\n        error={errors?.tipo_documento}\n        required\n      />\n\n      <FormInput\n        label=\"N√∫mero de Documento\"\n        name=\"numero_documento\"\n        type=\"text\"\n        value={formData.numero_documento}\n        onChange={(value) => handleChange('numero_documento', value)}\n        error={errors?.numero_documento}\n        required\n        placeholder=\"Ingrese el n√∫mero de documento\"\n      />\n\n      <FormInput\n        label=\"Nombres\"\n        name=\"nombres\"\n        type=\"text\"\n        value={formData.nombres}\n        onChange={(value) => handleChange('nombres', value)}\n        error={errors?.nombres}\n        required\n        placeholder=\"Ingrese los nombres\"\n      />\n\n      <FormInput\n        label=\"Apellidos\"\n        name=\"apellidos\"\n        type=\"text\"\n        value={formData.apellidos}\n        onChange={(value) => handleChange('apellidos', value)}\n        error={errors?.apellidos}\n        required\n        placeholder=\"Ingrese los apellidos\"\n      />\n\n      <FormInput\n        label=\"Fecha de Nacimiento\"\n        name=\"fecha_nacimiento\"\n        type=\"date\"\n        value={formData.fecha_nacimiento}\n        onChange={(value) => handleChange('fecha_nacimiento', value)}\n        error={errors?.fecha_nacimiento}\n        required\n      />\n\n      <FormSelect\n        label=\"G√©nero\"\n        name=\"genero\"\n        value={formData.genero}\n        onChange={(value) => handleChange('genero', value)}\n        options={[\n          { value: 'MASCULINO', label: 'Masculino' },\n          { value: 'FEMENINO', label: 'Femenino' }\n        ]}\n        error={errors?.genero}\n        required\n      />\n\n      <FormInput\n        label=\"Fecha de Ingreso\"\n        name=\"fecha_ingreso\"\n        type=\"date\"\n        value={formData.fecha_ingreso}\n        onChange={(value) => handleChange('fecha_ingreso', value)}\n        error={errors?.fecha_ingreso}\n        required\n      />\n\n      <FormSelect\n        label=\"Estado\"\n        name=\"estado\"\n        value={formData.estado}\n        onChange={(value) => handleChange('estado', value)}\n        options={[\n          { value: 'ACTIVO', label: 'Activo' },\n          { value: 'INACTIVO', label: 'Inactivo' }\n        ]}\n        error={errors?.estado}\n        required\n      />\n\n      <FormSelect\n        label=\"Sede\"\n        name=\"id_sede\"\n        value={formData.id_sede}\n        onChange={(value) => handleChange('id_sede', value)}\n        options={loadingSedes ? [{ value: '', label: 'Cargando sedes...' }] : sedes.map(sede => ({\n          value: sede.id_sede || sede.id,\n          label: sede.direccion || sede.nombre\n        }))}\n        error={errors?.id_sede}\n        required\n        disabled={loadingSedes}\n      />\n    </FormGroup>\n  );\n};\n\nexport default Participantes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}