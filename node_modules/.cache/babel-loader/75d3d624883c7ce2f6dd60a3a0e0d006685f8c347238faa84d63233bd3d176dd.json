{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import DashboardLayout from\"components/layout/DashboardLayout\";import{dbService}from\"shared/services\";import{StatsGrid,ActionCard,LoadingState}from\"components/UI\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DashboardComponent=()=>{const[dashboardData,setDashboardData]=useState(null);const[loading,setLoading]=useState(true);const history=useHistory();// Load dashboard data\nuseEffect(()=>{const loadDashboardData=async()=>{try{var _dashboardResponse$da,_acudientesResult$dat,_acudientesResult$dat2;setLoading(true);// Load basic stats\nconst dashboardResponse=await dbService.getDashboardData();console.log('Dashboard API Response:',dashboardResponse);const{participantes,mensualidades}=((_dashboardResponse$da=dashboardResponse.data)===null||_dashboardResponse$da===void 0?void 0:_dashboardResponse$da.data)||{};console.log('Extracted data:',{participantes,mensualidades});// Load acudientes count\nconst acudientesResult=await dbService.getAcudientes();const totalAcudientes=(acudientesResult===null||acudientesResult===void 0?void 0:(_acudientesResult$dat=acudientesResult.data)===null||_acudientesResult$dat===void 0?void 0:(_acudientesResult$dat2=_acudientesResult$dat.data)===null||_acudientesResult$dat2===void 0?void 0:_acudientesResult$dat2.length)||0;// Calculate stats from real data\nconst stats={totalParticipantes:participantes||0,participantesActivos:participantes||0,// Assuming all are active for now\ntotalMensualidades:mensualidades||0,mensualidadesPagadas:Math.floor((mensualidades||0)*0.7),// Mock 70% paid\nmensualidadesPendientes:Math.ceil((mensualidades||0)*0.3),// Mock 30% pending\ntotalAcudientes:totalAcudientes};setDashboardData(stats);}catch(error){console.error('Error loading dashboard data:',error);// Set default values on error\nsetDashboardData({totalParticipantes:0,participantesActivos:0,totalMensualidades:0,mensualidadesPagadas:0,mensualidadesPendientes:0,totalAcudientes:0});}finally{setLoading(false);}};loadDashboardData();},[]);if(loading){return/*#__PURE__*/_jsx(DashboardLayout,{title:\"Dashboard\",subtitle:\"Corporaci\\xF3n Todo por un Alma\",children:/*#__PURE__*/_jsx(LoadingState,{message:\"Cargando dashboard...\"})});}const stats=[{title:\"Participantes Activos\",value:(dashboardData===null||dashboardData===void 0?void 0:dashboardData.totalParticipantes)||0,icon:\"fas fa-users\",color:\"blue\",subtitle:\"Total registrados\",onClick:()=>history.push('/participantes')},{title:\"Mensualidades\",value:(dashboardData===null||dashboardData===void 0?void 0:dashboardData.mensualidadesPagadas)||0,icon:\"fas fa-dollar-sign\",color:\"green\",subtitle:\"Pendientes: \".concat((dashboardData===null||dashboardData===void 0?void 0:dashboardData.mensualidadesPendientes)||0),onClick:()=>history.push('/financiero')}];const quickActions=[{label:\"Gestionar Participantes\",icon:\"fas fa-user-plus\",color:\"blue\",onClick:()=>history.push('/participantes')},{label:\"Gestionar Acudientes\",icon:\"fas fa-user-friends\",color:\"purple\",onClick:()=>history.push('/acudientes')},{label:\"Gestión Financiera\",icon:\"fas fa-dollar-sign\",color:\"green\",onClick:()=>history.push('/financiero')},{label:\"Gestionar Usuarios\",icon:\"fas fa-users-cog\",color:\"indigo\",onClick:()=>history.push('/usuarios')},{label:\"Configuración\",icon:\"fas fa-cog\",color:\"gray\",onClick:()=>history.push('/configuracion')}];return/*#__PURE__*/_jsxs(DashboardLayout,{title:\"Dashboard\",subtitle:\"Corporaci\\xF3n Todo por un Alma\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 md:px-6 py-4 md:py-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl md:text-2xl font-Lato font-bold text-gray-800 mb-4 md:mb-6\",children:\"Resumen General\"}),/*#__PURE__*/_jsx(StatsGrid,{stats:stats,columns:2,gap:\"md\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 md:px-6 py-4 md:py-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg md:text-xl font-Lato font-bold text-gray-800 mb-3 md:mb-4\",children:\"Acceso R\\xE1pido\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4\",children:quickActions.map((action,index)=>/*#__PURE__*/_jsx(ActionCard,{label:action.label,icon:action.icon,color:action.color,onClick:action.onClick},index))})]})]});};// Wrap with React.memo to prevent unnecessary re-renders\n// Component will only re-render when props change\nconst Dashboard=/*#__PURE__*/React.memo(DashboardComponent);export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useHistory","DashboardLayout","dbService","StatsGrid","ActionCard","LoadingState","jsx","_jsx","jsxs","_jsxs","DashboardComponent","dashboardData","setDashboardData","loading","setLoading","history","loadDashboardData","_dashboardResponse$da","_acudientesResult$dat","_acudientesResult$dat2","dashboardResponse","getDashboardData","console","log","participantes","mensualidades","data","acudientesResult","getAcudientes","totalAcudientes","length","stats","totalParticipantes","participantesActivos","totalMensualidades","mensualidadesPagadas","Math","floor","mensualidadesPendientes","ceil","error","title","subtitle","children","message","value","icon","color","onClick","push","concat","quickActions","label","className","columns","gap","map","action","index","Dashboard","memo"],"sources":["/Users/todoporunalma/Desktop/coptua/corporacion_react/src/pages/Dashboard/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService } from \"shared/services\";\nimport { StatsGrid, ActionCard, LoadingState } from \"components/UI\";\n\nconst DashboardComponent = () => {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const history = useHistory();\n\n  // Load dashboard data\n  useEffect(() => {\n    const loadDashboardData = async () => {\n      try {\n        setLoading(true);\n        \n        // Load basic stats\n        const dashboardResponse = await dbService.getDashboardData();\n        console.log('Dashboard API Response:', dashboardResponse);\n        const { participantes, mensualidades } = dashboardResponse.data?.data || {};\n        console.log('Extracted data:', { participantes, mensualidades });\n        \n        // Load acudientes count\n        const acudientesResult = await dbService.getAcudientes();\n        const totalAcudientes = acudientesResult?.data?.data?.length || 0;\n        \n        // Calculate stats from real data\n        const stats = {\n          totalParticipantes: participantes || 0,\n          participantesActivos: participantes || 0, // Assuming all are active for now\n          totalMensualidades: mensualidades || 0,\n          mensualidadesPagadas: Math.floor((mensualidades || 0) * 0.7), // Mock 70% paid\n          mensualidadesPendientes: Math.ceil((mensualidades || 0) * 0.3), // Mock 30% pending\n          totalAcudientes: totalAcudientes\n        };\n        \n        setDashboardData(stats);\n        \n      } catch (error) {\n        console.error('Error loading dashboard data:', error);\n        // Set default values on error\n        setDashboardData({\n          totalParticipantes: 0,\n          participantesActivos: 0,\n          totalMensualidades: 0,\n          mensualidadesPagadas: 0,\n          mensualidadesPendientes: 0,\n          totalAcudientes: 0\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    loadDashboardData();\n  }, []);\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Dashboard\" subtitle=\"Corporación Todo por un Alma\">\n        <LoadingState message=\"Cargando dashboard...\" />\n      </DashboardLayout>\n    );\n  }\n\n  const stats = [\n    {\n      title: \"Participantes Activos\",\n      value: dashboardData?.totalParticipantes || 0,\n      icon: \"fas fa-users\",\n      color: \"blue\",\n      subtitle: \"Total registrados\",\n      onClick: () => history.push('/participantes')\n    },\n    {\n      title: \"Mensualidades\",\n      value: dashboardData?.mensualidadesPagadas || 0,\n      icon: \"fas fa-dollar-sign\",\n      color: \"green\",\n      subtitle: `Pendientes: ${dashboardData?.mensualidadesPendientes || 0}`,\n      onClick: () => history.push('/financiero')\n    }\n  ];\n\n  const quickActions = [\n    {\n      label: \"Gestionar Participantes\",\n      icon: \"fas fa-user-plus\",\n      color: \"blue\",\n      onClick: () => history.push('/participantes')\n    },\n    {\n      label: \"Gestionar Acudientes\",\n      icon: \"fas fa-user-friends\",\n      color: \"purple\",\n      onClick: () => history.push('/acudientes')\n    },\n    {\n      label: \"Gestión Financiera\",\n      icon: \"fas fa-dollar-sign\",\n      color: \"green\",\n      onClick: () => history.push('/financiero')\n    },\n    {\n      label: \"Gestionar Usuarios\",\n      icon: \"fas fa-users-cog\",\n      color: \"indigo\",\n      onClick: () => history.push('/usuarios')\n    },\n    {\n      label: \"Configuración\",\n      icon: \"fas fa-cog\",\n      color: \"gray\",\n      onClick: () => history.push('/configuracion')\n    }\n  ];\n\n  return (\n    <DashboardLayout title=\"Dashboard\" subtitle=\"Corporación Todo por un Alma\">\n      {/* Widgets de Resumen General */}\n      <div className=\"px-4 md:px-6 py-4 md:py-6\">\n        <h2 className=\"text-xl md:text-2xl font-Lato font-bold text-gray-800 mb-4 md:mb-6\">Resumen General</h2>\n        <StatsGrid stats={stats} columns={2} gap=\"md\" />\n      </div>\n\n      {/* Botones de Acceso Rápido */}\n      <div className=\"px-4 md:px-6 py-4 md:py-6\">\n        <h3 className=\"text-lg md:text-xl font-Lato font-bold text-gray-800 mb-3 md:mb-4\">Acceso Rápido</h3>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4\">\n          {quickActions.map((action, index) => (\n            <ActionCard\n              key={index}\n              label={action.label}\n              icon={action.icon}\n              color={action.color}\n              onClick={action.onClick}\n            />\n          ))}\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n};\n\n// Wrap with React.memo to prevent unnecessary re-renders\n// Component will only re-render when props change\nconst Dashboard = React.memo(DashboardComponent);\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}