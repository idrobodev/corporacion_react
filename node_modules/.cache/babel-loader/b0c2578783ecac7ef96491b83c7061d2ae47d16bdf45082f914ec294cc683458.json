{"ast":null,"code":"var _jsxFileName = \"/Users/todoporunalma/Desktop/ol/corporacion_react/src/pages/Dashboard/Usuarios.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService, ROLES } from \"shared/services\";\nimport { FilterBar } from \"components/UI/Filter\";\nimport { StatsGrid } from \"components/UI/Card\";\nimport { DataTable } from \"components/UI/Table\";\nimport { ViewDetailsModal, EditFormModal, CreateFormModal } from \"components/common/CRUDModals\";\nimport { useFilters, useModal } from \"shared/hooks\";\nimport { validateEmail } from \"shared/utils/validationUtils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UsuariosComponent = () => {\n  _s();\n  const [usuarios, setUsuarios] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [canEdit, setCanEdit] = useState(false);\n\n  // Use custom hooks\n  const {\n    filters: filtros,\n    setFilter,\n    clearFilters\n  } = useFilters({\n    rol: \"Todos\",\n    busqueda: \"\"\n  });\n  const verModal = useModal();\n  const editarModal = useModal();\n  const crearModal = useModal();\n\n  // Función para cargar usuarios\n  const loadUsuarios = useCallback(async () => {\n    try {\n      var _result$data;\n      setLoading(true);\n      setError(null);\n      console.log('🔄 Cargando usuarios...');\n      const result = await dbService.getUsuarios();\n      console.log('📊 Resultado usuarios:', result);\n      if (result.error) {\n        throw new Error(result.error.message || 'Error al cargar usuarios');\n      }\n\n      // La respuesta puede ser {data: [...], error: null} o {data: {data: [...]}, error: null}\n      let usuariosData = [];\n      if (Array.isArray(result.data)) {\n        usuariosData = result.data;\n      } else if (Array.isArray((_result$data = result.data) === null || _result$data === void 0 ? void 0 : _result$data.data)) {\n        usuariosData = result.data.data;\n      } else {\n        usuariosData = [];\n      }\n      setUsuarios(usuariosData);\n      console.log('✅ Usuarios cargados:', usuariosData.length);\n    } catch (err) {\n      console.error('❌ Error cargando usuarios:', err);\n      setError(err.message || 'Error desconocido al cargar usuarios');\n      setUsuarios([]);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Exponer funciones globalmente para el menú desplegable\n  useEffect(() => {\n    window.verModal = verModal;\n    window.editarModal = editarModal;\n    window.deleteUser = async userId => {\n      try {\n        const result = await dbService.deleteUsuario(userId);\n        if (result.error) {\n          alert('Error al eliminar usuario: ' + result.error.message);\n        } else {\n          alert('Usuario eliminado exitosamente');\n          await loadUsuarios();\n        }\n      } catch (error) {\n        alert('Error al eliminar usuario: ' + error.message);\n      }\n    };\n    return () => {\n      delete window.verModal;\n      delete window.editarModal;\n      delete window.deleteUser;\n    };\n  }, [verModal, editarModal, loadUsuarios]);\n\n  // Cargar usuario actual y verificar permisos\n  useEffect(() => {\n    const loadCurrentUser = async () => {\n      try {\n        console.log('🔐 Verificando permisos de administrador...');\n        // Verificar si tiene permisos de administrador\n        const hasPermission = await dbService.hasPermission(ROLES.ADMINISTRADOR);\n        console.log('✅ Permisos de administrador obtenidos:', hasPermission);\n        setCanEdit(hasPermission);\n        console.log('🎯 canEdit establecido como:', hasPermission);\n      } catch (err) {\n        console.error('❌ Error cargando permisos:', err);\n        setCanEdit(false);\n      }\n    };\n    loadCurrentUser();\n    loadUsuarios();\n  }, [loadUsuarios]);\n\n  // Filtrar usuarios\n  const filteredUsuarios = useMemo(() => {\n    const safeUsuarios = Array.isArray(usuarios) ? usuarios : [];\n    let filtered = safeUsuarios;\n    if (filtros.rol !== \"Todos\") {\n      filtered = filtered.filter(u => (u.rol || u.role) === filtros.rol);\n    }\n    if (filtros.busqueda) {\n      filtered = filtered.filter(u => (u.email || '').toLowerCase().includes(filtros.busqueda.toLowerCase()));\n    }\n    return filtered;\n  }, [usuarios, filtros]);\n\n  // Estadísticas\n  const statsData = useMemo(() => [{\n    title: \"Total Usuarios\",\n    value: filteredUsuarios.length,\n    icon: \"fas fa-users\",\n    color: \"blue\"\n  }], [filteredUsuarios]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Usuarios\",\n      subtitle: \"Gesti\\xF3n de usuarios\",\n      loading: true,\n      loadingText: \"Cargando usuarios...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Usuarios\",\n      subtitle: \"Error al cargar datos\",\n      loading: false,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 border border-red-200 rounded-lg p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-600\",\n            children: [\"Error loading usuarios del sistema: \", error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Verificar permisos de acceso a la página\n  if (!canEdit) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Usuarios\",\n      subtitle: \"Acceso denegado\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center max-w-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-lock text-yellow-600 text-5xl mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-900 mb-2\",\n            children: \"Acceso Denegado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"No tienes permisos para acceder a esta p\\xE1gina. Solo los administradores pueden gestionar usuarios.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this);\n  }\n  const filterConfig = [{\n    type: 'select',\n    name: 'rol',\n    label: 'Rol',\n    options: [{\n      value: 'Todos',\n      label: 'Todos los Roles'\n    }, {\n      value: ROLES.ADMINISTRADOR,\n      label: 'Administrador'\n    }, {\n      value: ROLES.CONSULTA,\n      label: 'Consulta'\n    }]\n  }, {\n    type: 'search',\n    name: 'busqueda',\n    label: 'Búsqueda',\n    placeholder: 'Buscar por email...'\n  }];\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    title: \"Gesti\\xF3n de Usuarios del sistema\",\n    subtitle: \"Administra los usuarios del sistema\",\n    extraActions: canEdit && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => crearModal.openModal(),\n      className: \"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-plus mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }, this), \"Nuevo Usuario\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"px-4 md:px-6 py-4 md:py-6\",\n      children: [/*#__PURE__*/_jsxDEV(FilterBar, {\n        filters: filterConfig,\n        values: filtros,\n        onChange: setFilter,\n        onClear: clearFilters,\n        showClearButton: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6\",\n        children: /*#__PURE__*/_jsxDEV(StatsGrid, {\n          stats: statsData,\n          columns: 3,\n          gap: \"md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-sm border border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6 border-b border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold text-gray-800\",\n                  children: \"Lista de Usuarios del sistema\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600 mt-1\",\n                  children: \"Gestiona los usuarios del sistema\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 15\n              }, this), canEdit ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-user-shield mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 19\n                }, this), \"Modo Administrador\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 17\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-eye mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 19\n                }, this), \"Modo Solo Lectura\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 11\n          }, this), filteredUsuarios.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-12 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-users text-gray-300 text-4xl mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-gray-900 mb-2\",\n              children: \"No se encontraron usuarios del sistema\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500\",\n              children: \"No hay usuarios que coincidan con los filtros aplicados.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(DataTable, {\n            columns: [{\n              key: 'email',\n              header: 'Email',\n              render: usuario => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-user text-blue-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium text-gray-900\",\n                    children: usuario.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: [\"ID: \", usuario.id_usuario || usuario.id]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 21\n              }, this)\n            }, {\n              key: 'rol',\n              header: 'Rol',\n              render: usuario => {\n                const userRole = usuario.rol || usuario.role;\n                return /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'bg-purple-100 text-purple-800' : 'bg-green-100 text-green-800'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: `fas ${userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'fa-user-shield' : 'fa-user'} mr-2`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 279,\n                    columnNumber: 25\n                  }, this), userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'Administrador' : 'Consulta']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 23\n                }, this);\n              }\n            }, {\n              key: 'acciones',\n              header: 'Acciones',\n              render: usuario => {\n                console.log('🔍 Renderizando acciones para usuario:', usuario.email, 'canEdit:', canEdit);\n                if (canEdit) {\n                  console.log('🎯 Renderizando ActionDropdown para:', usuario.email);\n                  const userRole = usuario.rol || usuario.role;\n                  const isAdmin = userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR';\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [!isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        console.log('✏️ Editar usuario:', usuario.email);\n                        editarModal.openModal('edit', usuario);\n                      },\n                      className: \"text-blue-600 hover:text-blue-800 p-2 rounded-lg hover:bg-blue-50 transition-colors\",\n                      title: \"Editar usuario\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 309,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 301,\n                      columnNumber: 29\n                    }, this), !isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        console.log('🗑️ Eliminar usuario:', usuario.email);\n                        if (window.confirm('¿Estás seguro de que quieres eliminar este usuario?')) {\n                          window.deleteUser && window.deleteUser(usuario.id_usuario || usuario.id);\n                        }\n                      },\n                      className: \"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors\",\n                      title: \"Eliminar usuario\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-trash\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 323,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 313,\n                      columnNumber: 29\n                    }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-gray-500 font-medium px-2 py-1 bg-gray-100 rounded\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-shield-alt mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 328,\n                        columnNumber: 31\n                      }, this), \"Protegido\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 25\n                  }, this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        console.log('👁️ Abriendo modal de solo lectura para:', usuario.email);\n                        verModal.openModal('view', usuario);\n                      },\n                      className: \"text-blue-600 hover:text-blue-800 text-sm font-medium\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-eye mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 344,\n                        columnNumber: 29\n                      }, this), \"Ver Detalles\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 337,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-yellow-600 font-medium\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-lock mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 348,\n                        columnNumber: 29\n                      }, this), \"Solo Lectura\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 347,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 25\n                  }, this);\n                }\n              }\n            }],\n            data: filteredUsuarios,\n            keyExtractor: usuario => usuario.id_usuario || usuario.id,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ViewDetailsModal, {\n      isOpen: verModal.isOpen,\n      onClose: verModal.closeModal,\n      title: \"Detalles del Usuario del sistema\",\n      data: verModal.modalData ? [{\n        label: 'ID',\n        value: verModal.modalData.id_usuario || verModal.modalData.id\n      }, {\n        label: 'Email',\n        value: verModal.modalData.email\n      }, {\n        label: 'Contraseña',\n        value: '••••••••',\n        helperText: 'La contraseña está oculta por seguridad'\n      }, {\n        label: 'Rol',\n        value: (() => {\n          const rol = verModal.modalData.rol || verModal.modalData.role;\n          // Comparación más robusta\n          if (rol === ROLES.ADMINISTRADOR || rol === 'ADMINISTRADOR') {\n            return 'Administrador';\n          }\n          return 'Consulta';\n        })()\n      }, {\n        label: 'Fecha de creación',\n        value: new Date(verModal.modalData.created_at).toLocaleString('es-ES')\n      }, {\n        label: 'Última actualización',\n        value: new Date(verModal.modalData.updated_at).toLocaleString('es-ES')\n      }] : []\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditFormModal, {\n      isOpen: editarModal.isOpen,\n      onClose: editarModal.closeModal,\n      title: \"Editar Usuario del sistema\",\n      onSubmit: async formData => {\n        // Validar email\n        const emailValidation = validateEmail(formData.email);\n        if (!emailValidation.isValid) {\n          throw new Error(emailValidation.error);\n        }\n\n        // Validar rol\n        if (!formData.rol || formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA') {\n          throw new Error('Rol inválido');\n        }\n\n        // Si no se proporciona password, no lo incluimos en la actualización\n        const updateData = {\n          email: formData.email,\n          role: formData.rol // El backend espera 'role', no 'rol'\n        };\n        if (formData.password && formData.password.trim()) {\n          if (formData.password.length < 8) {\n            throw new Error('La contraseña debe tener al menos 8 caracteres');\n          }\n          updateData.password = formData.password;\n        }\n        const result = await dbService.updateUsuario(editarModal.modalData.id_usuario || editarModal.modalData.id, updateData);\n        if (result.error) {\n          throw new Error(result.error.message || 'Error al actualizar usuario');\n        }\n        await loadUsuarios();\n      },\n      initialData: editarModal.modalData ? {\n        email: editarModal.modalData.email,\n        password: '',\n        rol: editarModal.modalData.rol || editarModal.modalData.role\n      } : {\n        email: '',\n        password: '',\n        rol: ROLES.CONSULTA\n      },\n      fields: [{\n        name: 'email',\n        label: 'Email',\n        type: 'email',\n        required: true,\n        placeholder: 'usuario@ejemplo.com'\n      }, {\n        name: 'currentPassword',\n        label: 'Contraseña Actual (solo lectura)',\n        type: 'password',\n        readOnly: true,\n        placeholder: 'Contraseña actual del usuario',\n        value: '••••••••',\n        // Mostrar puntos por seguridad\n        helperText: 'La contraseña actual no se puede ver por seguridad'\n      }, {\n        name: 'password',\n        label: 'Nueva Contraseña (opcional)',\n        type: 'password',\n        placeholder: 'Dejar en blanco para mantener la actual',\n        helperText: 'Mínimo 8 caracteres. Si se deja en blanco, mantiene la contraseña actual.'\n      }, {\n        name: 'rol',\n        label: 'Rol',\n        type: 'select',\n        required: true,\n        options: [{\n          value: ROLES.CONSULTA,\n          label: 'Consulta'\n        }]\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CreateFormModal, {\n      isOpen: crearModal.isOpen,\n      onClose: crearModal.closeModal,\n      title: \"Nuevo Usuario del sistema\",\n      onSubmit: async formData => {\n        // Validar email\n        const emailValidation = validateEmail(formData.email);\n        if (!emailValidation.isValid) {\n          throw new Error(emailValidation.error);\n        }\n\n        // Validar password\n        if (!formData.password || formData.password.length < 8) {\n          throw new Error('La contraseña debe tener al menos 8 caracteres');\n        }\n\n        // Validar rol\n        if (!formData.rol || formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA') {\n          throw new Error('Rol inválido');\n        }\n\n        // Convertir 'rol' a 'role' para el backend\n        const userData = {\n          email: formData.email,\n          password: formData.password,\n          role: formData.rol\n        };\n        const result = await dbService.createUsuario(userData);\n        if (result.error) {\n          throw new Error(result.error.message || 'Error al crear usuario');\n        }\n        await loadUsuarios();\n      },\n      initialData: {\n        email: '',\n        password: '',\n        rol: ROLES.CONSULTA\n      },\n      fields: [{\n        name: 'email',\n        label: 'Email',\n        type: 'email',\n        required: true,\n        placeholder: 'usuario@ejemplo.com'\n      }, {\n        name: 'password',\n        label: 'Contraseña',\n        type: 'password',\n        required: true,\n        placeholder: 'Mínimo 8 caracteres',\n        helperText: 'Mínimo 8 caracteres. La contraseña debe ser segura.'\n      }, {\n        name: 'rol',\n        label: 'Rol',\n        type: 'select',\n        required: true,\n        options: [{\n          value: ROLES.ADMINISTRADOR,\n          label: 'Administrador'\n        }, {\n          value: ROLES.CONSULTA,\n          label: 'Consulta'\n        }]\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n};\n\n// Wrap with React.memo to prevent unnecessary re-renders\n_s(UsuariosComponent, \"VKo5U7YdvqJQK6QX7bZ/BuJRLgM=\", false, function () {\n  return [useFilters, useModal, useModal, useModal];\n});\n_c = UsuariosComponent;\nconst Usuarios = /*#__PURE__*/React.memo(UsuariosComponent);\n_c2 = Usuarios;\nexport default Usuarios;\nvar _c, _c2;\n$RefreshReg$(_c, \"UsuariosComponent\");\n$RefreshReg$(_c2, \"Usuarios\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","DashboardLayout","dbService","ROLES","FilterBar","StatsGrid","DataTable","ViewDetailsModal","EditFormModal","CreateFormModal","useFilters","useModal","validateEmail","jsxDEV","_jsxDEV","UsuariosComponent","_s","usuarios","setUsuarios","loading","setLoading","error","setError","canEdit","setCanEdit","filters","filtros","setFilter","clearFilters","rol","busqueda","verModal","editarModal","crearModal","loadUsuarios","_result$data","console","log","result","getUsuarios","Error","message","usuariosData","Array","isArray","data","length","err","window","deleteUser","userId","deleteUsuario","alert","loadCurrentUser","hasPermission","ADMINISTRADOR","filteredUsuarios","safeUsuarios","filtered","filter","u","role","email","toLowerCase","includes","statsData","title","value","icon","color","subtitle","loadingText","fileName","_jsxFileName","lineNumber","columnNumber","children","className","filterConfig","type","name","label","options","CONSULTA","placeholder","extraActions","onClick","openModal","values","onChange","onClear","showClearButton","stats","columns","gap","key","header","render","usuario","id_usuario","id","userRole","isAdmin","confirm","keyExtractor","isOpen","onClose","closeModal","modalData","helperText","Date","created_at","toLocaleString","updated_at","onSubmit","formData","emailValidation","isValid","updateData","password","trim","updateUsuario","initialData","fields","required","readOnly","userData","createUsuario","_c","Usuarios","memo","_c2","$RefreshReg$"],"sources":["/Users/todoporunalma/Desktop/ol/corporacion_react/src/pages/Dashboard/Usuarios.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService, ROLES } from \"shared/services\";\nimport { FilterBar } from \"components/UI/Filter\";\nimport { StatsGrid } from \"components/UI/Card\";\nimport { DataTable } from \"components/UI/Table\";\nimport { ViewDetailsModal, EditFormModal, CreateFormModal } from \"components/common/CRUDModals\";\nimport { useFilters, useModal } from \"shared/hooks\";\nimport { validateEmail } from \"shared/utils/validationUtils\";\n\nconst UsuariosComponent = () => {\n  const [usuarios, setUsuarios] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [canEdit, setCanEdit] = useState(false);\n\n  // Use custom hooks\n  const { filters: filtros, setFilter, clearFilters } = useFilters({\n    rol: \"Todos\",\n    busqueda: \"\"\n  });\n\n  const verModal = useModal();\n  const editarModal = useModal();\n  const crearModal = useModal();\n\n  // Función para cargar usuarios\n  const loadUsuarios = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('🔄 Cargando usuarios...');\n\n      const result = await dbService.getUsuarios();\n      console.log('📊 Resultado usuarios:', result);\n\n      if (result.error) {\n        throw new Error(result.error.message || 'Error al cargar usuarios');\n      }\n\n      // La respuesta puede ser {data: [...], error: null} o {data: {data: [...]}, error: null}\n      let usuariosData = [];\n      if (Array.isArray(result.data)) {\n        usuariosData = result.data;\n      } else if (Array.isArray(result.data?.data)) {\n        usuariosData = result.data.data;\n      } else {\n        usuariosData = [];\n      }\n\n      setUsuarios(usuariosData);\n      console.log('✅ Usuarios cargados:', usuariosData.length);\n    } catch (err) {\n      console.error('❌ Error cargando usuarios:', err);\n      setError(err.message || 'Error desconocido al cargar usuarios');\n      setUsuarios([]);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Exponer funciones globalmente para el menú desplegable\n  useEffect(() => {\n    window.verModal = verModal;\n    window.editarModal = editarModal;\n    window.deleteUser = async (userId) => {\n      try {\n        const result = await dbService.deleteUsuario(userId);\n        if (result.error) {\n          alert('Error al eliminar usuario: ' + result.error.message);\n        } else {\n          alert('Usuario eliminado exitosamente');\n          await loadUsuarios();\n        }\n      } catch (error) {\n        alert('Error al eliminar usuario: ' + error.message);\n      }\n    };\n\n    return () => {\n      delete window.verModal;\n      delete window.editarModal;\n      delete window.deleteUser;\n    };\n  }, [verModal, editarModal, loadUsuarios]);\n\n  // Cargar usuario actual y verificar permisos\n   useEffect(() => {\n     const loadCurrentUser = async () => {\n       try {\n         console.log('🔐 Verificando permisos de administrador...');\n         // Verificar si tiene permisos de administrador\n         const hasPermission = await dbService.hasPermission(ROLES.ADMINISTRADOR);\n         console.log('✅ Permisos de administrador obtenidos:', hasPermission);\n         setCanEdit(hasPermission);\n         console.log('🎯 canEdit establecido como:', hasPermission);\n       } catch (err) {\n         console.error('❌ Error cargando permisos:', err);\n         setCanEdit(false);\n       }\n     };\n\n     loadCurrentUser();\n     loadUsuarios();\n   }, [loadUsuarios]);\n\n  // Filtrar usuarios\n  const filteredUsuarios = useMemo(() => {\n    const safeUsuarios = Array.isArray(usuarios) ? usuarios : [];\n    let filtered = safeUsuarios;\n\n    if (filtros.rol !== \"Todos\") {\n      filtered = filtered.filter(u => (u.rol || u.role) === filtros.rol);\n    }\n    if (filtros.busqueda) {\n      filtered = filtered.filter(u =>\n        (u.email || '').toLowerCase().includes(filtros.busqueda.toLowerCase())\n      );\n    }\n    return filtered;\n  }, [usuarios, filtros]);\n\n  // Estadísticas\n  const statsData = useMemo(() => [\n    {\n      title: \"Total Usuarios\",\n      value: filteredUsuarios.length,\n      icon: \"fas fa-users\",\n      color: \"blue\"\n    }\n  ], [filteredUsuarios]);\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Usuarios\" subtitle=\"Gestión de usuarios\" loading={true} loadingText=\"Cargando usuarios...\" />\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout title=\"Usuarios\" subtitle=\"Error al cargar datos\" loading={false}>\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-600\">Error loading usuarios del sistema: {error}</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  // Verificar permisos de acceso a la página\n  if (!canEdit) {\n    return (\n      <DashboardLayout title=\"Usuarios\" subtitle=\"Acceso denegado\">\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center max-w-md\">\n            <i className=\"fas fa-lock text-yellow-600 text-5xl mb-4\"></i>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Acceso Denegado</h3>\n            <p className=\"text-gray-600\">No tienes permisos para acceder a esta página. Solo los administradores pueden gestionar usuarios.</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  const filterConfig = [\n    {\n      type: 'select',\n      name: 'rol',\n      label: 'Rol',\n      options: [\n        { value: 'Todos', label: 'Todos los Roles' },\n        { value: ROLES.ADMINISTRADOR, label: 'Administrador' },\n        { value: ROLES.CONSULTA, label: 'Consulta' }\n      ]\n    },\n    {\n      type: 'search',\n      name: 'busqueda',\n      label: 'Búsqueda',\n      placeholder: 'Buscar por email...'\n    }\n  ];\n\n  return (\n    <DashboardLayout\n      title=\"Gestión de Usuarios del sistema\"\n      subtitle=\"Administra los usuarios del sistema\"\n      extraActions={\n        canEdit && (\n          <button\n            onClick={() => crearModal.openModal()}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <i className=\"fas fa-plus mr-2\"></i>\n            Nuevo Usuario\n          </button>\n        )\n      }\n    >\n      <section className=\"px-4 md:px-6 py-4 md:py-6\">\n        <FilterBar\n          filters={filterConfig}\n          values={filtros}\n          onChange={setFilter}\n          onClear={clearFilters}\n          showClearButton={true}\n        />\n\n        {/* Estadísticas Rápidas */}\n        <div className=\"mt-6\">\n          <StatsGrid\n            stats={statsData}\n            columns={3}\n            gap=\"md\"\n          />\n        </div>\n\n        {/* Tabla de Usuarios */}\n        <div className=\"mt-6\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-800\">Lista de Usuarios del sistema</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  Gestiona los usuarios del sistema\n                </p>\n              </div>\n              {canEdit ? (\n                <span className=\"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800\">\n                  <i className=\"fas fa-user-shield mr-2\"></i>\n                  Modo Administrador\n                </span>\n              ) : (\n                <span className=\"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800\">\n                  <i className=\"fas fa-eye mr-2\"></i>\n                  Modo Solo Lectura\n                </span>\n              )}\n            </div>\n          </div>\n\n          {filteredUsuarios.length === 0 ? (\n            <div className=\"p-12 text-center\">\n              <i className=\"fas fa-users text-gray-300 text-4xl mb-4\"></i>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No se encontraron usuarios del sistema</h3>\n              <p className=\"text-gray-500\">No hay usuarios que coincidan con los filtros aplicados.</p>\n            </div>\n          ) : (\n            <DataTable\n              columns={[\n                {\n                  key: 'email',\n                  header: 'Email',\n                  render: (usuario) => (\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3\">\n                        <i className=\"fas fa-user text-blue-600\"></i>\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{usuario.email}</p>\n                        <p className=\"text-sm text-gray-500\">ID: {usuario.id_usuario || usuario.id}</p>\n                      </div>\n                    </div>\n                  )\n                },\n                {\n                  key: 'rol',\n                  header: 'Rol',\n                  render: (usuario) => {\n                    const userRole = usuario.rol || usuario.role;\n                    return (\n                      <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${\n                        userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR'\n                          ? 'bg-purple-100 text-purple-800'\n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        <i className={`fas ${\n                          userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'fa-user-shield' : 'fa-user'\n                        } mr-2`}></i>\n                        {userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'Administrador' : 'Consulta'}\n                      </span>\n                    );\n                  }\n                },\n                {\n                  key: 'acciones',\n                  header: 'Acciones',\n                  render: (usuario) => {\n                    console.log('🔍 Renderizando acciones para usuario:', usuario.email, 'canEdit:', canEdit);\n\n                    if (canEdit) {\n                      console.log('🎯 Renderizando ActionDropdown para:', usuario.email);\n                      const userRole = usuario.rol || usuario.role;\n                      const isAdmin = userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR';\n\n                      return (\n                        <div className=\"flex items-center space-x-2\">\n                          {!isAdmin && (\n                            <button\n                              onClick={() => {\n                                console.log('✏️ Editar usuario:', usuario.email);\n                                editarModal.openModal('edit', usuario);\n                              }}\n                              className=\"text-blue-600 hover:text-blue-800 p-2 rounded-lg hover:bg-blue-50 transition-colors\"\n                              title=\"Editar usuario\"\n                            >\n                              <i className=\"fas fa-edit\"></i>\n                            </button>\n                          )}\n                          {!isAdmin && (\n                            <button\n                              onClick={() => {\n                                console.log('🗑️ Eliminar usuario:', usuario.email);\n                                if (window.confirm('¿Estás seguro de que quieres eliminar este usuario?')) {\n                                  window.deleteUser && window.deleteUser(usuario.id_usuario || usuario.id);\n                                }\n                              }}\n                              className=\"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors\"\n                              title=\"Eliminar usuario\"\n                            >\n                              <i className=\"fas fa-trash\"></i>\n                            </button>\n                          )}\n                          {isAdmin && (\n                            <span className=\"text-xs text-gray-500 font-medium px-2 py-1 bg-gray-100 rounded\">\n                              <i className=\"fas fa-shield-alt mr-1\"></i>\n                              Protegido\n                            </span>\n                          )}\n                        </div>\n                      );\n                    } else {\n                      return (\n                        <div className=\"flex items-center space-x-2\">\n                          <button\n                            onClick={() => {\n                              console.log('👁️ Abriendo modal de solo lectura para:', usuario.email);\n                              verModal.openModal('view', usuario);\n                            }}\n                            className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                          >\n                            <i className=\"fas fa-eye mr-1\"></i>\n                            Ver Detalles\n                          </button>\n                          <span className=\"text-xs text-yellow-600 font-medium\">\n                            <i className=\"fas fa-lock mr-1\"></i>\n                            Solo Lectura\n                          </span>\n                        </div>\n                      );\n                    }\n                  }\n                }\n              ]}\n              data={filteredUsuarios}\n              keyExtractor={(usuario) => usuario.id_usuario || usuario.id}\n              loading={loading}\n            />\n          )}\n        </div>\n        </div>\n      </section>\n\n      {/* Modales */}\n      <ViewDetailsModal\n        isOpen={verModal.isOpen}\n        onClose={verModal.closeModal}\n        title=\"Detalles del Usuario del sistema\"\n        data={verModal.modalData ? [\n          { label: 'ID', value: verModal.modalData.id_usuario || verModal.modalData.id },\n          { label: 'Email', value: verModal.modalData.email },\n          {\n            label: 'Contraseña',\n            value: '••••••••',\n            helperText: 'La contraseña está oculta por seguridad'\n          },\n          {\n            label: 'Rol',\n            value: (() => {\n              const rol = verModal.modalData.rol || verModal.modalData.role;\n              // Comparación más robusta\n              if (rol === ROLES.ADMINISTRADOR || rol === 'ADMINISTRADOR') {\n                return 'Administrador';\n              }\n              return 'Consulta';\n            })()\n          },\n          {\n            label: 'Fecha de creación',\n            value: new Date(verModal.modalData.created_at).toLocaleString('es-ES')\n          },\n          {\n            label: 'Última actualización',\n            value: new Date(verModal.modalData.updated_at).toLocaleString('es-ES')\n          }\n        ] : []}\n      />\n\n      <EditFormModal\n        isOpen={editarModal.isOpen}\n        onClose={editarModal.closeModal}\n        title=\"Editar Usuario del sistema\"\n        onSubmit={async (formData) => {\n          // Validar email\n          const emailValidation = validateEmail(formData.email);\n          if (!emailValidation.isValid) {\n            throw new Error(emailValidation.error);\n          }\n\n          // Validar rol\n          if (!formData.rol || (formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA')) {\n            throw new Error('Rol inválido');\n          }\n\n          // Si no se proporciona password, no lo incluimos en la actualización\n          const updateData = {\n            email: formData.email,\n            role: formData.rol // El backend espera 'role', no 'rol'\n          };\n\n          if (formData.password && formData.password.trim()) {\n            if (formData.password.length < 8) {\n              throw new Error('La contraseña debe tener al menos 8 caracteres');\n            }\n            updateData.password = formData.password;\n          }\n\n          const result = await dbService.updateUsuario(editarModal.modalData.id_usuario || editarModal.modalData.id, updateData);\n          if (result.error) {\n            throw new Error(result.error.message || 'Error al actualizar usuario');\n          }\n          await loadUsuarios();\n        }}\n        initialData={editarModal.modalData ? {\n          email: editarModal.modalData.email,\n          password: '',\n          rol: editarModal.modalData.rol || editarModal.modalData.role\n        } : {\n          email: '',\n          password: '',\n          rol: ROLES.CONSULTA\n        }}\n        fields={[\n          {\n            name: 'email',\n            label: 'Email',\n            type: 'email',\n            required: true,\n            placeholder: 'usuario@ejemplo.com'\n          },\n          {\n            name: 'currentPassword',\n            label: 'Contraseña Actual (solo lectura)',\n            type: 'password',\n            readOnly: true,\n            placeholder: 'Contraseña actual del usuario',\n            value: '••••••••', // Mostrar puntos por seguridad\n            helperText: 'La contraseña actual no se puede ver por seguridad'\n          },\n          {\n            name: 'password',\n            label: 'Nueva Contraseña (opcional)',\n            type: 'password',\n            placeholder: 'Dejar en blanco para mantener la actual',\n            helperText: 'Mínimo 8 caracteres. Si se deja en blanco, mantiene la contraseña actual.'\n          },\n          {\n            name: 'rol',\n            label: 'Rol',\n            type: 'select',\n            required: true,\n            options: [\n              { value: ROLES.CONSULTA, label: 'Consulta' }\n            ]\n          }\n        ]}\n      />\n\n      <CreateFormModal\n        isOpen={crearModal.isOpen}\n        onClose={crearModal.closeModal}\n        title=\"Nuevo Usuario del sistema\"\n        onSubmit={async (formData) => {\n          // Validar email\n          const emailValidation = validateEmail(formData.email);\n          if (!emailValidation.isValid) {\n            throw new Error(emailValidation.error);\n          }\n\n          // Validar password\n          if (!formData.password || formData.password.length < 8) {\n            throw new Error('La contraseña debe tener al menos 8 caracteres');\n          }\n\n          // Validar rol\n          if (!formData.rol || (formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA')) {\n            throw new Error('Rol inválido');\n          }\n\n          // Convertir 'rol' a 'role' para el backend\n          const userData = {\n            email: formData.email,\n            password: formData.password,\n            role: formData.rol\n          };\n\n          const result = await dbService.createUsuario(userData);\n          if (result.error) {\n            throw new Error(result.error.message || 'Error al crear usuario');\n          }\n          await loadUsuarios();\n        }}\n        initialData={{\n          email: '',\n          password: '',\n          rol: ROLES.CONSULTA\n        }}\n        fields={[\n          {\n            name: 'email',\n            label: 'Email',\n            type: 'email',\n            required: true,\n            placeholder: 'usuario@ejemplo.com'\n          },\n          {\n            name: 'password',\n            label: 'Contraseña',\n            type: 'password',\n            required: true,\n            placeholder: 'Mínimo 8 caracteres',\n            helperText: 'Mínimo 8 caracteres. La contraseña debe ser segura.'\n          },\n          {\n            name: 'rol',\n            label: 'Rol',\n            type: 'select',\n            required: true,\n            options: [\n              { value: ROLES.ADMINISTRADOR, label: 'Administrador' },\n              { value: ROLES.CONSULTA, label: 'Consulta' }\n            ]\n          }\n        ]}\n      />\n    </DashboardLayout>\n  );\n};\n\n// Wrap with React.memo to prevent unnecessary re-renders\nconst Usuarios = React.memo(UsuariosComponent);\n\nexport default Usuarios;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}