{"ast":null,"code":"import React,{useState,useEffect,useMemo,useCallback}from\"react\";import DashboardLayout from\"components/layout/DashboardLayout\";import{dbService}from\"shared/services\";import{FilterBar,StatsGrid,DataTable,ActionDropdown,StatusToggle,FormInput,FormSelect,FormGroup}from\"components/UI\";import{ViewDetailsModal,EditFormModal,CreateFormModal}from\"components/common\";import{useFilters,useModal}from\"shared/hooks\";import{validateParticipanteDocumentoUnico,validateFechaNacimiento,validateFechaIngreso,validateSedeExists}from\"shared/utils/validationUtils\";// import jsPDF from 'jspdf'; // Temporarily disabled - not available in Docker dev\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Participantes=/*#__PURE__*/React.memo(()=>{const[participantes,setParticipantes]=useState([]);// Asegurar que siempre sea array\nconst[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Use the useFilters hook for filter state management\nconst{filters:filtros,setFilter,clearFilters}=useFilters({sede:\"Todas\",genero:\"Todos\",estado:\"Todos\",busqueda:\"\"});// Use the useModal hook for modal state management\nconst viewModal=useModal();const editModal=useModal();const createModal=useModal();// Funci√≥n para cargar participantes (usando useCallback para evitar re-renders)\nconst loadParticipantes=useCallback(async()=>{try{setLoading(true);setError(null);console.log('üîÑ Cargando participantes...');const result=await dbService.getParticipantes();console.log('üìä Resultado participantes:',result);console.log('üì¶ result.data:',result.data);console.log('üì¶ result.data type:',typeof result.data);console.log('üì¶ result.data isArray:',Array.isArray(result.data));if(result.error){throw new Error(result.error.message||'Error al cargar participantes');}// The API returns {data: [...], error: null}, so result.data is already the array\nconst participantesData=Array.isArray(result.data)?result.data:[];console.log('üîÑ participantesData:',participantesData);console.log('üîÑ participantesData.length:',participantesData.length);setParticipantes(participantesData);console.log('‚úÖ Participantes cargados:',participantesData.length);}catch(err){console.error('‚ùå Error cargando participantes:',err);setError(err.message||'Error desconocido al cargar participantes');setParticipantes([]);// Asegurar que no quede undefined\n}finally{setLoading(false);}},[]);useEffect(()=>{loadParticipantes();},[loadParticipantes]);// Funciones para manejar modales (memoized)\nconst abrirModal=useCallback((tipo,participante)=>{if(tipo==='ver'){viewModal.openModal(null,participante);}else if(tipo==='editar'){editModal.openModal(null,participante);}else if(tipo==='crear'){createModal.openModal();}},[viewModal,editModal,createModal]);const filteredParticipantes=useMemo(()=>{// Asegurar que participantes siempre sea un array\nconst safeParticipantes=Array.isArray(participantes)?participantes:[];let filtered=safeParticipantes;if(filtros.sede!==\"Todas\"){filtered=filtered.filter(p=>{var _p$sede;const sedeNombre=((_p$sede=p.sede)===null||_p$sede===void 0?void 0:_p$sede.direccion)||p.sede||'';return sedeNombre.toLowerCase().includes(filtros.sede.toLowerCase());});}if(filtros.genero!==\"Todos\"){filtered=filtered.filter(p=>p.genero===filtros.genero);}if(filtros.estado!==\"Todos\"){// Support both ACTIVO/INACTIVO and Activo/Inactivo\nconst estadoUpper=filtros.estado.toUpperCase();filtered=filtered.filter(p=>p.estado===filtros.estado||p.estado===estadoUpper||filtros.estado==='Activo'&&p.estado==='ACTIVO'||filtros.estado==='Inactivo'&&p.estado==='INACTIVO');}if(filtros.busqueda){const searchLower=filtros.busqueda.toLowerCase();filtered=filtered.filter(p=>{const documento=(p.numero_documento||'').toLowerCase();return documento.includes(searchLower);});}return filtered;},[participantes,filtros]);const toggleEstado=useCallback(async(id,newEstado)=>{try{await dbService.updateParticipante(id,{estado:newEstado});// Refresh data\nconst{data}=await dbService.getParticipantes();setParticipantes(data||[]);}catch(err){console.error('Error updating status:',err);}},[]);const handleActionClick=useCallback((action,participante)=>{switch(action){case'ver':abrirModal('ver',participante);break;case'editar':abrirModal('editar',participante);break;default:// No action\nbreak;}},[abrirModal]);const handleExportPDF=useCallback(()=>{// Create a new window for printing\nconst printWindow=window.open('','_blank');const currentDate=new Date().toLocaleDateString('es-ES');// Generate HTML content for PDF\nconst htmlContent=\"\\n      <!DOCTYPE html>\\n      <html>\\n        <head>\\n          <title>Lista de Participantes - \".concat(currentDate,\"</title>\\n          <style>\\n            body {\\n              font-family: Arial, sans-serif;\\n              margin: 20px;\\n              color: #333;\\n            }\\n            .header {\\n              text-align: center;\\n              margin-bottom: 30px;\\n              border-bottom: 2px solid #333;\\n              padding-bottom: 20px;\\n            }\\n            .header h1 {\\n              color: #2563eb;\\n              margin: 0;\\n              font-size: 24px;\\n            }\\n            .filters {\\n              margin-bottom: 20px;\\n              background: #f8f9fa;\\n              padding: 15px;\\n              border-radius: 5px;\\n            }\\n            .filters h3 {\\n              margin: 0 0 10px 0;\\n              color: #495057;\\n            }\\n            .filters p {\\n              margin: 5px 0;\\n              font-size: 14px;\\n            }\\n            table {\\n              width: 100%;\\n              border-collapse: collapse;\\n              margin-top: 20px;\\n            }\\n            th, td {\\n              border: 1px solid #ddd;\\n              padding: 8px 12px;\\n              text-align: left;\\n            }\\n            th {\\n              background-color: #f8f9fa;\\n              font-weight: bold;\\n              color: #495057;\\n            }\\n            tr:nth-child(even) {\\n              background-color: #f9f9f9;\\n            }\\n            .stats {\\n              margin-top: 30px;\\n              background: #e3f2fd;\\n              padding: 15px;\\n              border-radius: 5px;\\n            }\\n            .stats h3 {\\n              margin: 0 0 10px 0;\\n              color: #1976d2;\\n            }\\n            .stats p {\\n              margin: 5px 0;\\n              font-size: 14px;\\n            }\\n            @media print {\\n              body { margin: 0; }\\n              .no-print { display: none; }\\n            }\\n          </style>\\n        </head>\\n        <body>\\n          <div class=\\\"header\\\">\\n            <h1>Lista de Participantes</h1>\\n            <p>Corporaci\\xF3n Todo por un Alma</p>\\n            <p>Fecha de generaci\\xF3n: \").concat(currentDate,\"</p>\\n          </div>\\n\\n          <div class=\\\"filters\\\">\\n            <h3>Filtros aplicados:</h3>\\n            <p><strong>Sede:</strong> \").concat(filtros.sede==='Todas'?'Todas las sedes':filtros.sede,\"</p>\\n            <p><strong>G\\xE9nero:</strong> \").concat(filtros.genero==='Todos'?'Todos los g√©neros':filtros.genero,\"</p>\\n            <p><strong>Estado:</strong> \").concat(filtros.estado==='Todos'?'Todos los estados':filtros.estado,\"</p>\\n            \").concat(filtros.busqueda?\"<p><strong>B\\xFAsqueda:</strong> \\\"\".concat(filtros.busqueda,\"\\\"</p>\"):'',\"\\n          </div>\\n\\n          <table>\\n            <thead>\\n              <tr>\\n                <th>Nombre</th>\\n                <th>Edad</th>\\n                <th>G\\xE9nero</th>\\n                <th>Tel\\xE9fono</th>\\n                <th>Sede</th>\\n                <th>Estado</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              \").concat(filteredParticipantes.map(participante=>\"\\n                <tr>\\n                  <td>\".concat(participante.nombre||'N/A',\"</td>\\n                  <td>\").concat(participante.edad||'N/A',\"</td>\\n                  <td>\").concat(participante.genero||'N/A',\"</td>\\n                  <td>\").concat(participante.telefono||'N/A',\"</td>\\n                  <td>\").concat(participante.sede||'N/A',\"</td>\\n                  <td>\").concat(participante.estado||'N/A',\"</td>\\n                </tr>\\n              \")).join(''),\"\\n            </tbody>\\n          </table>\\n\\n          <div class=\\\"stats\\\">\\n            <h3>Estad\\xEDsticas:</h3>\\n            <p><strong>Total de participantes:</strong> \").concat(filteredParticipantes.length,\"</p>\\n            <p><strong>Activos:</strong> \").concat(filteredParticipantes.filter(p=>p.estado==='Activo').length,\"</p>\\n            <p><strong>Inactivos:</strong> \").concat(filteredParticipantes.filter(p=>p.estado==='Inactivo').length,\"</p>\\n          </div>\\n\\n          <script>\\n            window.onload = function() {\\n              window.print();\\n              setTimeout(function() {\\n                window.close();\\n              }, 1000);\\n            }\\n          </script>\\n        </body>\\n      </html>\\n    \");printWindow.document.write(htmlContent);printWindow.document.close();},[filtros,filteredParticipantes]);if(loading){return/*#__PURE__*/_jsx(DashboardLayout,{title:\"Participantes\",subtitle:\"Gesti\\xF3n de participantes\",loading:true,loadingText:\"Cargando participantes...\"});}if(error){return/*#__PURE__*/_jsx(DashboardLayout,{title:\"Participantes\",subtitle:\"Error al cargar datos\",loading:false,children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-600\",children:[\"Error loading participants: \",error]})})})});}return/*#__PURE__*/_jsxs(DashboardLayout,{title:\"Gesti\\xF3n de Participantes\",subtitle:\"Administra los participantes de la fundaci\\xF3n\",extraActions:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleExportPDF(),className:\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors\",title:\"Exportar lista filtrada a PDF\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-pdf mr-2\"}),\"Exportar PDF\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>abrirModal('crear',null),className:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-2\"}),\"Nuevo Participante\"]})]}),children:[/*#__PURE__*/_jsxs(\"section\",{className:\"px-6 py-6\",children:[/*#__PURE__*/_jsx(FilterBar,{filters:[{type:'select',name:'sede',label:'Sede',options:[{value:'Todas',label:'Todas las Sedes'},{value:'Bello Principal',label:'Bello Principal'},{value:'Bello Campestre',label:'Bello Campestre'},{value:'Apartad√≥',label:'Apartad√≥'}]},{type:'select',name:'genero',label:'G√©nero',options:[{value:'Todos',label:'Todos los G√©neros'},{value:'MASCULINO',label:'Masculino'},{value:'FEMENINO',label:'Femenino'}]},{type:'select',name:'estado',label:'Estado',options:[{value:'Todos',label:'Todos los Estados'},{value:'Activo',label:'Activo'},{value:'Inactivo',label:'Inactivo'}]},{type:'search',name:'busqueda',label:'B√∫squeda por Documento',placeholder:'N√∫mero de documento...',debounceMs:300}],values:filtros,onChange:setFilter,onClear:clearFilters,showClearButton:true}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(StatsGrid,{stats:[{title:'Total Participantes',value:filteredParticipantes.length,icon:'fas fa-users',color:'blue'},{title:'Activos',value:filteredParticipantes.filter(p=>p.estado===\"ACTIVO\"||p.estado===\"Activo\").length,icon:'fas fa-user-check',color:'green'},{title:'Inactivos',value:filteredParticipantes.filter(p=>p.estado===\"INACTIVO\"||p.estado===\"Inactivo\").length,icon:'fas fa-user-times',color:'red'}],columns:3,gap:\"md\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:\"Lista de Participantes\"})}),/*#__PURE__*/_jsx(DataTable,{data:filteredParticipantes,keyExtractor:row=>row.id||row.id_participante,columns:[{key:'participante',header:'Participante',render:row=>{const nombreCompleto=row.nombres&&row.apellidos?\"\".concat(row.nombres,\" \").concat(row.apellidos):row.nombre||'N/A';const tipoDoc=row.tipo_documento||'N/A';const numDoc=row.numero_documento||'N/A';return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:nombreCompleto}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[tipoDoc,\" \",numDoc]})]})]});}},{key:'edad',header:'Edad',render:row=>{if(row.fecha_nacimiento){const birthDate=new Date(row.fecha_nacimiento);const today=new Date();let age=today.getFullYear()-birthDate.getFullYear();const monthDiff=today.getMonth()-birthDate.getMonth();if(monthDiff<0||monthDiff===0&&today.getDate()<birthDate.getDate()){age--;}return\"\".concat(age,\" a\\xF1os\");}return row.edad?\"\".concat(row.edad,\" a\\xF1os\"):'N/A';}},{key:'genero',header:'G√©nero',render:row=>row.genero==='MASCULINO'?'Masculino':row.genero==='FEMENINO'?'Femenino':'N/A'},{key:'fecha_ingreso',header:'Fecha Ingreso',render:row=>{if(row.fecha_ingreso){return new Date(row.fecha_ingreso).toLocaleDateString('es-ES');}return'N/A';}},{key:'sede',header:'Sede',render:row=>{var _row$sede;return((_row$sede=row.sede)===null||_row$sede===void 0?void 0:_row$sede.direccion)||row.sede||'N/A';}},{key:'estado',header:'Estado',render:row=>/*#__PURE__*/_jsx(StatusToggle,{currentStatus:row.estado,statuses:[{value:'ACTIVO',label:'Activo',variant:'success'},{value:'Activo',label:'Activo',variant:'success'},{value:'INACTIVO',label:'Inactivo',variant:'danger'},{value:'Inactivo',label:'Inactivo',variant:'danger'}],onChange:newEstado=>toggleEstado(row.id||row.id_participante,newEstado)})},{key:'acciones',header:'Acciones',render:row=>/*#__PURE__*/_jsx(ActionDropdown,{actions:[{label:'Ver detalles',icon:'fas fa-eye',onClick:()=>handleActionClick('ver',row)},{label:'Editar',icon:'fas fa-edit',onClick:()=>handleActionClick('editar',row)}]})}],loading:loading})]})})]}),/*#__PURE__*/_jsx(ParticipanteViewModal,{isOpen:viewModal.isOpen,onClose:viewModal.closeModal,participante:viewModal.modalData,onCrearAcudiente:()=>{// TODO: Open acudiente creation modal with participante pre-selected\nconsole.log('Crear acudiente para participante:',viewModal.modalData);}}),/*#__PURE__*/_jsx(ParticipanteEditModal,{isOpen:editModal.isOpen,onClose:editModal.closeModal,participante:editModal.modalData,onActualizar:loadParticipantes}),/*#__PURE__*/_jsx(ParticipanteCreateModal,{isOpen:createModal.isOpen,onClose:createModal.closeModal,onCrear:loadParticipantes})]});});// View Modal Component with Acudientes\nconst ParticipanteViewModal=_ref=>{var _participante$sede;let{isOpen,onClose,participante,onCrearAcudiente}=_ref;const[acudientes,setAcudientes]=useState([]);const[loadingAcudientes,setLoadingAcudientes]=useState(false);const loadAcudientes=useCallback(async()=>{if(!(participante!==null&&participante!==void 0&&participante.id)&&!(participante!==null&&participante!==void 0&&participante.id_participante))return;try{setLoadingAcudientes(true);const participanteId=participante.id||participante.id_participante;const result=await dbService.getAcudientesByParticipante(participanteId);if(result.data&&Array.isArray(result.data)){setAcudientes(result.data);}else{setAcudientes([]);}}catch(err){console.error('Error loading acudientes:',err);setAcudientes([]);}finally{setLoadingAcudientes(false);}},[participante]);useEffect(()=>{if(isOpen&&participante){loadAcudientes();}},[isOpen,participante,loadAcudientes]);if(!participante)return null;const nombreCompleto=participante.nombres&&participante.apellidos?\"\".concat(participante.nombres,\" \").concat(participante.apellidos):participante.nombre||'N/A';const edad=(()=>{if(participante.fecha_nacimiento){const birthDate=new Date(participante.fecha_nacimiento);const today=new Date();let age=today.getFullYear()-birthDate.getFullYear();const monthDiff=today.getMonth()-birthDate.getMonth();if(monthDiff<0||monthDiff===0&&today.getDate()<birthDate.getDate()){age--;}return age;}return participante.edad||'N/A';})();const estadoLabel=participante.estado==='ACTIVO'||participante.estado==='Activo'?'Activo':'Inactivo';const estadoClass=participante.estado==='ACTIVO'||participante.estado==='Activo'?'bg-green-100 text-green-800':'bg-red-100 text-red-800';return/*#__PURE__*/_jsx(ViewDetailsModal,{isOpen:isOpen,onClose:onClose,title:\"Detalles del Participante\",data:[{label:'Nombre Completo',value:nombreCompleto},{label:'Tipo de Documento',value:participante.tipo_documento||'N/A'},{label:'N√∫mero de Documento',value:participante.numero_documento||'N/A'},{label:'Edad',value:typeof edad==='number'?\"\".concat(edad,\" a\\xF1os\"):edad},{label:'Fecha de Nacimiento',value:participante.fecha_nacimiento?new Date(participante.fecha_nacimiento).toLocaleDateString('es-ES'):'N/A'},{label:'G√©nero',value:participante.genero==='MASCULINO'?'Masculino':participante.genero==='FEMENINO'?'Femenino':'N/A'},{label:'Fecha de Ingreso',value:participante.fecha_ingreso?new Date(participante.fecha_ingreso).toLocaleDateString('es-ES'):'N/A'},{label:'Sede',value:((_participante$sede=participante.sede)===null||_participante$sede===void 0?void 0:_participante$sede.direccion)||participante.sede||'N/A'},{label:'Tel√©fono',value:participante.telefono||'N/A'},{label:'Estado',value:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-3 py-1 text-sm font-semibold rounded-full \".concat(estadoClass),children:estadoLabel})},{label:'Acudientes',value:/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:loadingAcudientes?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Cargando acudientes...\"}):acudientes.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[acudientes.map((acudiente,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded-lg border border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[acudiente.nombres,\" \",acudiente.apellidos]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[acudiente.parentesco,\" \\u2022 \",acudiente.tipo_documento,\" \",acudiente.numero_documento]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-phone mr-1\"}),acudiente.telefono,acudiente.email&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope mr-1\"}),acudiente.email]})]})]})})},acudiente.id_acudiente||index)),/*#__PURE__*/_jsxs(\"button\",{onClick:onCrearAcudiente,className:\"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-1\"}),\"Agregar otro acudiente\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-2\",children:\"No hay acudientes registrados\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onCrearAcudiente,className:\"text-sm text-blue-600 hover:text-blue-700 font-medium\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus mr-1\"}),\"Agregar acudiente\"]})]})})}]});};// Edit Modal Component\nconst ParticipanteEditModal=_ref2=>{var _participante$nombre,_participante$nombre2;let{isOpen,onClose,participante,onActualizar}=_ref2;if(!participante)return null;const handleSubmit=async formData=>{var _formData$nombres,_formData$apellidos;console.log('üîÑ Actualizando participante:',formData);// Validate required fields\nif(!formData.tipo_documento||!formData.numero_documento){throw new Error('Tipo y n√∫mero de documento son requeridos');}if(!((_formData$nombres=formData.nombres)!==null&&_formData$nombres!==void 0&&_formData$nombres.trim())||!((_formData$apellidos=formData.apellidos)!==null&&_formData$apellidos!==void 0&&_formData$apellidos.trim())){throw new Error('Nombres y apellidos son requeridos');}if(!formData.fecha_nacimiento||!formData.fecha_ingreso){throw new Error('Fechas de nacimiento e ingreso son requeridas');}if(!formData.id_sede){throw new Error('Debe seleccionar una sede');}// Validate fecha_nacimiento format and value\nconst fechaNacimientoValidation=validateFechaNacimiento(formData.fecha_nacimiento);if(!fechaNacimientoValidation.isValid){throw new Error(fechaNacimientoValidation.error);}// Validate fecha_ingreso format and value\nconst fechaIngresoValidation=validateFechaIngreso(formData.fecha_ingreso);if(!fechaIngresoValidation.isValid){throw new Error(fechaIngresoValidation.error);}// Validate documento √∫nico\nconst participanteId=participante.id||participante.id_participante;const documentoValidation=await validateParticipanteDocumentoUnico(formData.numero_documento,participanteId);if(!documentoValidation.isValid){throw new Error(documentoValidation.error);}// Validate sede exists\nconst sedeValidation=await validateSedeExists(formData.id_sede);if(!sedeValidation.isValid){throw new Error(sedeValidation.error);}const result=await dbService.updateParticipante(participanteId,formData);if(result.error){throw new Error(result.error.message||'Error al actualizar participante');}console.log('‚úÖ Participante actualizado exitosamente');onActualizar();};return/*#__PURE__*/_jsx(EditFormModal,{isOpen:isOpen,onClose:onClose,title:\"Editar Participante\",initialData:{tipo_documento:participante.tipo_documento||'CC',numero_documento:participante.numero_documento||'',nombres:participante.nombres||((_participante$nombre=participante.nombre)===null||_participante$nombre===void 0?void 0:_participante$nombre.split(' ')[0])||'',apellidos:participante.apellidos||((_participante$nombre2=participante.nombre)===null||_participante$nombre2===void 0?void 0:_participante$nombre2.split(' ').slice(1).join(' '))||'',fecha_nacimiento:participante.fecha_nacimiento||'',genero:participante.genero||'MASCULINO',fecha_ingreso:participante.fecha_ingreso||'',estado:participante.estado||'ACTIVO',id_sede:participante.id_sede||participante.sede_id||''},onSubmit:handleSubmit,submitLabel:\"Guardar Cambios\",children:_ref3=>{let{formData,handleChange,errors}=_ref3;return/*#__PURE__*/_jsx(ParticipanteForm,{formData:formData,handleChange:handleChange,errors:errors});}});};// Create Modal Component\nconst ParticipanteCreateModal=_ref4=>{let{isOpen,onClose,onCrear}=_ref4;const handleSubmit=async formData=>{var _formData$nombres2,_formData$apellidos2;console.log('üîÑ Creando participante:',formData);// Validate required fields\nif(!formData.tipo_documento||!formData.numero_documento){throw new Error('Tipo y n√∫mero de documento son requeridos');}if(!((_formData$nombres2=formData.nombres)!==null&&_formData$nombres2!==void 0&&_formData$nombres2.trim())||!((_formData$apellidos2=formData.apellidos)!==null&&_formData$apellidos2!==void 0&&_formData$apellidos2.trim())){throw new Error('Nombres y apellidos son requeridos');}if(!formData.fecha_nacimiento||!formData.fecha_ingreso){throw new Error('Fechas de nacimiento e ingreso son requeridas');}if(!formData.id_sede){throw new Error('Debe seleccionar una sede');}// Validate fecha_nacimiento format and value\nconst fechaNacimientoValidation=validateFechaNacimiento(formData.fecha_nacimiento);if(!fechaNacimientoValidation.isValid){throw new Error(fechaNacimientoValidation.error);}// Validate fecha_ingreso format and value\nconst fechaIngresoValidation=validateFechaIngreso(formData.fecha_ingreso);if(!fechaIngresoValidation.isValid){throw new Error(fechaIngresoValidation.error);}// Validate documento √∫nico\nconst documentoValidation=await validateParticipanteDocumentoUnico(formData.numero_documento);if(!documentoValidation.isValid){throw new Error(documentoValidation.error);}// Validate sede exists\nconst sedeValidation=await validateSedeExists(formData.id_sede);if(!sedeValidation.isValid){throw new Error(sedeValidation.error);}const result=await dbService.createParticipante(formData);if(result.error){throw new Error(result.error.message||'Error al crear participante');}console.log('‚úÖ Participante creado exitosamente');onCrear();};return/*#__PURE__*/_jsx(CreateFormModal,{isOpen:isOpen,onClose:onClose,title:\"Nuevo Participante\",defaultValues:{tipo_documento:'CC',numero_documento:'',nombres:'',apellidos:'',fecha_nacimiento:'',genero:'MASCULINO',fecha_ingreso:'',estado:'ACTIVO',id_sede:''},onSubmit:handleSubmit,submitLabel:\"Crear Participante\",children:_ref5=>{let{formData,handleChange,errors}=_ref5;return/*#__PURE__*/_jsx(ParticipanteForm,{formData:formData,handleChange:handleChange,errors:errors});}});};// Shared Form Component using reusable Form components\nconst ParticipanteForm=_ref6=>{let{formData,handleChange,errors}=_ref6;const[sedes,setSedes]=useState([]);const[loadingSedes,setLoadingSedes]=useState(true);useEffect(()=>{const loadSedes=async()=>{try{setLoadingSedes(true);const result=await dbService.getSedes();if(result.data&&Array.isArray(result.data)){setSedes(result.data);}}catch(err){console.error('Error loading sedes:',err);}finally{setLoadingSedes(false);}};loadSedes();},[]);return/*#__PURE__*/_jsxs(FormGroup,{columns:2,gap:\"md\",children:[/*#__PURE__*/_jsx(FormSelect,{label:\"Tipo de Documento\",name:\"tipo_documento\",value:formData.tipo_documento,onChange:value=>handleChange('tipo_documento',value),options:[{value:'CC',label:'C√©dula de Ciudadan√≠a'},{value:'TI',label:'Tarjeta de Identidad'},{value:'CE',label:'C√©dula de Extranjer√≠a'},{value:'PASAPORTE',label:'Pasaporte'}],error:errors===null||errors===void 0?void 0:errors.tipo_documento,required:true}),/*#__PURE__*/_jsx(FormInput,{label:\"N\\xFAmero de Documento\",name:\"numero_documento\",type:\"text\",value:formData.numero_documento,onChange:value=>handleChange('numero_documento',value),error:errors===null||errors===void 0?void 0:errors.numero_documento,required:true,placeholder:\"Ingrese el n\\xFAmero de documento\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Nombres\",name:\"nombres\",type:\"text\",value:formData.nombres,onChange:value=>handleChange('nombres',value),error:errors===null||errors===void 0?void 0:errors.nombres,required:true,placeholder:\"Ingrese los nombres\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Apellidos\",name:\"apellidos\",type:\"text\",value:formData.apellidos,onChange:value=>handleChange('apellidos',value),error:errors===null||errors===void 0?void 0:errors.apellidos,required:true,placeholder:\"Ingrese los apellidos\"}),/*#__PURE__*/_jsx(FormInput,{label:\"Fecha de Nacimiento\",name:\"fecha_nacimiento\",type:\"date\",value:formData.fecha_nacimiento,onChange:value=>handleChange('fecha_nacimiento',value),error:errors===null||errors===void 0?void 0:errors.fecha_nacimiento,required:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"G\\xE9nero\",name:\"genero\",value:formData.genero,onChange:value=>handleChange('genero',value),options:[{value:'MASCULINO',label:'Masculino'},{value:'FEMENINO',label:'Femenino'}],error:errors===null||errors===void 0?void 0:errors.genero,required:true}),/*#__PURE__*/_jsx(FormInput,{label:\"Fecha de Ingreso\",name:\"fecha_ingreso\",type:\"date\",value:formData.fecha_ingreso,onChange:value=>handleChange('fecha_ingreso',value),error:errors===null||errors===void 0?void 0:errors.fecha_ingreso,required:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"Estado\",name:\"estado\",value:formData.estado,onChange:value=>handleChange('estado',value),options:[{value:'ACTIVO',label:'Activo'},{value:'INACTIVO',label:'Inactivo'}],error:errors===null||errors===void 0?void 0:errors.estado,required:true}),/*#__PURE__*/_jsx(FormSelect,{label:\"Sede\",name:\"id_sede\",value:formData.id_sede,onChange:value=>handleChange('id_sede',value),options:loadingSedes?[{value:'',label:'Cargando sedes...'}]:sedes.map(sede=>({value:sede.id_sede||sede.id,label:sede.direccion||sede.nombre})),error:errors===null||errors===void 0?void 0:errors.id_sede,required:true,disabled:loadingSedes})]});};export default Participantes;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","DashboardLayout","dbService","FilterBar","StatsGrid","DataTable","ActionDropdown","StatusToggle","FormInput","FormSelect","FormGroup","ViewDetailsModal","EditFormModal","CreateFormModal","useFilters","useModal","validateParticipanteDocumentoUnico","validateFechaNacimiento","validateFechaIngreso","validateSedeExists","jsx","_jsx","jsxs","_jsxs","Participantes","memo","participantes","setParticipantes","loading","setLoading","error","setError","filters","filtros","setFilter","clearFilters","sede","genero","estado","busqueda","viewModal","editModal","createModal","loadParticipantes","console","log","result","getParticipantes","data","Array","isArray","Error","message","participantesData","length","err","abrirModal","tipo","participante","openModal","filteredParticipantes","safeParticipantes","filtered","filter","p","_p$sede","sedeNombre","direccion","toLowerCase","includes","estadoUpper","toUpperCase","searchLower","documento","numero_documento","toggleEstado","id","newEstado","updateParticipante","handleActionClick","action","handleExportPDF","printWindow","window","open","currentDate","Date","toLocaleDateString","htmlContent","concat","map","nombre","edad","telefono","join","document","write","close","title","subtitle","loadingText","children","className","extraActions","onClick","type","name","label","options","value","placeholder","debounceMs","values","onChange","onClear","showClearButton","stats","icon","color","columns","gap","keyExtractor","row","id_participante","key","header","render","nombreCompleto","nombres","apellidos","tipoDoc","tipo_documento","numDoc","fecha_nacimiento","birthDate","today","age","getFullYear","monthDiff","getMonth","getDate","fecha_ingreso","_row$sede","currentStatus","statuses","variant","actions","ParticipanteViewModal","isOpen","onClose","closeModal","modalData","onCrearAcudiente","ParticipanteEditModal","onActualizar","ParticipanteCreateModal","onCrear","_ref","_participante$sede","acudientes","setAcudientes","loadingAcudientes","setLoadingAcudientes","loadAcudientes","participanteId","getAcudientesByParticipante","estadoLabel","estadoClass","acudiente","index","parentesco","email","id_acudiente","_ref2","_participante$nombre","_participante$nombre2","handleSubmit","formData","_formData$nombres","_formData$apellidos","trim","id_sede","fechaNacimientoValidation","isValid","fechaIngresoValidation","documentoValidation","sedeValidation","initialData","split","slice","sede_id","onSubmit","submitLabel","_ref3","handleChange","errors","ParticipanteForm","_ref4","_formData$nombres2","_formData$apellidos2","createParticipante","defaultValues","_ref5","_ref6","sedes","setSedes","loadingSedes","setLoadingSedes","loadSedes","getSedes","required","disabled"],"sources":["/Users/todoporunalma/Desktop/Corporacion/coptua_react/src/pages/Dashboard/Participantes.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService } from \"shared/services\";\nimport { FilterBar, StatsGrid, DataTable, ActionDropdown, StatusToggle, FormInput, FormSelect, FormGroup } from \"components/UI\";\nimport { ViewDetailsModal, EditFormModal, CreateFormModal } from \"components/common\";\nimport { useFilters, useModal } from \"shared/hooks\";\nimport { \n  validateParticipanteDocumentoUnico, \n  validateFechaNacimiento, \n  validateFechaIngreso,\n  validateSedeExists \n} from \"shared/utils/validationUtils\";\n// import jsPDF from 'jspdf'; // Temporarily disabled - not available in Docker dev\n\nconst Participantes = React.memo(() => {\n  const [participantes, setParticipantes] = useState([]); // Asegurar que siempre sea array\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  // Use the useFilters hook for filter state management\n  const { filters: filtros, setFilter, clearFilters } = useFilters({\n    sede: \"Todas\",\n    genero: \"Todos\",\n    estado: \"Todos\",\n    busqueda: \"\"\n  });\n\n  // Use the useModal hook for modal state management\n  const viewModal = useModal();\n  const editModal = useModal();\n  const createModal = useModal();\n\n  // Funci√≥n para cargar participantes (usando useCallback para evitar re-renders)\n  const loadParticipantes = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('üîÑ Cargando participantes...');\n      \n      const result = await dbService.getParticipantes();\n      console.log('üìä Resultado participantes:', result);\n      console.log('üì¶ result.data:', result.data);\n      console.log('üì¶ result.data type:', typeof result.data);\n      console.log('üì¶ result.data isArray:', Array.isArray(result.data));\n\n      if (result.error) {\n        throw new Error(result.error.message || 'Error al cargar participantes');\n      }\n\n      // The API returns {data: [...], error: null}, so result.data is already the array\n      const participantesData = Array.isArray(result.data) ? result.data : [];\n      console.log('üîÑ participantesData:', participantesData);\n      console.log('üîÑ participantesData.length:', participantesData.length);\n      setParticipantes(participantesData);\n      console.log('‚úÖ Participantes cargados:', participantesData.length);\n    } catch (err) {\n      console.error('‚ùå Error cargando participantes:', err);\n      setError(err.message || 'Error desconocido al cargar participantes');\n      setParticipantes([]); // Asegurar que no quede undefined\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadParticipantes();\n  }, [loadParticipantes]);\n\n  // Funciones para manejar modales (memoized)\n  const abrirModal = useCallback((tipo, participante) => {\n    if (tipo === 'ver') {\n      viewModal.openModal(null, participante);\n    } else if (tipo === 'editar') {\n      editModal.openModal(null, participante);\n    } else if (tipo === 'crear') {\n      createModal.openModal();\n    }\n  }, [viewModal, editModal, createModal]);\n\n  const filteredParticipantes = useMemo(() => {\n    // Asegurar que participantes siempre sea un array\n    const safeParticipantes = Array.isArray(participantes) ? participantes : [];\n    let filtered = safeParticipantes;\n\n    if (filtros.sede !== \"Todas\") {\n      filtered = filtered.filter(p => {\n        const sedeNombre = p.sede?.direccion || p.sede || '';\n        return sedeNombre.toLowerCase().includes(filtros.sede.toLowerCase());\n      });\n    }\n    if (filtros.genero !== \"Todos\") {\n      filtered = filtered.filter(p => p.genero === filtros.genero);\n    }\n    if (filtros.estado !== \"Todos\") {\n      // Support both ACTIVO/INACTIVO and Activo/Inactivo\n      const estadoUpper = filtros.estado.toUpperCase();\n      filtered = filtered.filter(p => \n        p.estado === filtros.estado || \n        p.estado === estadoUpper ||\n        (filtros.estado === 'Activo' && p.estado === 'ACTIVO') ||\n        (filtros.estado === 'Inactivo' && p.estado === 'INACTIVO')\n      );\n    }\n    if (filtros.busqueda) {\n      const searchLower = filtros.busqueda.toLowerCase();\n      filtered = filtered.filter(p => {\n        const documento = (p.numero_documento || '').toLowerCase();\n\n        return documento.includes(searchLower);\n      });\n    }\n    return filtered;\n  }, [participantes, filtros]);\n\n  const toggleEstado = useCallback(async (id, newEstado) => {\n    try {\n      await dbService.updateParticipante(id, { estado: newEstado });\n      // Refresh data\n      const { data } = await dbService.getParticipantes();\n      setParticipantes(data || []);\n    } catch (err) {\n      console.error('Error updating status:', err);\n    }\n  }, []);\n\n  const handleActionClick = useCallback((action, participante) => {\n    switch (action) {\n      case 'ver':\n        abrirModal('ver', participante);\n        break;\n      case 'editar':\n        abrirModal('editar', participante);\n        break;\n      default:\n        // No action\n        break;\n    }\n  }, [abrirModal]);\n\n  const handleExportPDF = useCallback(() => {\n    // Create a new window for printing\n    const printWindow = window.open('', '_blank');\n    const currentDate = new Date().toLocaleDateString('es-ES');\n\n    // Generate HTML content for PDF\n    const htmlContent = `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Lista de Participantes - ${currentDate}</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              margin: 20px;\n              color: #333;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #333;\n              padding-bottom: 20px;\n            }\n            .header h1 {\n              color: #2563eb;\n              margin: 0;\n              font-size: 24px;\n            }\n            .filters {\n              margin-bottom: 20px;\n              background: #f8f9fa;\n              padding: 15px;\n              border-radius: 5px;\n            }\n            .filters h3 {\n              margin: 0 0 10px 0;\n              color: #495057;\n            }\n            .filters p {\n              margin: 5px 0;\n              font-size: 14px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n            }\n            th, td {\n              border: 1px solid #ddd;\n              padding: 8px 12px;\n              text-align: left;\n            }\n            th {\n              background-color: #f8f9fa;\n              font-weight: bold;\n              color: #495057;\n            }\n            tr:nth-child(even) {\n              background-color: #f9f9f9;\n            }\n            .stats {\n              margin-top: 30px;\n              background: #e3f2fd;\n              padding: 15px;\n              border-radius: 5px;\n            }\n            .stats h3 {\n              margin: 0 0 10px 0;\n              color: #1976d2;\n            }\n            .stats p {\n              margin: 5px 0;\n              font-size: 14px;\n            }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header\">\n            <h1>Lista de Participantes</h1>\n            <p>Corporaci√≥n Todo por un Alma</p>\n            <p>Fecha de generaci√≥n: ${currentDate}</p>\n          </div>\n\n          <div class=\"filters\">\n            <h3>Filtros aplicados:</h3>\n            <p><strong>Sede:</strong> ${filtros.sede === 'Todas' ? 'Todas las sedes' : filtros.sede}</p>\n            <p><strong>G√©nero:</strong> ${filtros.genero === 'Todos' ? 'Todos los g√©neros' : filtros.genero}</p>\n            <p><strong>Estado:</strong> ${filtros.estado === 'Todos' ? 'Todos los estados' : filtros.estado}</p>\n            ${filtros.busqueda ? `<p><strong>B√∫squeda:</strong> \"${filtros.busqueda}\"</p>` : ''}\n          </div>\n\n          <table>\n            <thead>\n              <tr>\n                <th>Nombre</th>\n                <th>Edad</th>\n                <th>G√©nero</th>\n                <th>Tel√©fono</th>\n                <th>Sede</th>\n                <th>Estado</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${filteredParticipantes.map(participante => `\n                <tr>\n                  <td>${participante.nombre || 'N/A'}</td>\n                  <td>${participante.edad || 'N/A'}</td>\n                  <td>${participante.genero || 'N/A'}</td>\n                  <td>${participante.telefono || 'N/A'}</td>\n                  <td>${participante.sede || 'N/A'}</td>\n                  <td>${participante.estado || 'N/A'}</td>\n                </tr>\n              `).join('')}\n            </tbody>\n          </table>\n\n          <div class=\"stats\">\n            <h3>Estad√≠sticas:</h3>\n            <p><strong>Total de participantes:</strong> ${filteredParticipantes.length}</p>\n            <p><strong>Activos:</strong> ${filteredParticipantes.filter(p => p.estado === 'Activo').length}</p>\n            <p><strong>Inactivos:</strong> ${filteredParticipantes.filter(p => p.estado === 'Inactivo').length}</p>\n          </div>\n\n          <script>\n            window.onload = function() {\n              window.print();\n              setTimeout(function() {\n                window.close();\n              }, 1000);\n            }\n          </script>\n        </body>\n      </html>\n    `;\n\n    printWindow.document.write(htmlContent);\n    printWindow.document.close();\n  }, [filtros, filteredParticipantes]);\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Participantes\" subtitle=\"Gesti√≥n de participantes\" loading={true} loadingText=\"Cargando participantes...\" />\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout title=\"Participantes\" subtitle=\"Error al cargar datos\" loading={false}>\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-600\">Error loading participants: {error}</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout title=\"Gesti√≥n de Participantes\" subtitle=\"Administra los participantes de la fundaci√≥n\" extraActions={\n      <div className=\"flex space-x-3\">\n        <button\n          onClick={() => handleExportPDF()}\n          className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors\"\n          title=\"Exportar lista filtrada a PDF\"\n        >\n          <i className=\"fas fa-file-pdf mr-2\"></i>\n          Exportar PDF\n        </button>\n        <button\n          onClick={() => abrirModal('crear', null)}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          <i className=\"fas fa-plus mr-2\"></i>\n          Nuevo Participante\n        </button>\n      </div>\n    }>\n      <section className=\"px-6 py-6\">\n        <FilterBar\n          filters={[\n            {\n              type: 'select',\n              name: 'sede',\n              label: 'Sede',\n              options: [\n                { value: 'Todas', label: 'Todas las Sedes' },\n                { value: 'Bello Principal', label: 'Bello Principal' },\n                { value: 'Bello Campestre', label: 'Bello Campestre' },\n                { value: 'Apartad√≥', label: 'Apartad√≥' }\n              ]\n            },\n            {\n              type: 'select',\n              name: 'genero',\n              label: 'G√©nero',\n              options: [\n                { value: 'Todos', label: 'Todos los G√©neros' },\n                { value: 'MASCULINO', label: 'Masculino' },\n                { value: 'FEMENINO', label: 'Femenino' }\n              ]\n            },\n            {\n              type: 'select',\n              name: 'estado',\n              label: 'Estado',\n              options: [\n                { value: 'Todos', label: 'Todos los Estados' },\n                { value: 'Activo', label: 'Activo' },\n                { value: 'Inactivo', label: 'Inactivo' }\n              ]\n            },\n            {\n              type: 'search',\n              name: 'busqueda',\n              label: 'B√∫squeda por Documento',\n              placeholder: 'N√∫mero de documento...',\n              debounceMs: 300\n            }\n          ]}\n          values={filtros}\n          onChange={setFilter}\n          onClear={clearFilters}\n          showClearButton={true}\n        />\n\n        {/* Estad√≠sticas R√°pidas */}\n        <div className=\"mt-6\">\n          <StatsGrid\n            stats={[\n              {\n                title: 'Total Participantes',\n                value: filteredParticipantes.length,\n                icon: 'fas fa-users',\n                color: 'blue'\n              },\n              {\n                title: 'Activos',\n                value: filteredParticipantes.filter(p => p.estado === \"ACTIVO\" || p.estado === \"Activo\").length,\n                icon: 'fas fa-user-check',\n                color: 'green'\n              },\n              {\n                title: 'Inactivos',\n                value: filteredParticipantes.filter(p => p.estado === \"INACTIVO\" || p.estado === \"Inactivo\").length,\n                icon: 'fas fa-user-times',\n                color: 'red'\n              }\n            ]}\n            columns={3}\n            gap=\"md\"\n          />\n        </div>\n\n        {/* Tabla de Participantes */}\n        <div className=\"mt-6\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">Lista de Participantes</h3>\n          </div>\n          \n          <DataTable\n            data={filteredParticipantes}\n            keyExtractor={(row) => row.id || row.id_participante}\n            columns={[\n              {\n                key: 'participante',\n                header: 'Participante',\n                render: (row) => {\n                  const nombreCompleto = row.nombres && row.apellidos \n                    ? `${row.nombres} ${row.apellidos}` \n                    : row.nombre || 'N/A';\n                  const tipoDoc = row.tipo_documento || 'N/A';\n                  const numDoc = row.numero_documento || 'N/A';\n                  \n                  return (\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\n                        <i className=\"fas fa-user text-blue-600\"></i>\n                      </div>\n                      <div className=\"ml-4\">\n                        <div className=\"text-sm font-medium text-gray-900\">\n                          {nombreCompleto}\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {tipoDoc} {numDoc}\n                        </div>\n                      </div>\n                    </div>\n                  );\n                }\n              },\n              {\n                key: 'edad',\n                header: 'Edad',\n                render: (row) => {\n                  if (row.fecha_nacimiento) {\n                    const birthDate = new Date(row.fecha_nacimiento);\n                    const today = new Date();\n                    let age = today.getFullYear() - birthDate.getFullYear();\n                    const monthDiff = today.getMonth() - birthDate.getMonth();\n                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n                      age--;\n                    }\n                    return `${age} a√±os`;\n                  }\n                  return row.edad ? `${row.edad} a√±os` : 'N/A';\n                }\n              },\n              {\n                key: 'genero',\n                header: 'G√©nero',\n                render: (row) => (\n                  row.genero === 'MASCULINO' ? 'Masculino' : row.genero === 'FEMENINO' ? 'Femenino' : 'N/A'\n                )\n              },\n              {\n                key: 'fecha_ingreso',\n                header: 'Fecha Ingreso',\n                render: (row) => {\n                  if (row.fecha_ingreso) {\n                    return new Date(row.fecha_ingreso).toLocaleDateString('es-ES');\n                  }\n                  return 'N/A';\n                }\n              },\n              {\n                key: 'sede',\n                header: 'Sede',\n                render: (row) => row.sede?.direccion || row.sede || 'N/A'\n              },\n              {\n                key: 'estado',\n                header: 'Estado',\n                render: (row) => (\n                  <StatusToggle\n                    currentStatus={row.estado}\n                    statuses={[\n                      { value: 'ACTIVO', label: 'Activo', variant: 'success' },\n                      { value: 'Activo', label: 'Activo', variant: 'success' },\n                      { value: 'INACTIVO', label: 'Inactivo', variant: 'danger' },\n                      { value: 'Inactivo', label: 'Inactivo', variant: 'danger' }\n                    ]}\n                    onChange={(newEstado) => toggleEstado(row.id || row.id_participante, newEstado)}\n                  />\n                )\n              },\n              {\n                key: 'acciones',\n                header: 'Acciones',\n                render: (row) => (\n                  <ActionDropdown\n                    actions={[\n                      {\n                        label: 'Ver detalles',\n                        icon: 'fas fa-eye',\n                        onClick: () => handleActionClick('ver', row)\n                      },\n                      {\n                        label: 'Editar',\n                        icon: 'fas fa-edit',\n                        onClick: () => handleActionClick('editar', row)\n                      }\n                    ]}\n                  />\n                )\n              }\n            ]}\n            loading={loading}\n          />\n        </div>\n        </div>\n      </section>\n\n      {/* Modales */}\n      <ParticipanteViewModal\n        isOpen={viewModal.isOpen}\n        onClose={viewModal.closeModal}\n        participante={viewModal.modalData}\n        onCrearAcudiente={() => {\n          // TODO: Open acudiente creation modal with participante pre-selected\n          console.log('Crear acudiente para participante:', viewModal.modalData);\n        }}\n      />\n\n      <ParticipanteEditModal\n        isOpen={editModal.isOpen}\n        onClose={editModal.closeModal}\n        participante={editModal.modalData}\n        onActualizar={loadParticipantes}\n      />\n\n      <ParticipanteCreateModal\n        isOpen={createModal.isOpen}\n        onClose={createModal.closeModal}\n        onCrear={loadParticipantes}\n      />\n    </DashboardLayout>\n  );\n});\n\n// View Modal Component with Acudientes\nconst ParticipanteViewModal = ({ isOpen, onClose, participante, onCrearAcudiente }) => {\n  const [acudientes, setAcudientes] = useState([]);\n  const [loadingAcudientes, setLoadingAcudientes] = useState(false);\n\n  const loadAcudientes = useCallback(async () => {\n    if (!participante?.id && !participante?.id_participante) return;\n\n    try {\n      setLoadingAcudientes(true);\n      const participanteId = participante.id || participante.id_participante;\n      const result = await dbService.getAcudientesByParticipante(participanteId);\n\n      if (result.data && Array.isArray(result.data)) {\n        setAcudientes(result.data);\n      } else {\n        setAcudientes([]);\n      }\n    } catch (err) {\n      console.error('Error loading acudientes:', err);\n      setAcudientes([]);\n    } finally {\n      setLoadingAcudientes(false);\n    }\n  }, [participante]);\n\n  useEffect(() => {\n    if (isOpen && participante) {\n      loadAcudientes();\n    }\n  }, [isOpen, participante, loadAcudientes]);\n\n  if (!participante) return null;\n\n  const nombreCompleto = participante.nombres && participante.apellidos \n    ? `${participante.nombres} ${participante.apellidos}` \n    : participante.nombre || 'N/A';\n\n  const edad = (() => {\n    if (participante.fecha_nacimiento) {\n      const birthDate = new Date(participante.fecha_nacimiento);\n      const today = new Date();\n      let age = today.getFullYear() - birthDate.getFullYear();\n      const monthDiff = today.getMonth() - birthDate.getMonth();\n      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\n        age--;\n      }\n      return age;\n    }\n    return participante.edad || 'N/A';\n  })();\n\n  const estadoLabel = participante.estado === 'ACTIVO' || participante.estado === 'Activo' ? 'Activo' : 'Inactivo';\n  const estadoClass = participante.estado === 'ACTIVO' || participante.estado === 'Activo' \n    ? 'bg-green-100 text-green-800' \n    : 'bg-red-100 text-red-800';\n\n  return (\n    <ViewDetailsModal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Detalles del Participante\"\n      data={[\n        { label: 'Nombre Completo', value: nombreCompleto },\n        { label: 'Tipo de Documento', value: participante.tipo_documento || 'N/A' },\n        { label: 'N√∫mero de Documento', value: participante.numero_documento || 'N/A' },\n        { label: 'Edad', value: typeof edad === 'number' ? `${edad} a√±os` : edad },\n        { label: 'Fecha de Nacimiento', value: participante.fecha_nacimiento \n          ? new Date(participante.fecha_nacimiento).toLocaleDateString('es-ES') \n          : 'N/A' \n        },\n        { label: 'G√©nero', value: participante.genero === 'MASCULINO' ? 'Masculino' : participante.genero === 'FEMENINO' ? 'Femenino' : 'N/A' },\n        { label: 'Fecha de Ingreso', value: participante.fecha_ingreso\n          ? new Date(participante.fecha_ingreso).toLocaleDateString('es-ES')\n          : 'N/A'\n        },\n        { label: 'Sede', value: participante.sede?.direccion || participante.sede || 'N/A' },\n        { label: 'Tel√©fono', value: participante.telefono || 'N/A' },\n        { \n          label: 'Estado', \n          value: (\n            <span className={`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${estadoClass}`}>\n              {estadoLabel}\n            </span>\n          )\n        },\n        {\n          label: 'Acudientes',\n          value: (\n            <div className=\"mt-2\">\n              {loadingAcudientes ? (\n                <p className=\"text-sm text-gray-500\">Cargando acudientes...</p>\n              ) : acudientes.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {acudientes.map((acudiente, index) => (\n                    <div key={acudiente.id_acudiente || index} className=\"bg-gray-50 p-3 rounded-lg border border-gray-200\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <p className=\"text-sm font-medium text-gray-900\">\n                            {acudiente.nombres} {acudiente.apellidos}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            {acudiente.parentesco} ‚Ä¢ {acudiente.tipo_documento} {acudiente.numero_documento}\n                          </p>\n                          <p className=\"text-xs text-gray-500 mt-1\">\n                            <i className=\"fas fa-phone mr-1\"></i>{acudiente.telefono}\n                            {acudiente.email && (\n                              <span className=\"ml-2\">\n                                <i className=\"fas fa-envelope mr-1\"></i>{acudiente.email}\n                              </span>\n                            )}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                  <button\n                    onClick={onCrearAcudiente}\n                    className=\"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium\"\n                  >\n                    <i className=\"fas fa-plus mr-1\"></i>\n                    Agregar otro acudiente\n                  </button>\n                </div>\n              ) : (\n                <div className=\"text-center py-4\">\n                  <p className=\"text-sm text-gray-500 mb-2\">No hay acudientes registrados</p>\n                  <button\n                    onClick={onCrearAcudiente}\n                    className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n                  >\n                    <i className=\"fas fa-plus mr-1\"></i>\n                    Agregar acudiente\n                  </button>\n                </div>\n              )}\n            </div>\n          )\n        }\n      ]}\n    />\n  );\n};\n\n// Edit Modal Component\nconst ParticipanteEditModal = ({ isOpen, onClose, participante, onActualizar }) => {\n  if (!participante) return null;\n\n  const handleSubmit = async (formData) => {\n    console.log('üîÑ Actualizando participante:', formData);\n    \n    // Validate required fields\n    if (!formData.tipo_documento || !formData.numero_documento) {\n      throw new Error('Tipo y n√∫mero de documento son requeridos');\n    }\n    if (!formData.nombres?.trim() || !formData.apellidos?.trim()) {\n      throw new Error('Nombres y apellidos son requeridos');\n    }\n    if (!formData.fecha_nacimiento || !formData.fecha_ingreso) {\n      throw new Error('Fechas de nacimiento e ingreso son requeridas');\n    }\n    if (!formData.id_sede) {\n      throw new Error('Debe seleccionar una sede');\n    }\n    \n    // Validate fecha_nacimiento format and value\n    const fechaNacimientoValidation = validateFechaNacimiento(formData.fecha_nacimiento);\n    if (!fechaNacimientoValidation.isValid) {\n      throw new Error(fechaNacimientoValidation.error);\n    }\n    \n    // Validate fecha_ingreso format and value\n    const fechaIngresoValidation = validateFechaIngreso(formData.fecha_ingreso);\n    if (!fechaIngresoValidation.isValid) {\n      throw new Error(fechaIngresoValidation.error);\n    }\n    \n    // Validate documento √∫nico\n    const participanteId = participante.id || participante.id_participante;\n    const documentoValidation = await validateParticipanteDocumentoUnico(formData.numero_documento, participanteId);\n    if (!documentoValidation.isValid) {\n      throw new Error(documentoValidation.error);\n    }\n    \n    // Validate sede exists\n    const sedeValidation = await validateSedeExists(formData.id_sede);\n    if (!sedeValidation.isValid) {\n      throw new Error(sedeValidation.error);\n    }\n    \n    const result = await dbService.updateParticipante(participanteId, formData);\n    \n    if (result.error) {\n      throw new Error(result.error.message || 'Error al actualizar participante');\n    }\n    \n    console.log('‚úÖ Participante actualizado exitosamente');\n    onActualizar();\n  };\n\n  return (\n    <EditFormModal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Editar Participante\"\n      initialData={{\n        tipo_documento: participante.tipo_documento || 'CC',\n        numero_documento: participante.numero_documento || '',\n        nombres: participante.nombres || participante.nombre?.split(' ')[0] || '',\n        apellidos: participante.apellidos || participante.nombre?.split(' ').slice(1).join(' ') || '',\n        fecha_nacimiento: participante.fecha_nacimiento || '',\n        genero: participante.genero || 'MASCULINO',\n        fecha_ingreso: participante.fecha_ingreso || '',\n        estado: participante.estado || 'ACTIVO',\n        id_sede: participante.id_sede || participante.sede_id || '',\n      }}\n      onSubmit={handleSubmit}\n      submitLabel=\"Guardar Cambios\"\n    >\n      {({ formData, handleChange, errors }) => (\n        <ParticipanteForm \n          formData={formData} \n          handleChange={handleChange} \n          errors={errors}\n        />\n      )}\n    </EditFormModal>\n  );\n};\n\n// Create Modal Component\nconst ParticipanteCreateModal = ({ isOpen, onClose, onCrear }) => {\n  const handleSubmit = async (formData) => {\n    console.log('üîÑ Creando participante:', formData);\n    \n    // Validate required fields\n    if (!formData.tipo_documento || !formData.numero_documento) {\n      throw new Error('Tipo y n√∫mero de documento son requeridos');\n    }\n    if (!formData.nombres?.trim() || !formData.apellidos?.trim()) {\n      throw new Error('Nombres y apellidos son requeridos');\n    }\n    if (!formData.fecha_nacimiento || !formData.fecha_ingreso) {\n      throw new Error('Fechas de nacimiento e ingreso son requeridas');\n    }\n    if (!formData.id_sede) {\n      throw new Error('Debe seleccionar una sede');\n    }\n    \n    // Validate fecha_nacimiento format and value\n    const fechaNacimientoValidation = validateFechaNacimiento(formData.fecha_nacimiento);\n    if (!fechaNacimientoValidation.isValid) {\n      throw new Error(fechaNacimientoValidation.error);\n    }\n    \n    // Validate fecha_ingreso format and value\n    const fechaIngresoValidation = validateFechaIngreso(formData.fecha_ingreso);\n    if (!fechaIngresoValidation.isValid) {\n      throw new Error(fechaIngresoValidation.error);\n    }\n    \n    // Validate documento √∫nico\n    const documentoValidation = await validateParticipanteDocumentoUnico(formData.numero_documento);\n    if (!documentoValidation.isValid) {\n      throw new Error(documentoValidation.error);\n    }\n    \n    // Validate sede exists\n    const sedeValidation = await validateSedeExists(formData.id_sede);\n    if (!sedeValidation.isValid) {\n      throw new Error(sedeValidation.error);\n    }\n    \n    const result = await dbService.createParticipante(formData);\n    \n    if (result.error) {\n      throw new Error(result.error.message || 'Error al crear participante');\n    }\n    \n    console.log('‚úÖ Participante creado exitosamente');\n    onCrear();\n  };\n\n  return (\n    <CreateFormModal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Nuevo Participante\"\n      defaultValues={{\n        tipo_documento: 'CC',\n        numero_documento: '',\n        nombres: '',\n        apellidos: '',\n        fecha_nacimiento: '',\n        genero: 'MASCULINO',\n        fecha_ingreso: '',\n        estado: 'ACTIVO',\n        id_sede: '',\n      }}\n      onSubmit={handleSubmit}\n      submitLabel=\"Crear Participante\"\n    >\n      {({ formData, handleChange, errors }) => (\n        <ParticipanteForm \n          formData={formData} \n          handleChange={handleChange} \n          errors={errors}\n        />\n      )}\n    </CreateFormModal>\n  );\n};\n\n// Shared Form Component using reusable Form components\nconst ParticipanteForm = ({ formData, handleChange, errors }) => {\n  const [sedes, setSedes] = useState([]);\n  const [loadingSedes, setLoadingSedes] = useState(true);\n\n  useEffect(() => {\n    const loadSedes = async () => {\n      try {\n        setLoadingSedes(true);\n        const result = await dbService.getSedes();\n        if (result.data && Array.isArray(result.data)) {\n          setSedes(result.data);\n        }\n      } catch (err) {\n        console.error('Error loading sedes:', err);\n      } finally {\n        setLoadingSedes(false);\n      }\n    };\n    loadSedes();\n  }, []);\n\n  return (\n    <FormGroup columns={2} gap=\"md\">\n      <FormSelect\n        label=\"Tipo de Documento\"\n        name=\"tipo_documento\"\n        value={formData.tipo_documento}\n        onChange={(value) => handleChange('tipo_documento', value)}\n        options={[\n          { value: 'CC', label: 'C√©dula de Ciudadan√≠a' },\n          { value: 'TI', label: 'Tarjeta de Identidad' },\n          { value: 'CE', label: 'C√©dula de Extranjer√≠a' },\n          { value: 'PASAPORTE', label: 'Pasaporte' }\n        ]}\n        error={errors?.tipo_documento}\n        required\n      />\n\n      <FormInput\n        label=\"N√∫mero de Documento\"\n        name=\"numero_documento\"\n        type=\"text\"\n        value={formData.numero_documento}\n        onChange={(value) => handleChange('numero_documento', value)}\n        error={errors?.numero_documento}\n        required\n        placeholder=\"Ingrese el n√∫mero de documento\"\n      />\n\n      <FormInput\n        label=\"Nombres\"\n        name=\"nombres\"\n        type=\"text\"\n        value={formData.nombres}\n        onChange={(value) => handleChange('nombres', value)}\n        error={errors?.nombres}\n        required\n        placeholder=\"Ingrese los nombres\"\n      />\n\n      <FormInput\n        label=\"Apellidos\"\n        name=\"apellidos\"\n        type=\"text\"\n        value={formData.apellidos}\n        onChange={(value) => handleChange('apellidos', value)}\n        error={errors?.apellidos}\n        required\n        placeholder=\"Ingrese los apellidos\"\n      />\n\n      <FormInput\n        label=\"Fecha de Nacimiento\"\n        name=\"fecha_nacimiento\"\n        type=\"date\"\n        value={formData.fecha_nacimiento}\n        onChange={(value) => handleChange('fecha_nacimiento', value)}\n        error={errors?.fecha_nacimiento}\n        required\n      />\n\n      <FormSelect\n        label=\"G√©nero\"\n        name=\"genero\"\n        value={formData.genero}\n        onChange={(value) => handleChange('genero', value)}\n        options={[\n          { value: 'MASCULINO', label: 'Masculino' },\n          { value: 'FEMENINO', label: 'Femenino' }\n        ]}\n        error={errors?.genero}\n        required\n      />\n\n      <FormInput\n        label=\"Fecha de Ingreso\"\n        name=\"fecha_ingreso\"\n        type=\"date\"\n        value={formData.fecha_ingreso}\n        onChange={(value) => handleChange('fecha_ingreso', value)}\n        error={errors?.fecha_ingreso}\n        required\n      />\n\n      <FormSelect\n        label=\"Estado\"\n        name=\"estado\"\n        value={formData.estado}\n        onChange={(value) => handleChange('estado', value)}\n        options={[\n          { value: 'ACTIVO', label: 'Activo' },\n          { value: 'INACTIVO', label: 'Inactivo' }\n        ]}\n        error={errors?.estado}\n        required\n      />\n\n      <FormSelect\n        label=\"Sede\"\n        name=\"id_sede\"\n        value={formData.id_sede}\n        onChange={(value) => handleChange('id_sede', value)}\n        options={loadingSedes ? [{ value: '', label: 'Cargando sedes...' }] : sedes.map(sede => ({\n          value: sede.id_sede || sede.id,\n          label: sede.direccion || sede.nombre\n        }))}\n        error={errors?.id_sede}\n        required\n        disabled={loadingSedes}\n      />\n    </FormGroup>\n  );\n};\n\nexport default Participantes;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,CAAEC,WAAW,KAAQ,OAAO,CACxE,MAAO,CAAAC,eAAe,KAAM,mCAAmC,CAC/D,OAASC,SAAS,KAAQ,iBAAiB,CAC3C,OAASC,SAAS,CAAEC,SAAS,CAAEC,SAAS,CAAEC,cAAc,CAAEC,YAAY,CAAEC,SAAS,CAAEC,UAAU,CAAEC,SAAS,KAAQ,eAAe,CAC/H,OAASC,gBAAgB,CAAEC,aAAa,CAAEC,eAAe,KAAQ,mBAAmB,CACpF,OAASC,UAAU,CAAEC,QAAQ,KAAQ,cAAc,CACnD,OACEC,kCAAkC,CAClCC,uBAAuB,CACvBC,oBAAoB,CACpBC,kBAAkB,KACb,8BAA8B,CACrC;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEA,KAAM,CAAAC,aAAa,cAAG5B,KAAK,CAAC6B,IAAI,CAAC,IAAM,CACrC,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CAAE;AACxD,KAAM,CAAC+B,OAAO,CAAEC,UAAU,CAAC,CAAGhC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACiC,KAAK,CAAEC,QAAQ,CAAC,CAAGlC,QAAQ,CAAC,IAAI,CAAC,CAExC;AACA,KAAM,CAAEmC,OAAO,CAAEC,OAAO,CAAEC,SAAS,CAAEC,YAAa,CAAC,CAAGrB,UAAU,CAAC,CAC/DsB,IAAI,CAAE,OAAO,CACbC,MAAM,CAAE,OAAO,CACfC,MAAM,CAAE,OAAO,CACfC,QAAQ,CAAE,EACZ,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,SAAS,CAAGzB,QAAQ,CAAC,CAAC,CAC5B,KAAM,CAAA0B,SAAS,CAAG1B,QAAQ,CAAC,CAAC,CAC5B,KAAM,CAAA2B,WAAW,CAAG3B,QAAQ,CAAC,CAAC,CAE9B;AACA,KAAM,CAAA4B,iBAAiB,CAAG3C,WAAW,CAAC,SAAY,CAChD,GAAI,CACF6B,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACda,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAE3C,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAA5C,SAAS,CAAC6C,gBAAgB,CAAC,CAAC,CACjDH,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEC,MAAM,CAAC,CAClDF,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEC,MAAM,CAACE,IAAI,CAAC,CAC3CJ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAE,MAAO,CAAAC,MAAM,CAACE,IAAI,CAAC,CACvDJ,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEI,KAAK,CAACC,OAAO,CAACJ,MAAM,CAACE,IAAI,CAAC,CAAC,CAElE,GAAIF,MAAM,CAAChB,KAAK,CAAE,CAChB,KAAM,IAAI,CAAAqB,KAAK,CAACL,MAAM,CAAChB,KAAK,CAACsB,OAAO,EAAI,+BAA+B,CAAC,CAC1E,CAEA;AACA,KAAM,CAAAC,iBAAiB,CAAGJ,KAAK,CAACC,OAAO,CAACJ,MAAM,CAACE,IAAI,CAAC,CAAGF,MAAM,CAACE,IAAI,CAAG,EAAE,CACvEJ,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEQ,iBAAiB,CAAC,CACvDT,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEQ,iBAAiB,CAACC,MAAM,CAAC,CACrE3B,gBAAgB,CAAC0B,iBAAiB,CAAC,CACnCT,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEQ,iBAAiB,CAACC,MAAM,CAAC,CACpE,CAAE,MAAOC,GAAG,CAAE,CACZX,OAAO,CAACd,KAAK,CAAC,iCAAiC,CAAEyB,GAAG,CAAC,CACrDxB,QAAQ,CAACwB,GAAG,CAACH,OAAO,EAAI,2CAA2C,CAAC,CACpEzB,gBAAgB,CAAC,EAAE,CAAC,CAAE;AACxB,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN/B,SAAS,CAAC,IAAM,CACd6C,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,CAACA,iBAAiB,CAAC,CAAC,CAEvB;AACA,KAAM,CAAAa,UAAU,CAAGxD,WAAW,CAAC,CAACyD,IAAI,CAAEC,YAAY,GAAK,CACrD,GAAID,IAAI,GAAK,KAAK,CAAE,CAClBjB,SAAS,CAACmB,SAAS,CAAC,IAAI,CAAED,YAAY,CAAC,CACzC,CAAC,IAAM,IAAID,IAAI,GAAK,QAAQ,CAAE,CAC5BhB,SAAS,CAACkB,SAAS,CAAC,IAAI,CAAED,YAAY,CAAC,CACzC,CAAC,IAAM,IAAID,IAAI,GAAK,OAAO,CAAE,CAC3Bf,WAAW,CAACiB,SAAS,CAAC,CAAC,CACzB,CACF,CAAC,CAAE,CAACnB,SAAS,CAAEC,SAAS,CAAEC,WAAW,CAAC,CAAC,CAEvC,KAAM,CAAAkB,qBAAqB,CAAG7D,OAAO,CAAC,IAAM,CAC1C;AACA,KAAM,CAAA8D,iBAAiB,CAAGZ,KAAK,CAACC,OAAO,CAACxB,aAAa,CAAC,CAAGA,aAAa,CAAG,EAAE,CAC3E,GAAI,CAAAoC,QAAQ,CAAGD,iBAAiB,CAEhC,GAAI5B,OAAO,CAACG,IAAI,GAAK,OAAO,CAAE,CAC5B0B,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,CAAC,EAAI,KAAAC,OAAA,CAC9B,KAAM,CAAAC,UAAU,CAAG,EAAAD,OAAA,CAAAD,CAAC,CAAC5B,IAAI,UAAA6B,OAAA,iBAANA,OAAA,CAAQE,SAAS,GAAIH,CAAC,CAAC5B,IAAI,EAAI,EAAE,CACpD,MAAO,CAAA8B,UAAU,CAACE,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,OAAO,CAACG,IAAI,CAACgC,WAAW,CAAC,CAAC,CAAC,CACtE,CAAC,CAAC,CACJ,CACA,GAAInC,OAAO,CAACI,MAAM,GAAK,OAAO,CAAE,CAC9ByB,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC3B,MAAM,GAAKJ,OAAO,CAACI,MAAM,CAAC,CAC9D,CACA,GAAIJ,OAAO,CAACK,MAAM,GAAK,OAAO,CAAE,CAC9B;AACA,KAAM,CAAAgC,WAAW,CAAGrC,OAAO,CAACK,MAAM,CAACiC,WAAW,CAAC,CAAC,CAChDT,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,CAAC,EAC1BA,CAAC,CAAC1B,MAAM,GAAKL,OAAO,CAACK,MAAM,EAC3B0B,CAAC,CAAC1B,MAAM,GAAKgC,WAAW,EACvBrC,OAAO,CAACK,MAAM,GAAK,QAAQ,EAAI0B,CAAC,CAAC1B,MAAM,GAAK,QAAS,EACrDL,OAAO,CAACK,MAAM,GAAK,UAAU,EAAI0B,CAAC,CAAC1B,MAAM,GAAK,UACjD,CAAC,CACH,CACA,GAAIL,OAAO,CAACM,QAAQ,CAAE,CACpB,KAAM,CAAAiC,WAAW,CAAGvC,OAAO,CAACM,QAAQ,CAAC6B,WAAW,CAAC,CAAC,CAClDN,QAAQ,CAAGA,QAAQ,CAACC,MAAM,CAACC,CAAC,EAAI,CAC9B,KAAM,CAAAS,SAAS,CAAG,CAACT,CAAC,CAACU,gBAAgB,EAAI,EAAE,EAAEN,WAAW,CAAC,CAAC,CAE1D,MAAO,CAAAK,SAAS,CAACJ,QAAQ,CAACG,WAAW,CAAC,CACxC,CAAC,CAAC,CACJ,CACA,MAAO,CAAAV,QAAQ,CACjB,CAAC,CAAE,CAACpC,aAAa,CAAEO,OAAO,CAAC,CAAC,CAE5B,KAAM,CAAA0C,YAAY,CAAG3E,WAAW,CAAC,MAAO4E,EAAE,CAAEC,SAAS,GAAK,CACxD,GAAI,CACF,KAAM,CAAA3E,SAAS,CAAC4E,kBAAkB,CAACF,EAAE,CAAE,CAAEtC,MAAM,CAAEuC,SAAU,CAAC,CAAC,CAC7D;AACA,KAAM,CAAE7B,IAAK,CAAC,CAAG,KAAM,CAAA9C,SAAS,CAAC6C,gBAAgB,CAAC,CAAC,CACnDpB,gBAAgB,CAACqB,IAAI,EAAI,EAAE,CAAC,CAC9B,CAAE,MAAOO,GAAG,CAAE,CACZX,OAAO,CAACd,KAAK,CAAC,wBAAwB,CAAEyB,GAAG,CAAC,CAC9C,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAwB,iBAAiB,CAAG/E,WAAW,CAAC,CAACgF,MAAM,CAAEtB,YAAY,GAAK,CAC9D,OAAQsB,MAAM,EACZ,IAAK,KAAK,CACRxB,UAAU,CAAC,KAAK,CAAEE,YAAY,CAAC,CAC/B,MACF,IAAK,QAAQ,CACXF,UAAU,CAAC,QAAQ,CAAEE,YAAY,CAAC,CAClC,MACF,QACE;AACA,MACJ,CACF,CAAC,CAAE,CAACF,UAAU,CAAC,CAAC,CAEhB,KAAM,CAAAyB,eAAe,CAAGjF,WAAW,CAAC,IAAM,CACxC;AACA,KAAM,CAAAkF,WAAW,CAAGC,MAAM,CAACC,IAAI,CAAC,EAAE,CAAE,QAAQ,CAAC,CAC7C,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,OAAO,CAAC,CAE1D;AACA,KAAM,CAAAC,WAAW,qGAAAC,MAAA,CAIuBJ,WAAW,skEAAAI,MAAA,CA0EjBJ,WAAW,iJAAAI,MAAA,CAKTxD,OAAO,CAACG,IAAI,GAAK,OAAO,CAAG,iBAAiB,CAAGH,OAAO,CAACG,IAAI,sDAAAqD,MAAA,CACzDxD,OAAO,CAACI,MAAM,GAAK,OAAO,CAAG,mBAAmB,CAAGJ,OAAO,CAACI,MAAM,mDAAAoD,MAAA,CACjExD,OAAO,CAACK,MAAM,GAAK,OAAO,CAAG,mBAAmB,CAAGL,OAAO,CAACK,MAAM,uBAAAmD,MAAA,CAC7FxD,OAAO,CAACM,QAAQ,uCAAAkD,MAAA,CAAqCxD,OAAO,CAACM,QAAQ,WAAU,EAAE,+WAAAkD,MAAA,CAe/E7B,qBAAqB,CAAC8B,GAAG,CAAChC,YAAY,mDAAA+B,MAAA,CAE9B/B,YAAY,CAACiC,MAAM,EAAI,KAAK,kCAAAF,MAAA,CAC5B/B,YAAY,CAACkC,IAAI,EAAI,KAAK,kCAAAH,MAAA,CAC1B/B,YAAY,CAACrB,MAAM,EAAI,KAAK,kCAAAoD,MAAA,CAC5B/B,YAAY,CAACmC,QAAQ,EAAI,KAAK,kCAAAJ,MAAA,CAC9B/B,YAAY,CAACtB,IAAI,EAAI,KAAK,kCAAAqD,MAAA,CAC1B/B,YAAY,CAACpB,MAAM,EAAI,KAAK,gDAErC,CAAC,CAACwD,IAAI,CAAC,EAAE,CAAC,mLAAAL,MAAA,CAMiC7B,qBAAqB,CAACN,MAAM,oDAAAmC,MAAA,CAC3C7B,qBAAqB,CAACG,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC1B,MAAM,GAAK,QAAQ,CAAC,CAACgB,MAAM,sDAAAmC,MAAA,CAC7D7B,qBAAqB,CAACG,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC1B,MAAM,GAAK,UAAU,CAAC,CAACgB,MAAM,oSAazG,CAED4B,WAAW,CAACa,QAAQ,CAACC,KAAK,CAACR,WAAW,CAAC,CACvCN,WAAW,CAACa,QAAQ,CAACE,KAAK,CAAC,CAAC,CAC9B,CAAC,CAAE,CAAChE,OAAO,CAAE2B,qBAAqB,CAAC,CAAC,CAEpC,GAAIhC,OAAO,CAAE,CACX,mBACEP,IAAA,CAACpB,eAAe,EAACiG,KAAK,CAAC,eAAe,CAACC,QAAQ,CAAC,6BAA0B,CAACvE,OAAO,CAAE,IAAK,CAACwE,WAAW,CAAC,2BAA2B,CAAE,CAAC,CAExI,CAEA,GAAItE,KAAK,CAAE,CACT,mBACET,IAAA,CAACpB,eAAe,EAACiG,KAAK,CAAC,eAAe,CAACC,QAAQ,CAAC,uBAAuB,CAACvE,OAAO,CAAE,KAAM,CAAAyE,QAAA,cACrFhF,IAAA,QAAKiF,SAAS,CAAC,2CAA2C,CAAAD,QAAA,cACxDhF,IAAA,QAAKiF,SAAS,CAAC,gDAAgD,CAAAD,QAAA,cAC7D9E,KAAA,MAAG+E,SAAS,CAAC,cAAc,CAAAD,QAAA,EAAC,8BAA4B,CAACvE,KAAK,EAAI,CAAC,CAChE,CAAC,CACH,CAAC,CACS,CAAC,CAEtB,CAEA,mBACEP,KAAA,CAACtB,eAAe,EAACiG,KAAK,CAAC,6BAA0B,CAACC,QAAQ,CAAC,iDAA8C,CAACI,YAAY,cACpHhF,KAAA,QAAK+E,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7B9E,KAAA,WACEiF,OAAO,CAAEA,CAAA,GAAMvB,eAAe,CAAC,CAAE,CACjCqB,SAAS,CAAC,+EAA+E,CACzFJ,KAAK,CAAC,+BAA+B,CAAAG,QAAA,eAErChF,IAAA,MAAGiF,SAAS,CAAC,sBAAsB,CAAI,CAAC,eAE1C,EAAQ,CAAC,cACT/E,KAAA,WACEiF,OAAO,CAAEA,CAAA,GAAMhD,UAAU,CAAC,OAAO,CAAE,IAAI,CAAE,CACzC8C,SAAS,CAAC,iFAAiF,CAAAD,QAAA,eAE3FhF,IAAA,MAAGiF,SAAS,CAAC,kBAAkB,CAAI,CAAC,qBAEtC,EAAQ,CAAC,EACN,CACN,CAAAD,QAAA,eACC9E,KAAA,YAAS+E,SAAS,CAAC,WAAW,CAAAD,QAAA,eAC5BhF,IAAA,CAAClB,SAAS,EACR6B,OAAO,CAAE,CACP,CACEyE,IAAI,CAAE,QAAQ,CACdC,IAAI,CAAE,MAAM,CACZC,KAAK,CAAE,MAAM,CACbC,OAAO,CAAE,CACP,CAAEC,KAAK,CAAE,OAAO,CAAEF,KAAK,CAAE,iBAAkB,CAAC,CAC5C,CAAEE,KAAK,CAAE,iBAAiB,CAAEF,KAAK,CAAE,iBAAkB,CAAC,CACtD,CAAEE,KAAK,CAAE,iBAAiB,CAAEF,KAAK,CAAE,iBAAkB,CAAC,CACtD,CAAEE,KAAK,CAAE,UAAU,CAAEF,KAAK,CAAE,UAAW,CAAC,CAE5C,CAAC,CACD,CACEF,IAAI,CAAE,QAAQ,CACdC,IAAI,CAAE,QAAQ,CACdC,KAAK,CAAE,QAAQ,CACfC,OAAO,CAAE,CACP,CAAEC,KAAK,CAAE,OAAO,CAAEF,KAAK,CAAE,mBAAoB,CAAC,CAC9C,CAAEE,KAAK,CAAE,WAAW,CAAEF,KAAK,CAAE,WAAY,CAAC,CAC1C,CAAEE,KAAK,CAAE,UAAU,CAAEF,KAAK,CAAE,UAAW,CAAC,CAE5C,CAAC,CACD,CACEF,IAAI,CAAE,QAAQ,CACdC,IAAI,CAAE,QAAQ,CACdC,KAAK,CAAE,QAAQ,CACfC,OAAO,CAAE,CACP,CAAEC,KAAK,CAAE,OAAO,CAAEF,KAAK,CAAE,mBAAoB,CAAC,CAC9C,CAAEE,KAAK,CAAE,QAAQ,CAAEF,KAAK,CAAE,QAAS,CAAC,CACpC,CAAEE,KAAK,CAAE,UAAU,CAAEF,KAAK,CAAE,UAAW,CAAC,CAE5C,CAAC,CACD,CACEF,IAAI,CAAE,QAAQ,CACdC,IAAI,CAAE,UAAU,CAChBC,KAAK,CAAE,wBAAwB,CAC/BG,WAAW,CAAE,wBAAwB,CACrCC,UAAU,CAAE,GACd,CAAC,CACD,CACFC,MAAM,CAAE/E,OAAQ,CAChBgF,QAAQ,CAAE/E,SAAU,CACpBgF,OAAO,CAAE/E,YAAa,CACtBgF,eAAe,CAAE,IAAK,CACvB,CAAC,cAGF9F,IAAA,QAAKiF,SAAS,CAAC,MAAM,CAAAD,QAAA,cACnBhF,IAAA,CAACjB,SAAS,EACRgH,KAAK,CAAE,CACL,CACElB,KAAK,CAAE,qBAAqB,CAC5BW,KAAK,CAAEjD,qBAAqB,CAACN,MAAM,CACnC+D,IAAI,CAAE,cAAc,CACpBC,KAAK,CAAE,MACT,CAAC,CACD,CACEpB,KAAK,CAAE,SAAS,CAChBW,KAAK,CAAEjD,qBAAqB,CAACG,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC1B,MAAM,GAAK,QAAQ,EAAI0B,CAAC,CAAC1B,MAAM,GAAK,QAAQ,CAAC,CAACgB,MAAM,CAC/F+D,IAAI,CAAE,mBAAmB,CACzBC,KAAK,CAAE,OACT,CAAC,CACD,CACEpB,KAAK,CAAE,WAAW,CAClBW,KAAK,CAAEjD,qBAAqB,CAACG,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC1B,MAAM,GAAK,UAAU,EAAI0B,CAAC,CAAC1B,MAAM,GAAK,UAAU,CAAC,CAACgB,MAAM,CACnG+D,IAAI,CAAE,mBAAmB,CACzBC,KAAK,CAAE,KACT,CAAC,CACD,CACFC,OAAO,CAAE,CAAE,CACXC,GAAG,CAAC,IAAI,CACT,CAAC,CACC,CAAC,cAGNnG,IAAA,QAAKiF,SAAS,CAAC,MAAM,CAAAD,QAAA,cACrB9E,KAAA,QAAK+E,SAAS,CAAC,sDAAsD,CAAAD,QAAA,eACnEhF,IAAA,QAAKiF,SAAS,CAAC,8BAA8B,CAAAD,QAAA,cAC3ChF,IAAA,OAAIiF,SAAS,CAAC,qCAAqC,CAAAD,QAAA,CAAC,wBAAsB,CAAI,CAAC,CAC5E,CAAC,cAENhF,IAAA,CAAChB,SAAS,EACR2C,IAAI,CAAEY,qBAAsB,CAC5B6D,YAAY,CAAGC,GAAG,EAAKA,GAAG,CAAC9C,EAAE,EAAI8C,GAAG,CAACC,eAAgB,CACrDJ,OAAO,CAAE,CACP,CACEK,GAAG,CAAE,cAAc,CACnBC,MAAM,CAAE,cAAc,CACtBC,MAAM,CAAGJ,GAAG,EAAK,CACf,KAAM,CAAAK,cAAc,CAAGL,GAAG,CAACM,OAAO,EAAIN,GAAG,CAACO,SAAS,IAAAxC,MAAA,CAC5CiC,GAAG,CAACM,OAAO,MAAAvC,MAAA,CAAIiC,GAAG,CAACO,SAAS,EAC/BP,GAAG,CAAC/B,MAAM,EAAI,KAAK,CACvB,KAAM,CAAAuC,OAAO,CAAGR,GAAG,CAACS,cAAc,EAAI,KAAK,CAC3C,KAAM,CAAAC,MAAM,CAAGV,GAAG,CAAChD,gBAAgB,EAAI,KAAK,CAE5C,mBACEnD,KAAA,QAAK+E,SAAS,CAAC,mBAAmB,CAAAD,QAAA,eAChChF,IAAA,QAAKiF,SAAS,CAAC,qEAAqE,CAAAD,QAAA,cAClFhF,IAAA,MAAGiF,SAAS,CAAC,2BAA2B,CAAI,CAAC,CAC1C,CAAC,cACN/E,KAAA,QAAK+E,SAAS,CAAC,MAAM,CAAAD,QAAA,eACnBhF,IAAA,QAAKiF,SAAS,CAAC,mCAAmC,CAAAD,QAAA,CAC/C0B,cAAc,CACZ,CAAC,cACNxG,KAAA,QAAK+E,SAAS,CAAC,uBAAuB,CAAAD,QAAA,EACnC6B,OAAO,CAAC,GAAC,CAACE,MAAM,EACd,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CACF,CAAC,CACD,CACER,GAAG,CAAE,MAAM,CACXC,MAAM,CAAE,MAAM,CACdC,MAAM,CAAGJ,GAAG,EAAK,CACf,GAAIA,GAAG,CAACW,gBAAgB,CAAE,CACxB,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAhD,IAAI,CAACoC,GAAG,CAACW,gBAAgB,CAAC,CAChD,KAAM,CAAAE,KAAK,CAAG,GAAI,CAAAjD,IAAI,CAAC,CAAC,CACxB,GAAI,CAAAkD,GAAG,CAAGD,KAAK,CAACE,WAAW,CAAC,CAAC,CAAGH,SAAS,CAACG,WAAW,CAAC,CAAC,CACvD,KAAM,CAAAC,SAAS,CAAGH,KAAK,CAACI,QAAQ,CAAC,CAAC,CAAGL,SAAS,CAACK,QAAQ,CAAC,CAAC,CACzD,GAAID,SAAS,CAAG,CAAC,EAAKA,SAAS,GAAK,CAAC,EAAIH,KAAK,CAACK,OAAO,CAAC,CAAC,CAAGN,SAAS,CAACM,OAAO,CAAC,CAAE,CAAE,CAC/EJ,GAAG,EAAE,CACP,CACA,SAAA/C,MAAA,CAAU+C,GAAG,aACf,CACA,MAAO,CAAAd,GAAG,CAAC9B,IAAI,IAAAH,MAAA,CAAMiC,GAAG,CAAC9B,IAAI,aAAU,KAAK,CAC9C,CACF,CAAC,CACD,CACEgC,GAAG,CAAE,QAAQ,CACbC,MAAM,CAAE,QAAQ,CAChBC,MAAM,CAAGJ,GAAG,EACVA,GAAG,CAACrF,MAAM,GAAK,WAAW,CAAG,WAAW,CAAGqF,GAAG,CAACrF,MAAM,GAAK,UAAU,CAAG,UAAU,CAAG,KAExF,CAAC,CACD,CACEuF,GAAG,CAAE,eAAe,CACpBC,MAAM,CAAE,eAAe,CACvBC,MAAM,CAAGJ,GAAG,EAAK,CACf,GAAIA,GAAG,CAACmB,aAAa,CAAE,CACrB,MAAO,IAAI,CAAAvD,IAAI,CAACoC,GAAG,CAACmB,aAAa,CAAC,CAACtD,kBAAkB,CAAC,OAAO,CAAC,CAChE,CACA,MAAO,KAAK,CACd,CACF,CAAC,CACD,CACEqC,GAAG,CAAE,MAAM,CACXC,MAAM,CAAE,MAAM,CACdC,MAAM,CAAGJ,GAAG,OAAAoB,SAAA,OAAK,EAAAA,SAAA,CAAApB,GAAG,CAACtF,IAAI,UAAA0G,SAAA,iBAARA,SAAA,CAAU3E,SAAS,GAAIuD,GAAG,CAACtF,IAAI,EAAI,KAAK,EAC3D,CAAC,CACD,CACEwF,GAAG,CAAE,QAAQ,CACbC,MAAM,CAAE,QAAQ,CAChBC,MAAM,CAAGJ,GAAG,eACVrG,IAAA,CAACd,YAAY,EACXwI,aAAa,CAAErB,GAAG,CAACpF,MAAO,CAC1B0G,QAAQ,CAAE,CACR,CAAEnC,KAAK,CAAE,QAAQ,CAAEF,KAAK,CAAE,QAAQ,CAAEsC,OAAO,CAAE,SAAU,CAAC,CACxD,CAAEpC,KAAK,CAAE,QAAQ,CAAEF,KAAK,CAAE,QAAQ,CAAEsC,OAAO,CAAE,SAAU,CAAC,CACxD,CAAEpC,KAAK,CAAE,UAAU,CAAEF,KAAK,CAAE,UAAU,CAAEsC,OAAO,CAAE,QAAS,CAAC,CAC3D,CAAEpC,KAAK,CAAE,UAAU,CAAEF,KAAK,CAAE,UAAU,CAAEsC,OAAO,CAAE,QAAS,CAAC,CAC3D,CACFhC,QAAQ,CAAGpC,SAAS,EAAKF,YAAY,CAAC+C,GAAG,CAAC9C,EAAE,EAAI8C,GAAG,CAACC,eAAe,CAAE9C,SAAS,CAAE,CACjF,CAEL,CAAC,CACD,CACE+C,GAAG,CAAE,UAAU,CACfC,MAAM,CAAE,UAAU,CAClBC,MAAM,CAAGJ,GAAG,eACVrG,IAAA,CAACf,cAAc,EACb4I,OAAO,CAAE,CACP,CACEvC,KAAK,CAAE,cAAc,CACrBU,IAAI,CAAE,YAAY,CAClBb,OAAO,CAAEA,CAAA,GAAMzB,iBAAiB,CAAC,KAAK,CAAE2C,GAAG,CAC7C,CAAC,CACD,CACEf,KAAK,CAAE,QAAQ,CACfU,IAAI,CAAE,aAAa,CACnBb,OAAO,CAAEA,CAAA,GAAMzB,iBAAiB,CAAC,QAAQ,CAAE2C,GAAG,CAChD,CAAC,CACD,CACH,CAEL,CAAC,CACD,CACF9F,OAAO,CAAEA,OAAQ,CAClB,CAAC,EACC,CAAC,CACD,CAAC,EACC,CAAC,cAGVP,IAAA,CAAC8H,qBAAqB,EACpBC,MAAM,CAAE5G,SAAS,CAAC4G,MAAO,CACzBC,OAAO,CAAE7G,SAAS,CAAC8G,UAAW,CAC9B5F,YAAY,CAAElB,SAAS,CAAC+G,SAAU,CAClCC,gBAAgB,CAAEA,CAAA,GAAM,CACtB;AACA5G,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAEL,SAAS,CAAC+G,SAAS,CAAC,CACxE,CAAE,CACH,CAAC,cAEFlI,IAAA,CAACoI,qBAAqB,EACpBL,MAAM,CAAE3G,SAAS,CAAC2G,MAAO,CACzBC,OAAO,CAAE5G,SAAS,CAAC6G,UAAW,CAC9B5F,YAAY,CAAEjB,SAAS,CAAC8G,SAAU,CAClCG,YAAY,CAAE/G,iBAAkB,CACjC,CAAC,cAEFtB,IAAA,CAACsI,uBAAuB,EACtBP,MAAM,CAAE1G,WAAW,CAAC0G,MAAO,CAC3BC,OAAO,CAAE3G,WAAW,CAAC4G,UAAW,CAChCM,OAAO,CAAEjH,iBAAkB,CAC5B,CAAC,EACa,CAAC,CAEtB,CAAC,CAAC,CAEF;AACA,KAAM,CAAAwG,qBAAqB,CAAGU,IAAA,EAAyD,KAAAC,kBAAA,IAAxD,CAAEV,MAAM,CAAEC,OAAO,CAAE3F,YAAY,CAAE8F,gBAAiB,CAAC,CAAAK,IAAA,CAChF,KAAM,CAACE,UAAU,CAAEC,aAAa,CAAC,CAAGnK,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACoK,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGrK,QAAQ,CAAC,KAAK,CAAC,CAEjE,KAAM,CAAAsK,cAAc,CAAGnK,WAAW,CAAC,SAAY,CAC7C,GAAI,EAAC0D,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEkB,EAAE,GAAI,EAAClB,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAEiE,eAAe,EAAE,OAEzD,GAAI,CACFuC,oBAAoB,CAAC,IAAI,CAAC,CAC1B,KAAM,CAAAE,cAAc,CAAG1G,YAAY,CAACkB,EAAE,EAAIlB,YAAY,CAACiE,eAAe,CACtE,KAAM,CAAA7E,MAAM,CAAG,KAAM,CAAA5C,SAAS,CAACmK,2BAA2B,CAACD,cAAc,CAAC,CAE1E,GAAItH,MAAM,CAACE,IAAI,EAAIC,KAAK,CAACC,OAAO,CAACJ,MAAM,CAACE,IAAI,CAAC,CAAE,CAC7CgH,aAAa,CAAClH,MAAM,CAACE,IAAI,CAAC,CAC5B,CAAC,IAAM,CACLgH,aAAa,CAAC,EAAE,CAAC,CACnB,CACF,CAAE,MAAOzG,GAAG,CAAE,CACZX,OAAO,CAACd,KAAK,CAAC,2BAA2B,CAAEyB,GAAG,CAAC,CAC/CyG,aAAa,CAAC,EAAE,CAAC,CACnB,CAAC,OAAS,CACRE,oBAAoB,CAAC,KAAK,CAAC,CAC7B,CACF,CAAC,CAAE,CAACxG,YAAY,CAAC,CAAC,CAElB5D,SAAS,CAAC,IAAM,CACd,GAAIsJ,MAAM,EAAI1F,YAAY,CAAE,CAC1ByG,cAAc,CAAC,CAAC,CAClB,CACF,CAAC,CAAE,CAACf,MAAM,CAAE1F,YAAY,CAAEyG,cAAc,CAAC,CAAC,CAE1C,GAAI,CAACzG,YAAY,CAAE,MAAO,KAAI,CAE9B,KAAM,CAAAqE,cAAc,CAAGrE,YAAY,CAACsE,OAAO,EAAItE,YAAY,CAACuE,SAAS,IAAAxC,MAAA,CAC9D/B,YAAY,CAACsE,OAAO,MAAAvC,MAAA,CAAI/B,YAAY,CAACuE,SAAS,EACjDvE,YAAY,CAACiC,MAAM,EAAI,KAAK,CAEhC,KAAM,CAAAC,IAAI,CAAG,CAAC,IAAM,CAClB,GAAIlC,YAAY,CAAC2E,gBAAgB,CAAE,CACjC,KAAM,CAAAC,SAAS,CAAG,GAAI,CAAAhD,IAAI,CAAC5B,YAAY,CAAC2E,gBAAgB,CAAC,CACzD,KAAM,CAAAE,KAAK,CAAG,GAAI,CAAAjD,IAAI,CAAC,CAAC,CACxB,GAAI,CAAAkD,GAAG,CAAGD,KAAK,CAACE,WAAW,CAAC,CAAC,CAAGH,SAAS,CAACG,WAAW,CAAC,CAAC,CACvD,KAAM,CAAAC,SAAS,CAAGH,KAAK,CAACI,QAAQ,CAAC,CAAC,CAAGL,SAAS,CAACK,QAAQ,CAAC,CAAC,CACzD,GAAID,SAAS,CAAG,CAAC,EAAKA,SAAS,GAAK,CAAC,EAAIH,KAAK,CAACK,OAAO,CAAC,CAAC,CAAGN,SAAS,CAACM,OAAO,CAAC,CAAE,CAAE,CAC/EJ,GAAG,EAAE,CACP,CACA,MAAO,CAAAA,GAAG,CACZ,CACA,MAAO,CAAA9E,YAAY,CAACkC,IAAI,EAAI,KAAK,CACnC,CAAC,EAAE,CAAC,CAEJ,KAAM,CAAA0E,WAAW,CAAG5G,YAAY,CAACpB,MAAM,GAAK,QAAQ,EAAIoB,YAAY,CAACpB,MAAM,GAAK,QAAQ,CAAG,QAAQ,CAAG,UAAU,CAChH,KAAM,CAAAiI,WAAW,CAAG7G,YAAY,CAACpB,MAAM,GAAK,QAAQ,EAAIoB,YAAY,CAACpB,MAAM,GAAK,QAAQ,CACpF,6BAA6B,CAC7B,yBAAyB,CAE7B,mBACEjB,IAAA,CAACV,gBAAgB,EACfyI,MAAM,CAAEA,MAAO,CACfC,OAAO,CAAEA,OAAQ,CACjBnD,KAAK,CAAC,2BAA2B,CACjClD,IAAI,CAAE,CACJ,CAAE2D,KAAK,CAAE,iBAAiB,CAAEE,KAAK,CAAEkB,cAAe,CAAC,CACnD,CAAEpB,KAAK,CAAE,mBAAmB,CAAEE,KAAK,CAAEnD,YAAY,CAACyE,cAAc,EAAI,KAAM,CAAC,CAC3E,CAAExB,KAAK,CAAE,qBAAqB,CAAEE,KAAK,CAAEnD,YAAY,CAACgB,gBAAgB,EAAI,KAAM,CAAC,CAC/E,CAAEiC,KAAK,CAAE,MAAM,CAAEE,KAAK,CAAE,MAAO,CAAAjB,IAAI,GAAK,QAAQ,IAAAH,MAAA,CAAMG,IAAI,aAAUA,IAAK,CAAC,CAC1E,CAAEe,KAAK,CAAE,qBAAqB,CAAEE,KAAK,CAAEnD,YAAY,CAAC2E,gBAAgB,CAChE,GAAI,CAAA/C,IAAI,CAAC5B,YAAY,CAAC2E,gBAAgB,CAAC,CAAC9C,kBAAkB,CAAC,OAAO,CAAC,CACnE,KACJ,CAAC,CACD,CAAEoB,KAAK,CAAE,QAAQ,CAAEE,KAAK,CAAEnD,YAAY,CAACrB,MAAM,GAAK,WAAW,CAAG,WAAW,CAAGqB,YAAY,CAACrB,MAAM,GAAK,UAAU,CAAG,UAAU,CAAG,KAAM,CAAC,CACvI,CAAEsE,KAAK,CAAE,kBAAkB,CAAEE,KAAK,CAAEnD,YAAY,CAACmF,aAAa,CAC1D,GAAI,CAAAvD,IAAI,CAAC5B,YAAY,CAACmF,aAAa,CAAC,CAACtD,kBAAkB,CAAC,OAAO,CAAC,CAChE,KACJ,CAAC,CACD,CAAEoB,KAAK,CAAE,MAAM,CAAEE,KAAK,CAAE,EAAAiD,kBAAA,CAAApG,YAAY,CAACtB,IAAI,UAAA0H,kBAAA,iBAAjBA,kBAAA,CAAmB3F,SAAS,GAAIT,YAAY,CAACtB,IAAI,EAAI,KAAM,CAAC,CACpF,CAAEuE,KAAK,CAAE,UAAU,CAAEE,KAAK,CAAEnD,YAAY,CAACmC,QAAQ,EAAI,KAAM,CAAC,CAC5D,CACEc,KAAK,CAAE,QAAQ,CACfE,KAAK,cACHxF,IAAA,SAAMiF,SAAS,6DAAAb,MAAA,CAA8D8E,WAAW,CAAG,CAAAlE,QAAA,CACxFiE,WAAW,CACR,CAEV,CAAC,CACD,CACE3D,KAAK,CAAE,YAAY,CACnBE,KAAK,cACHxF,IAAA,QAAKiF,SAAS,CAAC,MAAM,CAAAD,QAAA,CAClB4D,iBAAiB,cAChB5I,IAAA,MAAGiF,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAC,wBAAsB,CAAG,CAAC,CAC7D0D,UAAU,CAACzG,MAAM,CAAG,CAAC,cACvB/B,KAAA,QAAK+E,SAAS,CAAC,WAAW,CAAAD,QAAA,EACvB0D,UAAU,CAACrE,GAAG,CAAC,CAAC8E,SAAS,CAAEC,KAAK,gBAC/BpJ,IAAA,QAA2CiF,SAAS,CAAC,kDAAkD,CAAAD,QAAA,cACrGhF,IAAA,QAAKiF,SAAS,CAAC,kCAAkC,CAAAD,QAAA,cAC/C9E,KAAA,QAAA8E,QAAA,eACE9E,KAAA,MAAG+E,SAAS,CAAC,mCAAmC,CAAAD,QAAA,EAC7CmE,SAAS,CAACxC,OAAO,CAAC,GAAC,CAACwC,SAAS,CAACvC,SAAS,EACvC,CAAC,cACJ1G,KAAA,MAAG+E,SAAS,CAAC,uBAAuB,CAAAD,QAAA,EACjCmE,SAAS,CAACE,UAAU,CAAC,UAAG,CAACF,SAAS,CAACrC,cAAc,CAAC,GAAC,CAACqC,SAAS,CAAC9F,gBAAgB,EAC9E,CAAC,cACJnD,KAAA,MAAG+E,SAAS,CAAC,4BAA4B,CAAAD,QAAA,eACvChF,IAAA,MAAGiF,SAAS,CAAC,mBAAmB,CAAI,CAAC,CAACkE,SAAS,CAAC3E,QAAQ,CACvD2E,SAAS,CAACG,KAAK,eACdpJ,KAAA,SAAM+E,SAAS,CAAC,MAAM,CAAAD,QAAA,eACpBhF,IAAA,MAAGiF,SAAS,CAAC,sBAAsB,CAAI,CAAC,CAACkE,SAAS,CAACG,KAAK,EACpD,CACP,EACA,CAAC,EACD,CAAC,CACH,CAAC,EAlBEH,SAAS,CAACI,YAAY,EAAIH,KAmB/B,CACN,CAAC,cACFlJ,KAAA,WACEiF,OAAO,CAAEgD,gBAAiB,CAC1BlD,SAAS,CAAC,4DAA4D,CAAAD,QAAA,eAEtEhF,IAAA,MAAGiF,SAAS,CAAC,kBAAkB,CAAI,CAAC,yBAEtC,EAAQ,CAAC,EACN,CAAC,cAEN/E,KAAA,QAAK+E,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/BhF,IAAA,MAAGiF,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CAAC,+BAA6B,CAAG,CAAC,cAC3E9E,KAAA,WACEiF,OAAO,CAAEgD,gBAAiB,CAC1BlD,SAAS,CAAC,uDAAuD,CAAAD,QAAA,eAEjEhF,IAAA,MAAGiF,SAAS,CAAC,kBAAkB,CAAI,CAAC,oBAEtC,EAAQ,CAAC,EACN,CACN,CACE,CAET,CAAC,CACD,CACH,CAAC,CAEN,CAAC,CAED;AACA,KAAM,CAAAmD,qBAAqB,CAAGoB,KAAA,EAAqD,KAAAC,oBAAA,CAAAC,qBAAA,IAApD,CAAE3B,MAAM,CAAEC,OAAO,CAAE3F,YAAY,CAAEgG,YAAa,CAAC,CAAAmB,KAAA,CAC5E,GAAI,CAACnH,YAAY,CAAE,MAAO,KAAI,CAE9B,KAAM,CAAAsH,YAAY,CAAG,KAAO,CAAAC,QAAQ,EAAK,KAAAC,iBAAA,CAAAC,mBAAA,CACvCvI,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEoI,QAAQ,CAAC,CAEtD;AACA,GAAI,CAACA,QAAQ,CAAC9C,cAAc,EAAI,CAAC8C,QAAQ,CAACvG,gBAAgB,CAAE,CAC1D,KAAM,IAAI,CAAAvB,KAAK,CAAC,2CAA2C,CAAC,CAC9D,CACA,GAAI,GAAA+H,iBAAA,CAACD,QAAQ,CAACjD,OAAO,UAAAkD,iBAAA,WAAhBA,iBAAA,CAAkBE,IAAI,CAAC,CAAC,GAAI,GAAAD,mBAAA,CAACF,QAAQ,CAAChD,SAAS,UAAAkD,mBAAA,WAAlBA,mBAAA,CAAoBC,IAAI,CAAC,CAAC,EAAE,CAC5D,KAAM,IAAI,CAAAjI,KAAK,CAAC,oCAAoC,CAAC,CACvD,CACA,GAAI,CAAC8H,QAAQ,CAAC5C,gBAAgB,EAAI,CAAC4C,QAAQ,CAACpC,aAAa,CAAE,CACzD,KAAM,IAAI,CAAA1F,KAAK,CAAC,+CAA+C,CAAC,CAClE,CACA,GAAI,CAAC8H,QAAQ,CAACI,OAAO,CAAE,CACrB,KAAM,IAAI,CAAAlI,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA;AACA,KAAM,CAAAmI,yBAAyB,CAAGrK,uBAAuB,CAACgK,QAAQ,CAAC5C,gBAAgB,CAAC,CACpF,GAAI,CAACiD,yBAAyB,CAACC,OAAO,CAAE,CACtC,KAAM,IAAI,CAAApI,KAAK,CAACmI,yBAAyB,CAACxJ,KAAK,CAAC,CAClD,CAEA;AACA,KAAM,CAAA0J,sBAAsB,CAAGtK,oBAAoB,CAAC+J,QAAQ,CAACpC,aAAa,CAAC,CAC3E,GAAI,CAAC2C,sBAAsB,CAACD,OAAO,CAAE,CACnC,KAAM,IAAI,CAAApI,KAAK,CAACqI,sBAAsB,CAAC1J,KAAK,CAAC,CAC/C,CAEA;AACA,KAAM,CAAAsI,cAAc,CAAG1G,YAAY,CAACkB,EAAE,EAAIlB,YAAY,CAACiE,eAAe,CACtE,KAAM,CAAA8D,mBAAmB,CAAG,KAAM,CAAAzK,kCAAkC,CAACiK,QAAQ,CAACvG,gBAAgB,CAAE0F,cAAc,CAAC,CAC/G,GAAI,CAACqB,mBAAmB,CAACF,OAAO,CAAE,CAChC,KAAM,IAAI,CAAApI,KAAK,CAACsI,mBAAmB,CAAC3J,KAAK,CAAC,CAC5C,CAEA;AACA,KAAM,CAAA4J,cAAc,CAAG,KAAM,CAAAvK,kBAAkB,CAAC8J,QAAQ,CAACI,OAAO,CAAC,CACjE,GAAI,CAACK,cAAc,CAACH,OAAO,CAAE,CAC3B,KAAM,IAAI,CAAApI,KAAK,CAACuI,cAAc,CAAC5J,KAAK,CAAC,CACvC,CAEA,KAAM,CAAAgB,MAAM,CAAG,KAAM,CAAA5C,SAAS,CAAC4E,kBAAkB,CAACsF,cAAc,CAAEa,QAAQ,CAAC,CAE3E,GAAInI,MAAM,CAAChB,KAAK,CAAE,CAChB,KAAM,IAAI,CAAAqB,KAAK,CAACL,MAAM,CAAChB,KAAK,CAACsB,OAAO,EAAI,kCAAkC,CAAC,CAC7E,CAEAR,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC,CACtD6G,YAAY,CAAC,CAAC,CAChB,CAAC,CAED,mBACErI,IAAA,CAACT,aAAa,EACZwI,MAAM,CAAEA,MAAO,CACfC,OAAO,CAAEA,OAAQ,CACjBnD,KAAK,CAAC,qBAAqB,CAC3ByF,WAAW,CAAE,CACXxD,cAAc,CAAEzE,YAAY,CAACyE,cAAc,EAAI,IAAI,CACnDzD,gBAAgB,CAAEhB,YAAY,CAACgB,gBAAgB,EAAI,EAAE,CACrDsD,OAAO,CAAEtE,YAAY,CAACsE,OAAO,IAAA8C,oBAAA,CAAIpH,YAAY,CAACiC,MAAM,UAAAmF,oBAAA,iBAAnBA,oBAAA,CAAqBc,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAI,EAAE,CACzE3D,SAAS,CAAEvE,YAAY,CAACuE,SAAS,IAAA8C,qBAAA,CAAIrH,YAAY,CAACiC,MAAM,UAAAoF,qBAAA,iBAAnBA,qBAAA,CAAqBa,KAAK,CAAC,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC/F,IAAI,CAAC,GAAG,CAAC,GAAI,EAAE,CAC7FuC,gBAAgB,CAAE3E,YAAY,CAAC2E,gBAAgB,EAAI,EAAE,CACrDhG,MAAM,CAAEqB,YAAY,CAACrB,MAAM,EAAI,WAAW,CAC1CwG,aAAa,CAAEnF,YAAY,CAACmF,aAAa,EAAI,EAAE,CAC/CvG,MAAM,CAAEoB,YAAY,CAACpB,MAAM,EAAI,QAAQ,CACvC+I,OAAO,CAAE3H,YAAY,CAAC2H,OAAO,EAAI3H,YAAY,CAACoI,OAAO,EAAI,EAC3D,CAAE,CACFC,QAAQ,CAAEf,YAAa,CACvBgB,WAAW,CAAC,iBAAiB,CAAA3F,QAAA,CAE5B4F,KAAA,MAAC,CAAEhB,QAAQ,CAAEiB,YAAY,CAAEC,MAAO,CAAC,CAAAF,KAAA,oBAClC5K,IAAA,CAAC+K,gBAAgB,EACfnB,QAAQ,CAAEA,QAAS,CACnBiB,YAAY,CAAEA,YAAa,CAC3BC,MAAM,CAAEA,MAAO,CAChB,CAAC,EACH,CACY,CAAC,CAEpB,CAAC,CAED;AACA,KAAM,CAAAxC,uBAAuB,CAAG0C,KAAA,EAAkC,IAAjC,CAAEjD,MAAM,CAAEC,OAAO,CAAEO,OAAQ,CAAC,CAAAyC,KAAA,CAC3D,KAAM,CAAArB,YAAY,CAAG,KAAO,CAAAC,QAAQ,EAAK,KAAAqB,kBAAA,CAAAC,oBAAA,CACvC3J,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEoI,QAAQ,CAAC,CAEjD;AACA,GAAI,CAACA,QAAQ,CAAC9C,cAAc,EAAI,CAAC8C,QAAQ,CAACvG,gBAAgB,CAAE,CAC1D,KAAM,IAAI,CAAAvB,KAAK,CAAC,2CAA2C,CAAC,CAC9D,CACA,GAAI,GAAAmJ,kBAAA,CAACrB,QAAQ,CAACjD,OAAO,UAAAsE,kBAAA,WAAhBA,kBAAA,CAAkBlB,IAAI,CAAC,CAAC,GAAI,GAAAmB,oBAAA,CAACtB,QAAQ,CAAChD,SAAS,UAAAsE,oBAAA,WAAlBA,oBAAA,CAAoBnB,IAAI,CAAC,CAAC,EAAE,CAC5D,KAAM,IAAI,CAAAjI,KAAK,CAAC,oCAAoC,CAAC,CACvD,CACA,GAAI,CAAC8H,QAAQ,CAAC5C,gBAAgB,EAAI,CAAC4C,QAAQ,CAACpC,aAAa,CAAE,CACzD,KAAM,IAAI,CAAA1F,KAAK,CAAC,+CAA+C,CAAC,CAClE,CACA,GAAI,CAAC8H,QAAQ,CAACI,OAAO,CAAE,CACrB,KAAM,IAAI,CAAAlI,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA;AACA,KAAM,CAAAmI,yBAAyB,CAAGrK,uBAAuB,CAACgK,QAAQ,CAAC5C,gBAAgB,CAAC,CACpF,GAAI,CAACiD,yBAAyB,CAACC,OAAO,CAAE,CACtC,KAAM,IAAI,CAAApI,KAAK,CAACmI,yBAAyB,CAACxJ,KAAK,CAAC,CAClD,CAEA;AACA,KAAM,CAAA0J,sBAAsB,CAAGtK,oBAAoB,CAAC+J,QAAQ,CAACpC,aAAa,CAAC,CAC3E,GAAI,CAAC2C,sBAAsB,CAACD,OAAO,CAAE,CACnC,KAAM,IAAI,CAAApI,KAAK,CAACqI,sBAAsB,CAAC1J,KAAK,CAAC,CAC/C,CAEA;AACA,KAAM,CAAA2J,mBAAmB,CAAG,KAAM,CAAAzK,kCAAkC,CAACiK,QAAQ,CAACvG,gBAAgB,CAAC,CAC/F,GAAI,CAAC+G,mBAAmB,CAACF,OAAO,CAAE,CAChC,KAAM,IAAI,CAAApI,KAAK,CAACsI,mBAAmB,CAAC3J,KAAK,CAAC,CAC5C,CAEA;AACA,KAAM,CAAA4J,cAAc,CAAG,KAAM,CAAAvK,kBAAkB,CAAC8J,QAAQ,CAACI,OAAO,CAAC,CACjE,GAAI,CAACK,cAAc,CAACH,OAAO,CAAE,CAC3B,KAAM,IAAI,CAAApI,KAAK,CAACuI,cAAc,CAAC5J,KAAK,CAAC,CACvC,CAEA,KAAM,CAAAgB,MAAM,CAAG,KAAM,CAAA5C,SAAS,CAACsM,kBAAkB,CAACvB,QAAQ,CAAC,CAE3D,GAAInI,MAAM,CAAChB,KAAK,CAAE,CAChB,KAAM,IAAI,CAAAqB,KAAK,CAACL,MAAM,CAAChB,KAAK,CAACsB,OAAO,EAAI,6BAA6B,CAAC,CACxE,CAEAR,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC,CACjD+G,OAAO,CAAC,CAAC,CACX,CAAC,CAED,mBACEvI,IAAA,CAACR,eAAe,EACduI,MAAM,CAAEA,MAAO,CACfC,OAAO,CAAEA,OAAQ,CACjBnD,KAAK,CAAC,oBAAoB,CAC1BuG,aAAa,CAAE,CACbtE,cAAc,CAAE,IAAI,CACpBzD,gBAAgB,CAAE,EAAE,CACpBsD,OAAO,CAAE,EAAE,CACXC,SAAS,CAAE,EAAE,CACbI,gBAAgB,CAAE,EAAE,CACpBhG,MAAM,CAAE,WAAW,CACnBwG,aAAa,CAAE,EAAE,CACjBvG,MAAM,CAAE,QAAQ,CAChB+I,OAAO,CAAE,EACX,CAAE,CACFU,QAAQ,CAAEf,YAAa,CACvBgB,WAAW,CAAC,oBAAoB,CAAA3F,QAAA,CAE/BqG,KAAA,MAAC,CAAEzB,QAAQ,CAAEiB,YAAY,CAAEC,MAAO,CAAC,CAAAO,KAAA,oBAClCrL,IAAA,CAAC+K,gBAAgB,EACfnB,QAAQ,CAAEA,QAAS,CACnBiB,YAAY,CAAEA,YAAa,CAC3BC,MAAM,CAAEA,MAAO,CAChB,CAAC,EACH,CACc,CAAC,CAEtB,CAAC,CAED;AACA,KAAM,CAAAC,gBAAgB,CAAGO,KAAA,EAAwC,IAAvC,CAAE1B,QAAQ,CAAEiB,YAAY,CAAEC,MAAO,CAAC,CAAAQ,KAAA,CAC1D,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGhN,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACiN,YAAY,CAAEC,eAAe,CAAC,CAAGlN,QAAQ,CAAC,IAAI,CAAC,CAEtDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkN,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACFD,eAAe,CAAC,IAAI,CAAC,CACrB,KAAM,CAAAjK,MAAM,CAAG,KAAM,CAAA5C,SAAS,CAAC+M,QAAQ,CAAC,CAAC,CACzC,GAAInK,MAAM,CAACE,IAAI,EAAIC,KAAK,CAACC,OAAO,CAACJ,MAAM,CAACE,IAAI,CAAC,CAAE,CAC7C6J,QAAQ,CAAC/J,MAAM,CAACE,IAAI,CAAC,CACvB,CACF,CAAE,MAAOO,GAAG,CAAE,CACZX,OAAO,CAACd,KAAK,CAAC,sBAAsB,CAAEyB,GAAG,CAAC,CAC5C,CAAC,OAAS,CACRwJ,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CACDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEzL,KAAA,CAACb,SAAS,EAAC6G,OAAO,CAAE,CAAE,CAACC,GAAG,CAAC,IAAI,CAAAnB,QAAA,eAC7BhF,IAAA,CAACZ,UAAU,EACTkG,KAAK,CAAC,mBAAmB,CACzBD,IAAI,CAAC,gBAAgB,CACrBG,KAAK,CAAEoE,QAAQ,CAAC9C,cAAe,CAC/BlB,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,gBAAgB,CAAErF,KAAK,CAAE,CAC3DD,OAAO,CAAE,CACP,CAAEC,KAAK,CAAE,IAAI,CAAEF,KAAK,CAAE,sBAAuB,CAAC,CAC9C,CAAEE,KAAK,CAAE,IAAI,CAAEF,KAAK,CAAE,sBAAuB,CAAC,CAC9C,CAAEE,KAAK,CAAE,IAAI,CAAEF,KAAK,CAAE,uBAAwB,CAAC,CAC/C,CAAEE,KAAK,CAAE,WAAW,CAAEF,KAAK,CAAE,WAAY,CAAC,CAC1C,CACF7E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEhE,cAAe,CAC9B+E,QAAQ,MACT,CAAC,cAEF7L,IAAA,CAACb,SAAS,EACRmG,KAAK,CAAC,wBAAqB,CAC3BD,IAAI,CAAC,kBAAkB,CACvBD,IAAI,CAAC,MAAM,CACXI,KAAK,CAAEoE,QAAQ,CAACvG,gBAAiB,CACjCuC,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,kBAAkB,CAAErF,KAAK,CAAE,CAC7D/E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEzH,gBAAiB,CAChCwI,QAAQ,MACRpG,WAAW,CAAC,mCAAgC,CAC7C,CAAC,cAEFzF,IAAA,CAACb,SAAS,EACRmG,KAAK,CAAC,SAAS,CACfD,IAAI,CAAC,SAAS,CACdD,IAAI,CAAC,MAAM,CACXI,KAAK,CAAEoE,QAAQ,CAACjD,OAAQ,CACxBf,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,SAAS,CAAErF,KAAK,CAAE,CACpD/E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEnE,OAAQ,CACvBkF,QAAQ,MACRpG,WAAW,CAAC,qBAAqB,CAClC,CAAC,cAEFzF,IAAA,CAACb,SAAS,EACRmG,KAAK,CAAC,WAAW,CACjBD,IAAI,CAAC,WAAW,CAChBD,IAAI,CAAC,MAAM,CACXI,KAAK,CAAEoE,QAAQ,CAAChD,SAAU,CAC1BhB,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,WAAW,CAAErF,KAAK,CAAE,CACtD/E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAElE,SAAU,CACzBiF,QAAQ,MACRpG,WAAW,CAAC,uBAAuB,CACpC,CAAC,cAEFzF,IAAA,CAACb,SAAS,EACRmG,KAAK,CAAC,qBAAqB,CAC3BD,IAAI,CAAC,kBAAkB,CACvBD,IAAI,CAAC,MAAM,CACXI,KAAK,CAAEoE,QAAQ,CAAC5C,gBAAiB,CACjCpB,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,kBAAkB,CAAErF,KAAK,CAAE,CAC7D/E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAE9D,gBAAiB,CAChC6E,QAAQ,MACT,CAAC,cAEF7L,IAAA,CAACZ,UAAU,EACTkG,KAAK,CAAC,WAAQ,CACdD,IAAI,CAAC,QAAQ,CACbG,KAAK,CAAEoE,QAAQ,CAAC5I,MAAO,CACvB4E,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,QAAQ,CAAErF,KAAK,CAAE,CACnDD,OAAO,CAAE,CACP,CAAEC,KAAK,CAAE,WAAW,CAAEF,KAAK,CAAE,WAAY,CAAC,CAC1C,CAAEE,KAAK,CAAE,UAAU,CAAEF,KAAK,CAAE,UAAW,CAAC,CACxC,CACF7E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAE9J,MAAO,CACtB6K,QAAQ,MACT,CAAC,cAEF7L,IAAA,CAACb,SAAS,EACRmG,KAAK,CAAC,kBAAkB,CACxBD,IAAI,CAAC,eAAe,CACpBD,IAAI,CAAC,MAAM,CACXI,KAAK,CAAEoE,QAAQ,CAACpC,aAAc,CAC9B5B,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,eAAe,CAAErF,KAAK,CAAE,CAC1D/E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEtD,aAAc,CAC7BqE,QAAQ,MACT,CAAC,cAEF7L,IAAA,CAACZ,UAAU,EACTkG,KAAK,CAAC,QAAQ,CACdD,IAAI,CAAC,QAAQ,CACbG,KAAK,CAAEoE,QAAQ,CAAC3I,MAAO,CACvB2E,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,QAAQ,CAAErF,KAAK,CAAE,CACnDD,OAAO,CAAE,CACP,CAAEC,KAAK,CAAE,QAAQ,CAAEF,KAAK,CAAE,QAAS,CAAC,CACpC,CAAEE,KAAK,CAAE,UAAU,CAAEF,KAAK,CAAE,UAAW,CAAC,CACxC,CACF7E,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAE7J,MAAO,CACtB4K,QAAQ,MACT,CAAC,cAEF7L,IAAA,CAACZ,UAAU,EACTkG,KAAK,CAAC,MAAM,CACZD,IAAI,CAAC,SAAS,CACdG,KAAK,CAAEoE,QAAQ,CAACI,OAAQ,CACxBpE,QAAQ,CAAGJ,KAAK,EAAKqF,YAAY,CAAC,SAAS,CAAErF,KAAK,CAAE,CACpDD,OAAO,CAAEkG,YAAY,CAAG,CAAC,CAAEjG,KAAK,CAAE,EAAE,CAAEF,KAAK,CAAE,mBAAoB,CAAC,CAAC,CAAGiG,KAAK,CAAClH,GAAG,CAACtD,IAAI,GAAK,CACvFyE,KAAK,CAAEzE,IAAI,CAACiJ,OAAO,EAAIjJ,IAAI,CAACwC,EAAE,CAC9B+B,KAAK,CAAEvE,IAAI,CAAC+B,SAAS,EAAI/B,IAAI,CAACuD,MAChC,CAAC,CAAC,CAAE,CACJ7D,KAAK,CAAEqK,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEd,OAAQ,CACvB6B,QAAQ,MACRC,QAAQ,CAAEL,YAAa,CACxB,CAAC,EACO,CAAC,CAEhB,CAAC,CAED,cAAe,CAAAtL,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}