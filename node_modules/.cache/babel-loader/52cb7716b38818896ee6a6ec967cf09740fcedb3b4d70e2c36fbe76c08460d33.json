{"ast":null,"code":"var _jsxFileName = \"/Users/todoporunalma/Desktop/ol/corporacion_react/src/pages/Dashboard/Usuarios.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService, ROLES } from \"shared/services\";\nimport { FilterBar } from \"components/UI/Filter\";\nimport { StatsGrid } from \"components/UI/Card\";\nimport { DataTable, ActionDropdown } from \"components/UI/Table\";\nimport { ViewDetailsModal, EditFormModal, CreateFormModal } from \"components/common/CRUDModals\";\nimport { useFilters, useModal } from \"shared/hooks\";\nimport { validateEmail } from \"shared/utils/validationUtils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UsuariosComponent = () => {\n  _s();\n  const [usuarios, setUsuarios] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [canEdit, setCanEdit] = useState(false);\n\n  // Use custom hooks\n  const {\n    filters: filtros,\n    setFilter,\n    clearFilters\n  } = useFilters({\n    rol: \"Todos\",\n    busqueda: \"\"\n  });\n  const verModal = useModal();\n  const editarModal = useModal();\n  const crearModal = useModal();\n\n  // Funci√≥n para cargar usuarios\n  const loadUsuarios = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('üîÑ Cargando usuarios...');\n      const result = await dbService.getUsuarios();\n      console.log('üìä Resultado usuarios:', result);\n      if (result.error) {\n        throw new Error(result.error.message || 'Error al cargar usuarios');\n      }\n\n      // La respuesta es {data: [...], error: null}\n      const usuariosData = Array.isArray(result.data) ? result.data : [];\n      setUsuarios(usuariosData);\n      console.log('‚úÖ Usuarios cargados:', usuariosData.length);\n    } catch (err) {\n      console.error('‚ùå Error cargando usuarios:', err);\n      setError(err.message || 'Error desconocido al cargar usuarios');\n      setUsuarios([]);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Exponer funciones globalmente para el men√∫ desplegable\n  useEffect(() => {\n    window.verModal = verModal;\n    window.editarModal = editarModal;\n    window.deleteUser = async userId => {\n      try {\n        const result = await dbService.deleteUsuario(userId);\n        if (result.error) {\n          alert('Error al eliminar usuario: ' + result.error.message);\n        } else {\n          alert('Usuario eliminado exitosamente');\n          await loadUsuarios();\n        }\n      } catch (error) {\n        alert('Error al eliminar usuario: ' + error.message);\n      }\n    };\n    return () => {\n      delete window.verModal;\n      delete window.editarModal;\n      delete window.deleteUser;\n    };\n  }, [verModal, editarModal, loadUsuarios]);\n\n  // Cargar usuario actual y verificar permisos\n  useEffect(() => {\n    const loadCurrentUser = async () => {\n      try {\n        console.log('üîê Verificando permisos de administrador...');\n        // Verificar si tiene permisos de administrador\n        const hasPermission = await dbService.hasPermission(ROLES.ADMINISTRADOR);\n        console.log('‚úÖ Permisos de administrador obtenidos:', hasPermission);\n        setCanEdit(hasPermission);\n        console.log('üéØ canEdit establecido como:', hasPermission);\n      } catch (err) {\n        console.error('‚ùå Error cargando permisos:', err);\n        setCanEdit(false);\n      }\n    };\n    loadCurrentUser();\n    loadUsuarios();\n  }, [loadUsuarios]);\n\n  // Filtrar usuarios\n  const filteredUsuarios = useMemo(() => {\n    const safeUsuarios = Array.isArray(usuarios) ? usuarios : [];\n    let filtered = safeUsuarios;\n    if (filtros.rol !== \"Todos\") {\n      filtered = filtered.filter(u => (u.rol || u.role) === filtros.rol);\n    }\n    if (filtros.busqueda) {\n      filtered = filtered.filter(u => (u.email || '').toLowerCase().includes(filtros.busqueda.toLowerCase()));\n    }\n    return filtered;\n  }, [usuarios, filtros]);\n\n  // Estad√≠sticas\n  const statsData = useMemo(() => [{\n    title: \"Total Usuarios\",\n    value: filteredUsuarios.length,\n    icon: \"fas fa-users\",\n    color: \"blue\"\n  }], [filteredUsuarios]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Usuarios\",\n      subtitle: \"Gesti\\xF3n de usuarios\",\n      loading: true,\n      loadingText: \"Cargando usuarios...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Usuarios\",\n      subtitle: \"Error al cargar datos\",\n      loading: false,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-50 border border-red-200 rounded-lg p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-600\",\n            children: [\"Error loading usuarios del sistema: \", error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Verificar permisos de acceso a la p√°gina\n  if (!canEdit) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Usuarios\",\n      subtitle: \"Acceso denegado\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center max-w-md\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-lock text-yellow-600 text-5xl mb-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-900 mb-2\",\n            children: \"Acceso Denegado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: \"No tienes permisos para acceder a esta p\\xE1gina. Solo los administradores pueden gestionar usuarios.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this);\n  }\n  const filterConfig = [{\n    type: 'select',\n    name: 'rol',\n    label: 'Rol',\n    options: [{\n      value: 'Todos',\n      label: 'Todos los Roles'\n    }, {\n      value: ROLES.ADMINISTRADOR,\n      label: 'Administrador'\n    }, {\n      value: ROLES.CONSULTA,\n      label: 'Consulta'\n    }]\n  }, {\n    type: 'search',\n    name: 'busqueda',\n    label: 'B√∫squeda',\n    placeholder: 'Buscar por email...'\n  }];\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    title: \"Gesti\\xF3n de Usuarios del sistema\",\n    subtitle: \"Administra los usuarios del sistema\",\n    extraActions: canEdit && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => crearModal.openModal(),\n      className: \"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-plus mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this), \"Nuevo Usuario\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }, this),\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"px-4 md:px-6 py-4 md:py-6\",\n      children: [/*#__PURE__*/_jsxDEV(FilterBar, {\n        filters: filterConfig,\n        values: filtros,\n        onChange: setFilter,\n        onClear: clearFilters,\n        showClearButton: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6\",\n        children: /*#__PURE__*/_jsxDEV(StatsGrid, {\n          stats: statsData,\n          columns: 3,\n          gap: \"md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-sm border border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-6 border-b border-gray-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-lg font-semibold text-gray-800\",\n                  children: \"Lista de Usuarios del sistema\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-600 mt-1\",\n                  children: \"Gestiona los usuarios del sistema\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 17\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 15\n              }, this), canEdit ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-user-shield mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 19\n                }, this), \"Modo Administrador\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-eye mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 19\n                }, this), \"Modo Solo Lectura\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 11\n          }, this), filteredUsuarios.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-12 text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-users text-gray-300 text-4xl mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-medium text-gray-900 mb-2\",\n              children: \"No se encontraron usuarios del sistema\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-500\",\n              children: \"No hay usuarios que coincidan con los filtros aplicados.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(DataTable, {\n            columns: [{\n              key: 'email',\n              header: 'Usuario',\n              render: usuario => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-user text-blue-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"min-w-0 flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-medium text-gray-900 truncate\",\n                    children: usuario.email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500 truncate\",\n                    children: [\"ID: \", usuario.id_usuario || usuario.id]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"md:hidden mt-1\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${(usuario.rol || usuario.role) === ROLES.ADMINISTRADOR || (usuario.rol || usuario.role) === 'ADMINISTRADOR' ? 'bg-purple-100 text-purple-800' : 'bg-green-100 text-green-800'}`,\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: `fas ${(usuario.rol || usuario.role) === ROLES.ADMINISTRADOR || (usuario.rol || usuario.role) === 'ADMINISTRADOR' ? 'fa-user-shield' : 'fa-user'} mr-1`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 264,\n                        columnNumber: 29\n                      }, this), (usuario.rol || usuario.role) === ROLES.ADMINISTRADOR || (usuario.rol || usuario.role) === 'ADMINISTRADOR' ? 'Admin' : 'Consulta']\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 259,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this)\n            }, {\n              key: 'rol',\n              header: 'Rol',\n              hideInMobile: true,\n              render: usuario => {\n                const userRole = usuario.rol || usuario.role;\n                return /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'bg-purple-100 text-purple-800' : 'bg-green-100 text-green-800'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: `fas ${userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'fa-user-shield' : 'fa-user'} mr-2`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 25\n                  }, this), userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'Administrador' : 'Consulta']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 23\n                }, this);\n              }\n            }, {\n              key: 'acciones',\n              header: 'Acciones',\n              render: usuario => {\n                console.log('üîç Renderizando acciones para usuario:', usuario.email, 'canEdit:', canEdit);\n                if (canEdit) {\n                  console.log('üéØ Renderizando ActionDropdown para:', usuario.email);\n                  const userRole = usuario.rol || usuario.role;\n                  const isAdmin = userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR';\n                  if (isAdmin) {\n                    return /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-gray-500 font-medium px-2 py-1 bg-gray-100 rounded whitespace-nowrap\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-shield-alt mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 308,\n                        columnNumber: 29\n                      }, this), \"Protegido\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 307,\n                      columnNumber: 27\n                    }, this);\n                  }\n                  return /*#__PURE__*/_jsxDEV(ActionDropdown, {\n                    actions: [{\n                      label: 'Editar',\n                      icon: 'fas fa-edit',\n                      onClick: () => {\n                        console.log('‚úèÔ∏è Editar usuario:', usuario.email);\n                        editarModal.openModal('edit', usuario);\n                      }\n                    }, {\n                      label: 'Eliminar',\n                      icon: 'fas fa-trash',\n                      variant: 'danger',\n                      onClick: () => {\n                        console.log('üóëÔ∏è Eliminar usuario:', usuario.email);\n                        if (window.confirm('¬øEst√°s seguro de que quieres eliminar este usuario?')) {\n                          window.deleteUser && window.deleteUser(usuario.id_usuario || usuario.id);\n                        }\n                      }\n                    }]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 25\n                  }, this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        console.log('üëÅÔ∏è Abriendo modal de solo lectura para:', usuario.email);\n                        verModal.openModal('view', usuario);\n                      },\n                      className: \"text-blue-600 hover:text-blue-800 text-xs sm:text-sm font-medium whitespace-nowrap flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-eye mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 349,\n                        columnNumber: 29\n                      }, this), \"Ver\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 342,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-xs text-yellow-600 font-medium whitespace-nowrap flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fas fa-lock mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 353,\n                        columnNumber: 29\n                      }, this), \"Solo Lectura\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 352,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 25\n                  }, this);\n                }\n              }\n            }],\n            data: filteredUsuarios,\n            keyExtractor: usuario => usuario.id_usuario || usuario.id,\n            loading: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ViewDetailsModal, {\n      isOpen: verModal.isOpen,\n      onClose: verModal.closeModal,\n      title: \"Detalles del Usuario del sistema\",\n      data: verModal.modalData ? [{\n        label: 'ID',\n        value: verModal.modalData.id_usuario || verModal.modalData.id\n      }, {\n        label: 'Email',\n        value: verModal.modalData.email\n      }, {\n        label: 'Contrase√±a',\n        value: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',\n        helperText: 'La contrase√±a est√° oculta por seguridad'\n      }, {\n        label: 'Rol',\n        value: (() => {\n          const rol = verModal.modalData.rol || verModal.modalData.role;\n          // Comparaci√≥n m√°s robusta\n          if (rol === ROLES.ADMINISTRADOR || rol === 'ADMINISTRADOR') {\n            return 'Administrador';\n          }\n          return 'Consulta';\n        })()\n      }, {\n        label: 'Fecha de creaci√≥n',\n        value: new Date(verModal.modalData.created_at).toLocaleString('es-ES')\n      }, {\n        label: '√öltima actualizaci√≥n',\n        value: new Date(verModal.modalData.updated_at).toLocaleString('es-ES')\n      }] : []\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditFormModal, {\n      isOpen: editarModal.isOpen,\n      onClose: editarModal.closeModal,\n      title: \"Editar Usuario del sistema\",\n      onSubmit: async formData => {\n        // Validar email\n        const emailValidation = validateEmail(formData.email);\n        if (!emailValidation.isValid) {\n          throw new Error(emailValidation.error);\n        }\n\n        // Validar rol\n        if (!formData.rol || formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA') {\n          throw new Error('Rol inv√°lido');\n        }\n\n        // Si no se proporciona password, no lo incluimos en la actualizaci√≥n\n        const updateData = {\n          email: formData.email,\n          role: formData.rol // El backend espera 'role', no 'rol'\n        };\n        if (formData.password && formData.password.trim()) {\n          if (formData.password.length < 8) {\n            throw new Error('La contrase√±a debe tener al menos 8 caracteres');\n          }\n          updateData.password = formData.password;\n        }\n        const result = await dbService.updateUsuario(editarModal.modalData.id_usuario || editarModal.modalData.id, updateData);\n        if (result.error) {\n          throw new Error(result.error.message || 'Error al actualizar usuario');\n        }\n        await loadUsuarios();\n      },\n      initialData: editarModal.modalData ? {\n        email: editarModal.modalData.email,\n        password: '',\n        rol: editarModal.modalData.rol || editarModal.modalData.role\n      } : {\n        email: '',\n        password: '',\n        rol: ROLES.CONSULTA\n      },\n      fields: [{\n        name: 'email',\n        label: 'Email',\n        type: 'email',\n        required: true,\n        placeholder: 'usuario@ejemplo.com'\n      }, {\n        name: 'currentPassword',\n        label: 'Contrase√±a Actual (solo lectura)',\n        type: 'password',\n        readOnly: true,\n        placeholder: 'Contrase√±a actual del usuario',\n        value: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',\n        // Mostrar puntos por seguridad\n        helperText: 'La contrase√±a actual no se puede ver por seguridad'\n      }, {\n        name: 'password',\n        label: 'Nueva Contrase√±a (opcional)',\n        type: 'password',\n        placeholder: 'Dejar en blanco para mantener la actual',\n        helperText: 'M√≠nimo 8 caracteres. Si se deja en blanco, mantiene la contrase√±a actual.'\n      }, {\n        name: 'rol',\n        label: 'Rol',\n        type: 'select',\n        required: true,\n        options: [{\n          value: ROLES.CONSULTA,\n          label: 'Consulta'\n        }]\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CreateFormModal, {\n      isOpen: crearModal.isOpen,\n      onClose: crearModal.closeModal,\n      title: \"Nuevo Usuario del sistema\",\n      onSubmit: async formData => {\n        // Validar email\n        const emailValidation = validateEmail(formData.email);\n        if (!emailValidation.isValid) {\n          throw new Error(emailValidation.error);\n        }\n\n        // Validar password\n        if (!formData.password || formData.password.length < 8) {\n          throw new Error('La contrase√±a debe tener al menos 8 caracteres');\n        }\n\n        // Validar rol\n        if (!formData.rol || formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA') {\n          throw new Error('Rol inv√°lido');\n        }\n\n        // Convertir 'rol' a 'role' para el backend\n        const userData = {\n          email: formData.email,\n          password: formData.password,\n          role: formData.rol\n        };\n        const result = await dbService.createUsuario(userData);\n        if (result.error) {\n          throw new Error(result.error.message || 'Error al crear usuario');\n        }\n        await loadUsuarios();\n      },\n      initialData: {\n        email: '',\n        password: '',\n        rol: ROLES.CONSULTA\n      },\n      fields: [{\n        name: 'email',\n        label: 'Email',\n        type: 'email',\n        required: true,\n        placeholder: 'usuario@ejemplo.com'\n      }, {\n        name: 'password',\n        label: 'Contrase√±a',\n        type: 'password',\n        required: true,\n        placeholder: 'M√≠nimo 8 caracteres',\n        helperText: 'M√≠nimo 8 caracteres. La contrase√±a debe ser segura.'\n      }, {\n        name: 'rol',\n        label: 'Rol',\n        type: 'select',\n        required: true,\n        options: [{\n          value: ROLES.ADMINISTRADOR,\n          label: 'Administrador'\n        }, {\n          value: ROLES.CONSULTA,\n          label: 'Consulta'\n        }]\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n};\n\n// Wrap with React.memo to prevent unnecessary re-renders\n_s(UsuariosComponent, \"VKo5U7YdvqJQK6QX7bZ/BuJRLgM=\", false, function () {\n  return [useFilters, useModal, useModal, useModal];\n});\n_c = UsuariosComponent;\nconst Usuarios = /*#__PURE__*/React.memo(UsuariosComponent);\n_c2 = Usuarios;\nexport default Usuarios;\nvar _c, _c2;\n$RefreshReg$(_c, \"UsuariosComponent\");\n$RefreshReg$(_c2, \"Usuarios\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","DashboardLayout","dbService","ROLES","FilterBar","StatsGrid","DataTable","ActionDropdown","ViewDetailsModal","EditFormModal","CreateFormModal","useFilters","useModal","validateEmail","jsxDEV","_jsxDEV","UsuariosComponent","_s","usuarios","setUsuarios","loading","setLoading","error","setError","canEdit","setCanEdit","filters","filtros","setFilter","clearFilters","rol","busqueda","verModal","editarModal","crearModal","loadUsuarios","console","log","result","getUsuarios","Error","message","usuariosData","Array","isArray","data","length","err","window","deleteUser","userId","deleteUsuario","alert","loadCurrentUser","hasPermission","ADMINISTRADOR","filteredUsuarios","safeUsuarios","filtered","filter","u","role","email","toLowerCase","includes","statsData","title","value","icon","color","subtitle","loadingText","fileName","_jsxFileName","lineNumber","columnNumber","children","className","filterConfig","type","name","label","options","CONSULTA","placeholder","extraActions","onClick","openModal","values","onChange","onClear","showClearButton","stats","columns","gap","key","header","render","usuario","id_usuario","id","hideInMobile","userRole","isAdmin","actions","variant","confirm","keyExtractor","isOpen","onClose","closeModal","modalData","helperText","Date","created_at","toLocaleString","updated_at","onSubmit","formData","emailValidation","isValid","updateData","password","trim","updateUsuario","initialData","fields","required","readOnly","userData","createUsuario","_c","Usuarios","memo","_c2","$RefreshReg$"],"sources":["/Users/todoporunalma/Desktop/ol/corporacion_react/src/pages/Dashboard/Usuarios.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from \"react\";\nimport DashboardLayout from \"components/layout/DashboardLayout\";\nimport { dbService, ROLES } from \"shared/services\";\nimport { FilterBar } from \"components/UI/Filter\";\nimport { StatsGrid } from \"components/UI/Card\";\nimport { DataTable, ActionDropdown } from \"components/UI/Table\";\nimport { ViewDetailsModal, EditFormModal, CreateFormModal } from \"components/common/CRUDModals\";\nimport { useFilters, useModal } from \"shared/hooks\";\nimport { validateEmail } from \"shared/utils/validationUtils\";\n\nconst UsuariosComponent = () => {\n  const [usuarios, setUsuarios] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [canEdit, setCanEdit] = useState(false);\n\n  // Use custom hooks\n  const { filters: filtros, setFilter, clearFilters } = useFilters({\n    rol: \"Todos\",\n    busqueda: \"\"\n  });\n\n  const verModal = useModal();\n  const editarModal = useModal();\n  const crearModal = useModal();\n\n  // Funci√≥n para cargar usuarios\n  const loadUsuarios = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      console.log('üîÑ Cargando usuarios...');\n\n      const result = await dbService.getUsuarios();\n      console.log('üìä Resultado usuarios:', result);\n\n      if (result.error) {\n        throw new Error(result.error.message || 'Error al cargar usuarios');\n      }\n\n      // La respuesta es {data: [...], error: null}\n      const usuariosData = Array.isArray(result.data) ? result.data : [];\n\n      setUsuarios(usuariosData);\n      console.log('‚úÖ Usuarios cargados:', usuariosData.length);\n    } catch (err) {\n      console.error('‚ùå Error cargando usuarios:', err);\n      setError(err.message || 'Error desconocido al cargar usuarios');\n      setUsuarios([]);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Exponer funciones globalmente para el men√∫ desplegable\n  useEffect(() => {\n    window.verModal = verModal;\n    window.editarModal = editarModal;\n    window.deleteUser = async (userId) => {\n      try {\n        const result = await dbService.deleteUsuario(userId);\n        if (result.error) {\n          alert('Error al eliminar usuario: ' + result.error.message);\n        } else {\n          alert('Usuario eliminado exitosamente');\n          await loadUsuarios();\n        }\n      } catch (error) {\n        alert('Error al eliminar usuario: ' + error.message);\n      }\n    };\n\n    return () => {\n      delete window.verModal;\n      delete window.editarModal;\n      delete window.deleteUser;\n    };\n  }, [verModal, editarModal, loadUsuarios]);\n\n  // Cargar usuario actual y verificar permisos\n   useEffect(() => {\n     const loadCurrentUser = async () => {\n       try {\n         console.log('üîê Verificando permisos de administrador...');\n         // Verificar si tiene permisos de administrador\n         const hasPermission = await dbService.hasPermission(ROLES.ADMINISTRADOR);\n         console.log('‚úÖ Permisos de administrador obtenidos:', hasPermission);\n         setCanEdit(hasPermission);\n         console.log('üéØ canEdit establecido como:', hasPermission);\n       } catch (err) {\n         console.error('‚ùå Error cargando permisos:', err);\n         setCanEdit(false);\n       }\n     };\n\n     loadCurrentUser();\n     loadUsuarios();\n   }, [loadUsuarios]);\n\n  // Filtrar usuarios\n  const filteredUsuarios = useMemo(() => {\n    const safeUsuarios = Array.isArray(usuarios) ? usuarios : [];\n    let filtered = safeUsuarios;\n\n    if (filtros.rol !== \"Todos\") {\n      filtered = filtered.filter(u => (u.rol || u.role) === filtros.rol);\n    }\n    if (filtros.busqueda) {\n      filtered = filtered.filter(u =>\n        (u.email || '').toLowerCase().includes(filtros.busqueda.toLowerCase())\n      );\n    }\n    return filtered;\n  }, [usuarios, filtros]);\n\n  // Estad√≠sticas\n  const statsData = useMemo(() => [\n    {\n      title: \"Total Usuarios\",\n      value: filteredUsuarios.length,\n      icon: \"fas fa-users\",\n      color: \"blue\"\n    }\n  ], [filteredUsuarios]);\n\n  if (loading) {\n    return (\n      <DashboardLayout title=\"Usuarios\" subtitle=\"Gesti√≥n de usuarios\" loading={true} loadingText=\"Cargando usuarios...\" />\n    );\n  }\n\n  if (error) {\n    return (\n      <DashboardLayout title=\"Usuarios\" subtitle=\"Error al cargar datos\" loading={false}>\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n            <p className=\"text-red-600\">Error loading usuarios del sistema: {error}</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  // Verificar permisos de acceso a la p√°gina\n  if (!canEdit) {\n    return (\n      <DashboardLayout title=\"Usuarios\" subtitle=\"Acceso denegado\">\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-8 text-center max-w-md\">\n            <i className=\"fas fa-lock text-yellow-600 text-5xl mb-4\"></i>\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">Acceso Denegado</h3>\n            <p className=\"text-gray-600\">No tienes permisos para acceder a esta p√°gina. Solo los administradores pueden gestionar usuarios.</p>\n          </div>\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  const filterConfig = [\n    {\n      type: 'select',\n      name: 'rol',\n      label: 'Rol',\n      options: [\n        { value: 'Todos', label: 'Todos los Roles' },\n        { value: ROLES.ADMINISTRADOR, label: 'Administrador' },\n        { value: ROLES.CONSULTA, label: 'Consulta' }\n      ]\n    },\n    {\n      type: 'search',\n      name: 'busqueda',\n      label: 'B√∫squeda',\n      placeholder: 'Buscar por email...'\n    }\n  ];\n\n  return (\n    <DashboardLayout\n      title=\"Gesti√≥n de Usuarios del sistema\"\n      subtitle=\"Administra los usuarios del sistema\"\n      extraActions={\n        canEdit && (\n          <button\n            onClick={() => crearModal.openModal()}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <i className=\"fas fa-plus mr-2\"></i>\n            Nuevo Usuario\n          </button>\n        )\n      }\n    >\n      <section className=\"px-4 md:px-6 py-4 md:py-6\">\n        <FilterBar\n          filters={filterConfig}\n          values={filtros}\n          onChange={setFilter}\n          onClear={clearFilters}\n          showClearButton={true}\n        />\n\n        {/* Estad√≠sticas R√°pidas */}\n        <div className=\"mt-6\">\n          <StatsGrid\n            stats={statsData}\n            columns={3}\n            gap=\"md\"\n          />\n        </div>\n\n        {/* Tabla de Usuarios */}\n        <div className=\"mt-6\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-800\">Lista de Usuarios del sistema</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">\n                  Gestiona los usuarios del sistema\n                </p>\n              </div>\n              {canEdit ? (\n                <span className=\"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-green-100 text-green-800\">\n                  <i className=\"fas fa-user-shield mr-2\"></i>\n                  Modo Administrador\n                </span>\n              ) : (\n                <span className=\"inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800\">\n                  <i className=\"fas fa-eye mr-2\"></i>\n                  Modo Solo Lectura\n                </span>\n              )}\n            </div>\n          </div>\n\n          {filteredUsuarios.length === 0 ? (\n            <div className=\"p-12 text-center\">\n              <i className=\"fas fa-users text-gray-300 text-4xl mb-4\"></i>\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No se encontraron usuarios del sistema</h3>\n              <p className=\"text-gray-500\">No hay usuarios que coincidan con los filtros aplicados.</p>\n            </div>\n          ) : (\n            <DataTable\n              columns={[\n                {\n                  key: 'email',\n                  header: 'Usuario',\n                  render: (usuario) => (\n                    <div className=\"flex items-center\">\n                      <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3\">\n                        <i className=\"fas fa-user text-blue-600\"></i>\n                      </div>\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"font-medium text-gray-900 truncate\">{usuario.email}</p>\n                        <p className=\"text-sm text-gray-500 truncate\">ID: {usuario.id_usuario || usuario.id}</p>\n                        {/* Mobile-only role info */}\n                        <div className=\"md:hidden mt-1\">\n                          <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${\n                            (usuario.rol || usuario.role) === ROLES.ADMINISTRADOR || (usuario.rol || usuario.role) === 'ADMINISTRADOR'\n                              ? 'bg-purple-100 text-purple-800'\n                              : 'bg-green-100 text-green-800'\n                          }`}>\n                            <i className={`fas ${\n                              (usuario.rol || usuario.role) === ROLES.ADMINISTRADOR || (usuario.rol || usuario.role) === 'ADMINISTRADOR' ? 'fa-user-shield' : 'fa-user'\n                            } mr-1`}></i>\n                            {(usuario.rol || usuario.role) === ROLES.ADMINISTRADOR || (usuario.rol || usuario.role) === 'ADMINISTRADOR' ? 'Admin' : 'Consulta'}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  )\n                },\n                {\n                  key: 'rol',\n                  header: 'Rol',\n                  hideInMobile: true,\n                  render: (usuario) => {\n                    const userRole = usuario.rol || usuario.role;\n                    return (\n                      <span className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${\n                        userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR'\n                          ? 'bg-purple-100 text-purple-800'\n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        <i className={`fas ${\n                          userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'fa-user-shield' : 'fa-user'\n                        } mr-2`}></i>\n                        {userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR' ? 'Administrador' : 'Consulta'}\n                      </span>\n                    );\n                  }\n                },\n                {\n                  key: 'acciones',\n                  header: 'Acciones',\n                  render: (usuario) => {\n                    console.log('üîç Renderizando acciones para usuario:', usuario.email, 'canEdit:', canEdit);\n\n                    if (canEdit) {\n                      console.log('üéØ Renderizando ActionDropdown para:', usuario.email);\n                      const userRole = usuario.rol || usuario.role;\n                      const isAdmin = userRole === ROLES.ADMINISTRADOR || userRole === 'ADMINISTRADOR';\n\n                      if (isAdmin) {\n                        return (\n                          <span className=\"text-xs text-gray-500 font-medium px-2 py-1 bg-gray-100 rounded whitespace-nowrap\">\n                            <i className=\"fas fa-shield-alt mr-1\"></i>\n                            Protegido\n                          </span>\n                        );\n                      }\n\n                      return (\n                        <ActionDropdown\n                          actions={[\n                            {\n                              label: 'Editar',\n                              icon: 'fas fa-edit',\n                              onClick: () => {\n                                console.log('‚úèÔ∏è Editar usuario:', usuario.email);\n                                editarModal.openModal('edit', usuario);\n                              }\n                            },\n                            {\n                              label: 'Eliminar',\n                              icon: 'fas fa-trash',\n                              variant: 'danger',\n                              onClick: () => {\n                                console.log('üóëÔ∏è Eliminar usuario:', usuario.email);\n                                if (window.confirm('¬øEst√°s seguro de que quieres eliminar este usuario?')) {\n                                  window.deleteUser && window.deleteUser(usuario.id_usuario || usuario.id);\n                                }\n                              }\n                            }\n                          ]}\n                        />\n                      );\n                    } else {\n                      return (\n                        <div className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2\">\n                          <button\n                            onClick={() => {\n                              console.log('üëÅÔ∏è Abriendo modal de solo lectura para:', usuario.email);\n                              verModal.openModal('view', usuario);\n                            }}\n                            className=\"text-blue-600 hover:text-blue-800 text-xs sm:text-sm font-medium whitespace-nowrap flex items-center\"\n                          >\n                            <i className=\"fas fa-eye mr-1\"></i>\n                            Ver\n                          </button>\n                          <span className=\"text-xs text-yellow-600 font-medium whitespace-nowrap flex items-center\">\n                            <i className=\"fas fa-lock mr-1\"></i>\n                            Solo Lectura\n                          </span>\n                        </div>\n                      );\n                    }\n                  }\n                }\n              ]}\n              data={filteredUsuarios}\n              keyExtractor={(usuario) => usuario.id_usuario || usuario.id}\n              loading={loading}\n            />\n          )}\n        </div>\n        </div>\n      </section>\n\n      {/* Modales */}\n      <ViewDetailsModal\n        isOpen={verModal.isOpen}\n        onClose={verModal.closeModal}\n        title=\"Detalles del Usuario del sistema\"\n        data={verModal.modalData ? [\n          { label: 'ID', value: verModal.modalData.id_usuario || verModal.modalData.id },\n          { label: 'Email', value: verModal.modalData.email },\n          {\n            label: 'Contrase√±a',\n            value: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢',\n            helperText: 'La contrase√±a est√° oculta por seguridad'\n          },\n          {\n            label: 'Rol',\n            value: (() => {\n              const rol = verModal.modalData.rol || verModal.modalData.role;\n              // Comparaci√≥n m√°s robusta\n              if (rol === ROLES.ADMINISTRADOR || rol === 'ADMINISTRADOR') {\n                return 'Administrador';\n              }\n              return 'Consulta';\n            })()\n          },\n          {\n            label: 'Fecha de creaci√≥n',\n            value: new Date(verModal.modalData.created_at).toLocaleString('es-ES')\n          },\n          {\n            label: '√öltima actualizaci√≥n',\n            value: new Date(verModal.modalData.updated_at).toLocaleString('es-ES')\n          }\n        ] : []}\n      />\n\n      <EditFormModal\n        isOpen={editarModal.isOpen}\n        onClose={editarModal.closeModal}\n        title=\"Editar Usuario del sistema\"\n        onSubmit={async (formData) => {\n          // Validar email\n          const emailValidation = validateEmail(formData.email);\n          if (!emailValidation.isValid) {\n            throw new Error(emailValidation.error);\n          }\n\n          // Validar rol\n          if (!formData.rol || (formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA')) {\n            throw new Error('Rol inv√°lido');\n          }\n\n          // Si no se proporciona password, no lo incluimos en la actualizaci√≥n\n          const updateData = {\n            email: formData.email,\n            role: formData.rol // El backend espera 'role', no 'rol'\n          };\n\n          if (formData.password && formData.password.trim()) {\n            if (formData.password.length < 8) {\n              throw new Error('La contrase√±a debe tener al menos 8 caracteres');\n            }\n            updateData.password = formData.password;\n          }\n\n          const result = await dbService.updateUsuario(editarModal.modalData.id_usuario || editarModal.modalData.id, updateData);\n          if (result.error) {\n            throw new Error(result.error.message || 'Error al actualizar usuario');\n          }\n          await loadUsuarios();\n        }}\n        initialData={editarModal.modalData ? {\n          email: editarModal.modalData.email,\n          password: '',\n          rol: editarModal.modalData.rol || editarModal.modalData.role\n        } : {\n          email: '',\n          password: '',\n          rol: ROLES.CONSULTA\n        }}\n        fields={[\n          {\n            name: 'email',\n            label: 'Email',\n            type: 'email',\n            required: true,\n            placeholder: 'usuario@ejemplo.com'\n          },\n          {\n            name: 'currentPassword',\n            label: 'Contrase√±a Actual (solo lectura)',\n            type: 'password',\n            readOnly: true,\n            placeholder: 'Contrase√±a actual del usuario',\n            value: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢', // Mostrar puntos por seguridad\n            helperText: 'La contrase√±a actual no se puede ver por seguridad'\n          },\n          {\n            name: 'password',\n            label: 'Nueva Contrase√±a (opcional)',\n            type: 'password',\n            placeholder: 'Dejar en blanco para mantener la actual',\n            helperText: 'M√≠nimo 8 caracteres. Si se deja en blanco, mantiene la contrase√±a actual.'\n          },\n          {\n            name: 'rol',\n            label: 'Rol',\n            type: 'select',\n            required: true,\n            options: [\n              { value: ROLES.CONSULTA, label: 'Consulta' }\n            ]\n          }\n        ]}\n      />\n\n      <CreateFormModal\n        isOpen={crearModal.isOpen}\n        onClose={crearModal.closeModal}\n        title=\"Nuevo Usuario del sistema\"\n        onSubmit={async (formData) => {\n          // Validar email\n          const emailValidation = validateEmail(formData.email);\n          if (!emailValidation.isValid) {\n            throw new Error(emailValidation.error);\n          }\n\n          // Validar password\n          if (!formData.password || formData.password.length < 8) {\n            throw new Error('La contrase√±a debe tener al menos 8 caracteres');\n          }\n\n          // Validar rol\n          if (!formData.rol || (formData.rol !== ROLES.ADMINISTRADOR && formData.rol !== ROLES.CONSULTA && formData.rol !== 'ADMINISTRADOR' && formData.rol !== 'CONSULTA')) {\n            throw new Error('Rol inv√°lido');\n          }\n\n          // Convertir 'rol' a 'role' para el backend\n          const userData = {\n            email: formData.email,\n            password: formData.password,\n            role: formData.rol\n          };\n\n          const result = await dbService.createUsuario(userData);\n          if (result.error) {\n            throw new Error(result.error.message || 'Error al crear usuario');\n          }\n          await loadUsuarios();\n        }}\n        initialData={{\n          email: '',\n          password: '',\n          rol: ROLES.CONSULTA\n        }}\n        fields={[\n          {\n            name: 'email',\n            label: 'Email',\n            type: 'email',\n            required: true,\n            placeholder: 'usuario@ejemplo.com'\n          },\n          {\n            name: 'password',\n            label: 'Contrase√±a',\n            type: 'password',\n            required: true,\n            placeholder: 'M√≠nimo 8 caracteres',\n            helperText: 'M√≠nimo 8 caracteres. La contrase√±a debe ser segura.'\n          },\n          {\n            name: 'rol',\n            label: 'Rol',\n            type: 'select',\n            required: true,\n            options: [\n              { value: ROLES.ADMINISTRADOR, label: 'Administrador' },\n              { value: ROLES.CONSULTA, label: 'Consulta' }\n            ]\n          }\n        ]}\n      />\n    </DashboardLayout>\n  );\n};\n\n// Wrap with React.memo to prevent unnecessary re-renders\nconst Usuarios = React.memo(UsuariosComponent);\n\nexport default Usuarios;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}