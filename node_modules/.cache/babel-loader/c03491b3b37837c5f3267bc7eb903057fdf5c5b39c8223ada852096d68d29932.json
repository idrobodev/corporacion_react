{"ast":null,"code":"import _objectSpread from\"/Users/todoporunalma/Desktop/ol/corporacion_react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Servicio API   \nimport axios from'axios';// Configuraci√≥n base de las APIs\n// Solo servicio de autenticaci√≥n\nconst AUTH_API_BASE_URL=process.env.REACT_APP_AUTH_API_BASE_URL||'https://todoporunalma.org/api/auth';console.log('üîß AUTH_API_BASE_URL configurada como:',AUTH_API_BASE_URL);console.log('üîß Full login URL will be:',AUTH_API_BASE_URL+'/auth/login');// Additional diagnostic logging\nconsole.log('üîß API CONFIGURATION DIAGNOSTICS:');console.log('  - REACT_APP_AUTH_API_BASE_URL:',process.env.REACT_APP_AUTH_API_BASE_URL);console.log('  - REACT_APP_API_BASE_URL:',process.env.REACT_APP_API_BASE_URL);console.log('  - REACT_APP_FORMATOS_API_URL:',process.env.REACT_APP_FORMATOS_API_URL);console.log('  - NODE_ENV:',process.env.NODE_ENV);console.log('  - Current hostname:',window.location.hostname);console.log('  - Current protocol:',window.location.protocol);// Crear instancia de axios para autenticaci√≥n\nconst authClient=axios.create({baseURL:AUTH_API_BASE_URL,timeout:30000,withCredentials:false,headers:{'Content-Type':'application/json','Accept':'application/json'}});// Funci√≥n helper para configurar interceptors\nconst setupInterceptors=(client,serviceName)=>{// Interceptor para agregar token de autenticaci√≥n\nclient.interceptors.request.use(config=>{const token=localStorage.getItem('authToken');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{console.error(\"Error en \".concat(serviceName,\" request interceptor:\"),error);return Promise.reject(error);});// Interceptor para manejar respuestas y errores\nclient.interceptors.response.use(response=>response,error=>{var _error$response,_error$response2,_error$response2$data;const errorInfo=generateErrorMessage(error);// Solo log cr√≠tico de errores\nif(errorInfo.isCorsError){var _error$config;console.error(\"CORS ERROR (\".concat(serviceName,\"):\"),(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url);}else if(errorInfo.isNetworkError){console.error(\"Network error (\".concat(serviceName,\"):\"),error.message);}else if(error.response){console.error(\"HTTP \".concat(error.response.status,\" (\").concat(serviceName,\"):\"),error.response.data);}// Manejar errores de autenticaci√≥n\nif(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401&&!errorInfo.isNetworkError){localStorage.removeItem('authToken');localStorage.removeItem('currentUser');window.location.href='/login';}const enhancedError={message:errorInfo.message,type:errorInfo.type,status:errorInfo.status,isCorsError:errorInfo.isCorsError,isNetworkError:errorInfo.isNetworkError,suggestions:errorInfo.suggestions,serverMessage:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||null,originalError:error,response:error.response};return Promise.reject(enhancedError);});};// Configurar interceptors para el cliente de autenticaci√≥n\nsetupInterceptors(authClient,'AUTH');// Definici√≥n de roles del sistema\nexport const ROLES={CONSULTA:'CONSULTA',ADMINISTRADOR:'ADMINISTRADOR'};// ==================== CORS ERROR DETECTION ====================\n/**\n * Detecta si un error de axios es causado por CORS\n * @param {Error} error - El objeto de error de axios\n * @returns {boolean} true si es un error de CORS, false en caso contrario\n */export const detectCorsError=error=>{var _error$message;// CORS errors typically have these characteristics:\n// 1. No response object (preflight or actual request blocked)\n// 2. Network Error message\n// 3. Error code ERR_NETWORK\n// 4. Request was made but no response received\n// Check if there's no response (most common CORS indicator)\nif(!error.response){// Check for network error patterns\nconst isNetworkError=error.message==='Network Error'||error.code==='ERR_NETWORK';// Check if request was configured (means axios tried to send it)\nconst hasRequestConfig=!!error.config;// CORS errors occur when:\n// - There's a network error\n// - Request was configured and attempted\n// - No response was received (blocked by browser)\nif(isNetworkError&&hasRequestConfig){var _error$config2,_error$config3;// Additional check: if the URL is cross-origin\nconst requestUrl=((_error$config2=error.config)===null||_error$config2===void 0?void 0:_error$config2.url)||'';const baseURL=((_error$config3=error.config)===null||_error$config3===void 0?void 0:_error$config3.baseURL)||'';const fullUrl=requestUrl.startsWith('http')?requestUrl:baseURL+requestUrl;// If we're making a request to a different origin, it's likely CORS\nif(fullUrl.startsWith('http')){const currentOrigin=\"\".concat(window.location.protocol,\"//\").concat(window.location.host);const requestOrigin=new URL(fullUrl).origin;// Different origins = likely CORS issue\nif(currentOrigin!==requestOrigin){return true;}}// Even same origin can have CORS issues in some cases\n// If it's a network error with no response, assume CORS\nreturn true;}}// Check for specific CORS-related error messages\nconst errorMessage=((_error$message=error.message)===null||_error$message===void 0?void 0:_error$message.toLowerCase())||'';const corsKeywords=['cors','cross-origin','preflight'];if(corsKeywords.some(keyword=>errorMessage.includes(keyword))){return true;}// Not a CORS error\nreturn false;};// ==================== ERROR MESSAGE GENERATOR ====================\n/**\n * Genera mensajes de error amigables y accionables para diferentes tipos de errores\n * @param {Error} error - El objeto de error original\n * @returns {Object} Objeto con mensaje, sugerencias y tipo de error\n */export const generateErrorMessage=error=>{var _error$response3,_error$message2;const errorInfo={message:'',suggestions:[],type:'unknown',isNetworkError:false,isCorsError:false,status:((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)||0,originalError:error};// Usar la funci√≥n de detecci√≥n de CORS\nconst isCorsError=detectCorsError(error);// Detectar si es un error de red (sin respuesta del servidor)\nconst isNetworkError=!error.response&&(error.message==='Network Error'||error.code==='ERR_NETWORK'||error.code==='ECONNABORTED'||!error.status);if(isCorsError){// Error de CORS\nerrorInfo.type='cors';errorInfo.isCorsError=true;errorInfo.isNetworkError=true;errorInfo.message='No se puede conectar con el servidor debido a restricciones de CORS';errorInfo.suggestions=['üîß Verifica que el servidor backend est√© ejecut√°ndose en http://localhost:8080','üîß Aseg√∫rate de que el backend tenga configurado CORS correctamente','üîç Revisa la consola del navegador para ver detalles espec√≠ficos del error CORS','‚öôÔ∏è Si eres desarrollador, verifica la configuraci√≥n de CORS en el backend (WebMvcConfigurer o SecurityFilterChain)','üîÑ Intenta reiniciar tanto el frontend como el backend','üìù Verifica que el backend permita el origen: '+window.location.origin];}else if(error.code==='ECONNABORTED'||(_error$message2=error.message)!==null&&_error$message2!==void 0&&_error$message2.includes('timeout')){// Error de timeout\nerrorInfo.type='timeout';errorInfo.isNetworkError=true;errorInfo.message='La solicitud al servidor tard√≥ demasiado tiempo (timeout despu√©s de 30 segundos)';errorInfo.suggestions=['üåê Verifica tu conexi√≥n a internet','‚è±Ô∏è El servidor puede estar experimentando alta carga o procesando una operaci√≥n pesada','üîÑ Intenta nuevamente en unos momentos','üìä Si trabajas con grandes vol√∫menes de datos, considera filtrar o paginar los resultados','üîß Si el problema persiste, contacta al administrador del sistema'];}else if(isNetworkError){var _error$config4;// Error de red general (backend no disponible)\nerrorInfo.type='network';errorInfo.isNetworkError=true;errorInfo.message='No se puede conectar con el servidor - Backend no disponible';errorInfo.suggestions=['üöÄ Verifica que el servidor backend est√© ejecut√°ndose en '+(((_error$config4=error.config)===null||_error$config4===void 0?void 0:_error$config4.baseURL)||'http://localhost:8080'),'üåê Comprueba tu conexi√≥n a internet','üîç Aseg√∫rate de que la URL del servidor sea correcta','üõ°Ô∏è Verifica que no haya un firewall bloqueando la conexi√≥n','üîß Si eres desarrollador, inicia el backend con: ./mvnw spring-boot:run','üìû Si el problema persiste, contacta al administrador del sistema'];}else if(error.response){var _error$response$data;// Error HTTP con respuesta del servidor\nconst status=error.response.status;switch(status){case 400:errorInfo.type='validation';errorInfo.message='Los datos enviados no son v√°lidos (Error 400)';errorInfo.suggestions=['üìù Verifica que todos los campos requeridos est√©n completos','‚úÖ Aseg√∫rate de que los datos tengan el formato correcto (emails, tel√©fonos, fechas, etc.)','üîç Revisa los mensajes de validaci√≥n espec√≠ficos del servidor','üìã Verifica que no haya campos con valores inv√°lidos o fuera de rango'];break;case 401:errorInfo.type='authentication';errorInfo.message='No est√°s autenticado o tu sesi√≥n ha expirado (Error 401)';errorInfo.suggestions=['üîê Inicia sesi√≥n nuevamente','‚úÖ Verifica que tus credenciales sean correctas','‚è±Ô∏è Tu sesi√≥n puede haber expirado por inactividad','üîÑ Intenta cerrar sesi√≥n y volver a iniciar sesi√≥n'];break;case 403:errorInfo.type='authorization';errorInfo.message='No tienes permisos para realizar esta acci√≥n (Error 403)';errorInfo.suggestions=['üë§ Contacta al administrador para solicitar los permisos necesarios','üîë Verifica que tu cuenta tenga el rol adecuado','‚öôÔ∏è Puede que necesites permisos de ADMINISTRADOR para esta operaci√≥n','üìã Revisa qu√© acciones est√°n permitidas para tu rol actual'];break;case 404:errorInfo.type='notFound';errorInfo.message='El recurso solicitado no fue encontrado (Error 404)';errorInfo.suggestions=['üîç Verifica que el recurso exista en el sistema','üóëÔ∏è Puede que el recurso haya sido eliminado recientemente','üîÑ Intenta refrescar la p√°gina y volver a intentar','üìã Verifica que el ID o identificador sea correcto'];break;case 409:errorInfo.type='conflict';errorInfo.message='Ya existe un recurso con estos datos (Error 409)';errorInfo.suggestions=['üîç Verifica que no est√©s duplicando informaci√≥n','üìù Puede que ya exista un registro con el mismo identificador √∫nico','‚úèÔ∏è Intenta con datos diferentes o actualiza el registro existente','üîÑ Refresca la lista para ver los datos actuales'];break;case 500:case 502:case 503:case 504:errorInfo.type='serverError';errorInfo.message=\"Error interno del servidor (Error \".concat(status,\")\");errorInfo.suggestions=['üî• El servidor est√° experimentando problemas t√©cnicos','‚è±Ô∏è Intenta nuevamente en unos momentos','üîß Si el problema persiste, contacta al administrador del sistema','üìù Este error ha sido registrado autom√°ticamente para su revisi√≥n','üíæ Verifica que la base de datos est√© disponible (si eres administrador)'];break;default:errorInfo.type='http';errorInfo.message=\"Error del servidor (c\\xF3digo \".concat(status,\")\");errorInfo.suggestions=['‚ùå Ocurri√≥ un error inesperado en el servidor','üîÑ Intenta nuevamente','üìû Si el problema persiste, contacta al soporte t√©cnico','üîç C√≥digo de error: '+status];}// Agregar mensaje espec√≠fico del servidor si est√° disponible\nif((_error$response$data=error.response.data)!==null&&_error$response$data!==void 0&&_error$response$data.message){errorInfo.serverMessage=error.response.data.message;}}else{// Error desconocido\nerrorInfo.type='unknown';errorInfo.message='Ocurri√≥ un error inesperado';errorInfo.suggestions=['üîÑ Intenta refrescar la p√°gina','üåê Verifica tu conexi√≥n a internet','üíæ Limpia la cach√© del navegador si el problema persiste','üîß Intenta cerrar y volver a abrir la aplicaci√≥n','üìû Si el problema persiste, contacta al soporte t√©cnico con detalles del error'];}return errorInfo;};class ApiService{// ==================== AUTENTICACI√ìN ====================\nasync login(email,password){console.log('üîê Starting login request...');console.log('üìß Email:',email);console.log('üåê Auth API URL:',AUTH_API_BASE_URL);console.log('üîó Full login URL:',AUTH_API_BASE_URL+'/auth/login');const startTime=Date.now();try{console.log('üì§ Sending login request...');const response=await authClient.post('/auth/login',{email,password});const responseTime=Date.now()-startTime;console.log('‚úÖ Login request completed in',responseTime,'ms');console.log('üìä Response status:',response.status);// FastAPI returns data directly in response.data, not nested\nconst responseData=response.data;console.log('üì¶ Response data:',responseData);// Check for error in FastAPI response format\nif(responseData.error){console.error('‚ùå Server error in response:',responseData.error);throw new Error(responseData.error.message||'Error en el servidor');}if(!responseData.data){console.error('‚ùå Invalid server response: no data field');throw new Error('Respuesta del servidor inv√°lida');}const{token,user}=responseData.data;console.log('üîë Token received:',!!token);console.log('üë§ User received:',!!user);if(!token||!user){console.error('‚ùå Incomplete server response - missing token or user');throw new Error('Respuesta del servidor incompleta');}console.log('üíæ Storing auth data in localStorage...');localStorage.setItem('authToken',token);localStorage.setItem('currentUser',JSON.stringify(user));console.log('üéâ Login successful!');return{data:{user,token},error:null};}catch(error){const responseTime=Date.now()-startTime;console.error('üí• Login failed after',responseTime,'ms');console.error('‚ùå Error details:',error);if(error.response){var _error$response$data2,_error$response$data3,_error$response$data4,_error$response$data5;console.error('üìä HTTP Error Response:');console.error('   Status:',error.response.status);console.error('   Status Text:',error.response.statusText);console.error('   Headers:',error.response.headers);console.error('   Data:',error.response.data);// Handle FastAPI error format\nconst serverMessage=((_error$response$data2=error.response.data)===null||_error$response$data2===void 0?void 0:_error$response$data2.detail)||((_error$response$data3=error.response.data)===null||_error$response$data3===void 0?void 0:_error$response$data3.message)||((_error$response$data4=error.response.data)===null||_error$response$data4===void 0?void 0:(_error$response$data5=_error$response$data4.error)===null||_error$response$data5===void 0?void 0:_error$response$data5.message);throw new Error(serverMessage||'Error del servidor');}else if(error.request){var _error$config5;console.error('üåê Network Error - No response received:');console.error('   Request config:',error.config);console.error('   Timeout was set to:',(_error$config5=error.config)===null||_error$config5===void 0?void 0:_error$config5.timeout,'ms');throw new Error('No se pudo conectar con el servidor. Verifica que el backend est√© corriendo.');}else{console.error('‚ö†Ô∏è Unexpected error:',error.message);throw error;}}}// Cerrar sesi√≥n\nasync logout(){try{await authClient.post('/auth/logout');// Limpiar localStorage\nlocalStorage.removeItem('authToken');localStorage.removeItem('currentUser');return{success:true,error:null};}catch(error){console.error('Error en logout:',error);// Limpiar localStorage aunque falle la petici√≥n\nlocalStorage.removeItem('authToken');localStorage.removeItem('currentUser');return{success:true,error:null};}}// Restablecer contrase√±a\nasync resetPassword(email){try{const response=await authClient.post('/auth/reset-password',{email});return{data:response.data,error:null};}catch(error){console.error('Error en reset password:',error);return{data:null,error:{message:error.message||'Error al restablecer contrase√±a'}};}}async getCurrentUser(){try{const storedUser=localStorage.getItem('currentUser');const storedToken=localStorage.getItem('authToken');if(storedUser&&storedToken){try{const user=JSON.parse(storedUser);if(user&&user.email&&user.id){return{data:user,error:null};}else{localStorage.removeItem('currentUser');localStorage.removeItem('authToken');return{data:null,error:null};}}catch(parseError){console.error('Error parseando usuario:',parseError);localStorage.removeItem('currentUser');localStorage.removeItem('authToken');return{data:null,error:null};}}return{data:null,error:null};}catch(error){console.error('Error obteniendo usuario actual:',error);return{data:null,error};}}// Actualizar perfil de usuario\nasync updateProfile(profileData){try{const response=await authClient.put('/auth/profile',profileData);// Actualizar usuario en localStorage\nconst currentUser=JSON.parse(localStorage.getItem('currentUser')||'{}');const updatedUser=_objectSpread(_objectSpread({},currentUser),response.data);localStorage.setItem('currentUser',JSON.stringify(updatedUser));return{data:response.data,error:null};}catch(error){console.error('Error actualizando perfil:',error);return{data:null,error:{message:error.message||'Error al actualizar perfil'}};}}// Verificar permisos del usuario\nasync hasPermission(requiredRole){try{// Consultar endpoint real en backend FastAPI\nconst response=await authClient.get('/auth/permission',{params:{role:requiredRole}});return response.data.hasPermission||false;}catch(error){console.error('Error verificando permisos:',error);// Fallback temporal a verificaci√≥n local si el endpoint no existe\ntry{const{data:user}=await this.getCurrentUser();if(!user)return false;const userRole=user.rol||user.role||ROLES.CONSULTA;// Jerarqu√≠a de roles: ADMINISTRADOR > CONSULTA\nconst roleHierarchy={[ROLES.ADMINISTRADOR]:2,[ROLES.CONSULTA]:1};const userLevel=roleHierarchy[userRole]||1;const requiredLevel=roleHierarchy[requiredRole]||1;return userLevel>=requiredLevel;}catch(fallbackError){console.error('Fallback tambi√©n fall√≥:',fallbackError);return false;}}}// ==================== UTILIDADES ====================\n/**\n   * Verifica la conexi√≥n con el backend de autenticaci√≥n\n   * @returns {Promise<Object>} Objeto con informaci√≥n detallada de la conexi√≥n\n   */async testConnection(){const startTime=Date.now();const results={auth:null,overall:{success:false,message:'Conexi√≥n fallida'}};// Test auth service\ntry{const authResponse=await authClient.get('/health');results.auth={success:true,connected:true,responseTime:Date.now()-startTime,status:authResponse.status,baseURL:AUTH_API_BASE_URL,data:authResponse.data,message:'Conexi√≥n exitosa con auth service'};}catch(error){const errorInfo=generateErrorMessage(error);results.auth={success:false,connected:false,responseTime:Date.now()-startTime,baseURL:AUTH_API_BASE_URL,error:error.message||'Error de conexi√≥n',errorType:errorInfo.type,isCorsError:errorInfo.isCorsError,isNetworkError:errorInfo.isNetworkError,suggestions:errorInfo.suggestions,message:errorInfo.message};}// Overall result\nconst authSuccess=results.auth.success;if(authSuccess){results.overall={success:true,message:'Conexi√≥n exitosa con el servicio de autenticaci√≥n'};}else{results.overall={success:false,message:'El servicio de autenticaci√≥n no est√° disponible'};}return results;}/**\n   * Verifica si el backend de autenticaci√≥n est√° disponible antes de operaciones cr√≠ticas\n   * @param {number} timeout - Timeout en milisegundos (por defecto 5000ms)\n   * @returns {Promise<Object>} Objeto con estado del servicio\n   */async isBackendReachable(){let timeout=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5000;const results={auth:false};// Check auth service\ntry{const authCheck=axios.create({baseURL:AUTH_API_BASE_URL,timeout:timeout,headers:{'Accept':'application/json'}});await authCheck.get('/health');results.auth=true;}catch(error){console.warn('Auth service no disponible:',error.message);}return results;}// ==================== DASHBOARD ====================\n// Obtener datos del dashboard\nasync getDashboardData(){try{const response=await authClient.get('/dashboard/dashboard/stats');return{data:response.data,error:null};}catch(error){console.error('Error obteniendo datos del dashboard:',error);return{data:null,error:{message:error.message||'Error al obtener datos del dashboard'}};}}// ==================== ACUDIENTES ====================\n// Obtener lista de acudientes\nasync getAcudientes(filters){try{const response=await authClient.get('/dashboard/acudientes',{params:filters});return{data:response.data,error:null};}catch(error){console.error('Error obteniendo acudientes:',error);return{data:null,error:{message:error.message||'Error al obtener acudientes'}};}}// Obtener configuraci√≥n de la API\ngetApiConfig(){return{authBaseURL:AUTH_API_BASE_URL,hasToken:!!localStorage.getItem('authToken'),environment:process.env.NODE_ENV,isConfigured:!!AUTH_API_BASE_URL};}}// Exportar instancia √∫nica del servicio\nexport const api=new ApiService();export default api;// Exportar cliente axios para uso directo si es necesario\nexport{authClient};","map":{"version":3,"names":["axios","AUTH_API_BASE_URL","process","env","REACT_APP_AUTH_API_BASE_URL","console","log","REACT_APP_API_BASE_URL","REACT_APP_FORMATOS_API_URL","NODE_ENV","window","location","hostname","protocol","authClient","create","baseURL","timeout","withCredentials","headers","setupInterceptors","client","serviceName","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","_error$response2","_error$response2$data","errorInfo","generateErrorMessage","isCorsError","_error$config","url","isNetworkError","message","status","data","removeItem","href","enhancedError","type","suggestions","serverMessage","originalError","ROLES","CONSULTA","ADMINISTRADOR","detectCorsError","_error$message","code","hasRequestConfig","_error$config2","_error$config3","requestUrl","fullUrl","startsWith","currentOrigin","host","requestOrigin","URL","origin","errorMessage","toLowerCase","corsKeywords","some","keyword","includes","_error$response3","_error$message2","_error$config4","_error$response$data","ApiService","login","email","password","startTime","Date","now","post","responseTime","responseData","Error","user","setItem","JSON","stringify","_error$response$data2","_error$response$data3","_error$response$data4","_error$response$data5","statusText","detail","_error$config5","logout","success","resetPassword","getCurrentUser","storedUser","storedToken","parse","id","parseError","updateProfile","profileData","put","currentUser","updatedUser","_objectSpread","hasPermission","requiredRole","get","params","role","userRole","rol","roleHierarchy","userLevel","requiredLevel","fallbackError","testConnection","results","auth","overall","authResponse","connected","errorType","authSuccess","isBackendReachable","arguments","length","undefined","authCheck","warn","getDashboardData","getAcudientes","filters","getApiConfig","authBaseURL","hasToken","environment","isConfigured","api"],"sources":["/Users/todoporunalma/Desktop/ol/corporacion_react/src/shared/services/api.js"],"sourcesContent":["// Servicio API   \nimport axios from 'axios';\n\n// Configuraci√≥n base de las APIs\n// Solo servicio de autenticaci√≥n\nconst AUTH_API_BASE_URL = process.env.REACT_APP_AUTH_API_BASE_URL ||\n  'https://todoporunalma.org/api/auth';\n\nconsole.log('üîß AUTH_API_BASE_URL configurada como:', AUTH_API_BASE_URL);\nconsole.log('üîß Full login URL will be:', AUTH_API_BASE_URL + '/auth/login');\n\n// Additional diagnostic logging\nconsole.log('üîß API CONFIGURATION DIAGNOSTICS:');\nconsole.log('  - REACT_APP_AUTH_API_BASE_URL:', process.env.REACT_APP_AUTH_API_BASE_URL);\nconsole.log('  - REACT_APP_API_BASE_URL:', process.env.REACT_APP_API_BASE_URL);\nconsole.log('  - REACT_APP_FORMATOS_API_URL:', process.env.REACT_APP_FORMATOS_API_URL);\nconsole.log('  - NODE_ENV:', process.env.NODE_ENV);\nconsole.log('  - Current hostname:', window.location.hostname);\nconsole.log('  - Current protocol:', window.location.protocol);\n\n// Crear instancia de axios para autenticaci√≥n\nconst authClient = axios.create({\n  baseURL: AUTH_API_BASE_URL,\n  timeout: 30000,\n  withCredentials: false,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n  },\n});\n\n// Funci√≥n helper para configurar interceptors\nconst setupInterceptors = (client, serviceName) => {\n  // Interceptor para agregar token de autenticaci√≥n\n  client.interceptors.request.use(\n    (config) => {\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    },\n    (error) => {\n      console.error(`Error en ${serviceName} request interceptor:`, error);\n      return Promise.reject(error);\n    }\n  );\n\n  // Interceptor para manejar respuestas y errores\n  client.interceptors.response.use(\n    (response) => response,\n    (error) => {\n      const errorInfo = generateErrorMessage(error);\n\n      // Solo log cr√≠tico de errores\n      if (errorInfo.isCorsError) {\n        console.error(`CORS ERROR (${serviceName}):`, error.config?.url);\n      } else if (errorInfo.isNetworkError) {\n        console.error(`Network error (${serviceName}):`, error.message);\n      } else if (error.response) {\n        console.error(`HTTP ${error.response.status} (${serviceName}):`, error.response.data);\n      }\n\n      // Manejar errores de autenticaci√≥n\n      if (error.response?.status === 401 && !errorInfo.isNetworkError) {\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('currentUser');\n        window.location.href = '/login';\n      }\n\n      const enhancedError = {\n        message: errorInfo.message,\n        type: errorInfo.type,\n        status: errorInfo.status,\n        isCorsError: errorInfo.isCorsError,\n        isNetworkError: errorInfo.isNetworkError,\n        suggestions: errorInfo.suggestions,\n        serverMessage: error.response?.data?.message || null,\n        originalError: error,\n        response: error.response\n      };\n\n      return Promise.reject(enhancedError);\n    }\n  );\n};\n\n// Configurar interceptors para el cliente de autenticaci√≥n\nsetupInterceptors(authClient, 'AUTH');\n\n// Definici√≥n de roles del sistema\nexport const ROLES = {\n  CONSULTA: 'CONSULTA',\n  ADMINISTRADOR: 'ADMINISTRADOR'\n};\n\n// ==================== CORS ERROR DETECTION ====================\n\n/**\n * Detecta si un error de axios es causado por CORS\n * @param {Error} error - El objeto de error de axios\n * @returns {boolean} true si es un error de CORS, false en caso contrario\n */\nexport const detectCorsError = (error) => {\n  // CORS errors typically have these characteristics:\n  // 1. No response object (preflight or actual request blocked)\n  // 2. Network Error message\n  // 3. Error code ERR_NETWORK\n  // 4. Request was made but no response received\n\n  // Check if there's no response (most common CORS indicator)\n  if (!error.response) {\n    // Check for network error patterns\n    const isNetworkError = error.message === 'Network Error' ||\n      error.code === 'ERR_NETWORK';\n\n    // Check if request was configured (means axios tried to send it)\n    const hasRequestConfig = !!error.config;\n\n    // CORS errors occur when:\n    // - There's a network error\n    // - Request was configured and attempted\n    // - No response was received (blocked by browser)\n    if (isNetworkError && hasRequestConfig) {\n      // Additional check: if the URL is cross-origin\n      const requestUrl = error.config?.url || '';\n      const baseURL = error.config?.baseURL || '';\n      const fullUrl = requestUrl.startsWith('http') ? requestUrl : baseURL + requestUrl;\n\n      // If we're making a request to a different origin, it's likely CORS\n      if (fullUrl.startsWith('http')) {\n        const currentOrigin = `${window.location.protocol}//${window.location.host}`;\n        const requestOrigin = new URL(fullUrl).origin;\n\n        // Different origins = likely CORS issue\n        if (currentOrigin !== requestOrigin) {\n          return true;\n        }\n      }\n\n      // Even same origin can have CORS issues in some cases\n      // If it's a network error with no response, assume CORS\n      return true;\n    }\n  }\n\n  // Check for specific CORS-related error messages\n  const errorMessage = error.message?.toLowerCase() || '';\n  const corsKeywords = ['cors', 'cross-origin', 'preflight'];\n\n  if (corsKeywords.some(keyword => errorMessage.includes(keyword))) {\n    return true;\n  }\n\n  // Not a CORS error\n  return false;\n};\n\n// ==================== ERROR MESSAGE GENERATOR ====================\n\n/**\n * Genera mensajes de error amigables y accionables para diferentes tipos de errores\n * @param {Error} error - El objeto de error original\n * @returns {Object} Objeto con mensaje, sugerencias y tipo de error\n */\nexport const generateErrorMessage = (error) => {\n  const errorInfo = {\n    message: '',\n    suggestions: [],\n    type: 'unknown',\n    isNetworkError: false,\n    isCorsError: false,\n    status: error.response?.status || 0,\n    originalError: error\n  };\n\n  // Usar la funci√≥n de detecci√≥n de CORS\n  const isCorsError = detectCorsError(error);\n\n  // Detectar si es un error de red (sin respuesta del servidor)\n  const isNetworkError = !error.response && (\n    error.message === 'Network Error' ||\n    error.code === 'ERR_NETWORK' ||\n    error.code === 'ECONNABORTED' ||\n    !error.status\n  );\n\n  if (isCorsError) {\n    // Error de CORS\n    errorInfo.type = 'cors';\n    errorInfo.isCorsError = true;\n    errorInfo.isNetworkError = true;\n    errorInfo.message = 'No se puede conectar con el servidor debido a restricciones de CORS';\n    errorInfo.suggestions = [\n      'üîß Verifica que el servidor backend est√© ejecut√°ndose en http://localhost:8080',\n      'üîß Aseg√∫rate de que el backend tenga configurado CORS correctamente',\n      'üîç Revisa la consola del navegador para ver detalles espec√≠ficos del error CORS',\n      '‚öôÔ∏è Si eres desarrollador, verifica la configuraci√≥n de CORS en el backend (WebMvcConfigurer o SecurityFilterChain)',\n      'üîÑ Intenta reiniciar tanto el frontend como el backend',\n      'üìù Verifica que el backend permita el origen: ' + window.location.origin\n    ];\n  } else if (error.code === 'ECONNABORTED' || error.message?.includes('timeout')) {\n    // Error de timeout\n    errorInfo.type = 'timeout';\n    errorInfo.isNetworkError = true;\n    errorInfo.message = 'La solicitud al servidor tard√≥ demasiado tiempo (timeout despu√©s de 30 segundos)';\n    errorInfo.suggestions = [\n      'üåê Verifica tu conexi√≥n a internet',\n      '‚è±Ô∏è El servidor puede estar experimentando alta carga o procesando una operaci√≥n pesada',\n      'üîÑ Intenta nuevamente en unos momentos',\n      'üìä Si trabajas con grandes vol√∫menes de datos, considera filtrar o paginar los resultados',\n      'üîß Si el problema persiste, contacta al administrador del sistema'\n    ];\n  } else if (isNetworkError) {\n    // Error de red general (backend no disponible)\n    errorInfo.type = 'network';\n    errorInfo.isNetworkError = true;\n    errorInfo.message = 'No se puede conectar con el servidor - Backend no disponible';\n    errorInfo.suggestions = [\n      'üöÄ Verifica que el servidor backend est√© ejecut√°ndose en ' + (error.config?.baseURL || 'http://localhost:8080'),\n      'üåê Comprueba tu conexi√≥n a internet',\n      'üîç Aseg√∫rate de que la URL del servidor sea correcta',\n      'üõ°Ô∏è Verifica que no haya un firewall bloqueando la conexi√≥n',\n      'üîß Si eres desarrollador, inicia el backend con: ./mvnw spring-boot:run',\n      'üìû Si el problema persiste, contacta al administrador del sistema'\n    ];\n  } else if (error.response) {\n    // Error HTTP con respuesta del servidor\n    const status = error.response.status;\n\n    switch (status) {\n      case 400:\n        errorInfo.type = 'validation';\n        errorInfo.message = 'Los datos enviados no son v√°lidos (Error 400)';\n        errorInfo.suggestions = [\n          'üìù Verifica que todos los campos requeridos est√©n completos',\n          '‚úÖ Aseg√∫rate de que los datos tengan el formato correcto (emails, tel√©fonos, fechas, etc.)',\n          'üîç Revisa los mensajes de validaci√≥n espec√≠ficos del servidor',\n          'üìã Verifica que no haya campos con valores inv√°lidos o fuera de rango'\n        ];\n        break;\n\n      case 401:\n        errorInfo.type = 'authentication';\n        errorInfo.message = 'No est√°s autenticado o tu sesi√≥n ha expirado (Error 401)';\n        errorInfo.suggestions = [\n          'üîê Inicia sesi√≥n nuevamente',\n          '‚úÖ Verifica que tus credenciales sean correctas',\n          '‚è±Ô∏è Tu sesi√≥n puede haber expirado por inactividad',\n          'üîÑ Intenta cerrar sesi√≥n y volver a iniciar sesi√≥n'\n        ];\n        break;\n\n      case 403:\n        errorInfo.type = 'authorization';\n        errorInfo.message = 'No tienes permisos para realizar esta acci√≥n (Error 403)';\n        errorInfo.suggestions = [\n          'üë§ Contacta al administrador para solicitar los permisos necesarios',\n          'üîë Verifica que tu cuenta tenga el rol adecuado',\n          '‚öôÔ∏è Puede que necesites permisos de ADMINISTRADOR para esta operaci√≥n',\n          'üìã Revisa qu√© acciones est√°n permitidas para tu rol actual'\n        ];\n        break;\n\n      case 404:\n        errorInfo.type = 'notFound';\n        errorInfo.message = 'El recurso solicitado no fue encontrado (Error 404)';\n        errorInfo.suggestions = [\n          'üîç Verifica que el recurso exista en el sistema',\n          'üóëÔ∏è Puede que el recurso haya sido eliminado recientemente',\n          'üîÑ Intenta refrescar la p√°gina y volver a intentar',\n          'üìã Verifica que el ID o identificador sea correcto'\n        ];\n        break;\n\n      case 409:\n        errorInfo.type = 'conflict';\n        errorInfo.message = 'Ya existe un recurso con estos datos (Error 409)';\n        errorInfo.suggestions = [\n          'üîç Verifica que no est√©s duplicando informaci√≥n',\n          'üìù Puede que ya exista un registro con el mismo identificador √∫nico',\n          '‚úèÔ∏è Intenta con datos diferentes o actualiza el registro existente',\n          'üîÑ Refresca la lista para ver los datos actuales'\n        ];\n        break;\n\n      case 500:\n      case 502:\n      case 503:\n      case 504:\n        errorInfo.type = 'serverError';\n        errorInfo.message = `Error interno del servidor (Error ${status})`;\n        errorInfo.suggestions = [\n          'üî• El servidor est√° experimentando problemas t√©cnicos',\n          '‚è±Ô∏è Intenta nuevamente en unos momentos',\n          'üîß Si el problema persiste, contacta al administrador del sistema',\n          'üìù Este error ha sido registrado autom√°ticamente para su revisi√≥n',\n          'üíæ Verifica que la base de datos est√© disponible (si eres administrador)'\n        ];\n        break;\n\n      default:\n        errorInfo.type = 'http';\n        errorInfo.message = `Error del servidor (c√≥digo ${status})`;\n        errorInfo.suggestions = [\n          '‚ùå Ocurri√≥ un error inesperado en el servidor',\n          'üîÑ Intenta nuevamente',\n          'üìû Si el problema persiste, contacta al soporte t√©cnico',\n          'üîç C√≥digo de error: ' + status\n        ];\n    }\n\n    // Agregar mensaje espec√≠fico del servidor si est√° disponible\n    if (error.response.data?.message) {\n      errorInfo.serverMessage = error.response.data.message;\n    }\n  } else {\n    // Error desconocido\n    errorInfo.type = 'unknown';\n    errorInfo.message = 'Ocurri√≥ un error inesperado';\n    errorInfo.suggestions = [\n      'üîÑ Intenta refrescar la p√°gina',\n      'üåê Verifica tu conexi√≥n a internet',\n      'üíæ Limpia la cach√© del navegador si el problema persiste',\n      'üîß Intenta cerrar y volver a abrir la aplicaci√≥n',\n      'üìû Si el problema persiste, contacta al soporte t√©cnico con detalles del error'\n    ];\n  }\n\n  return errorInfo;\n};\n\nclass ApiService {\n  // ==================== AUTENTICACI√ìN ====================\n\n  async login(email, password) {\n    console.log('üîê Starting login request...');\n    console.log('üìß Email:', email);\n    console.log('üåê Auth API URL:', AUTH_API_BASE_URL);\n    console.log('üîó Full login URL:', AUTH_API_BASE_URL + '/auth/login');\n\n    const startTime = Date.now();\n\n    try {\n      console.log('üì§ Sending login request...');\n      const response = await authClient.post('/auth/login', { email, password });\n      const responseTime = Date.now() - startTime;\n      console.log('‚úÖ Login request completed in', responseTime, 'ms');\n      console.log('üìä Response status:', response.status);\n\n      // FastAPI returns data directly in response.data, not nested\n      const responseData = response.data;\n      console.log('üì¶ Response data:', responseData);\n\n      // Check for error in FastAPI response format\n      if (responseData.error) {\n        console.error('‚ùå Server error in response:', responseData.error);\n        throw new Error(responseData.error.message || 'Error en el servidor');\n      }\n\n      if (!responseData.data) {\n        console.error('‚ùå Invalid server response: no data field');\n        throw new Error('Respuesta del servidor inv√°lida');\n      }\n\n      const { token, user } = responseData.data;\n      console.log('üîë Token received:', !!token);\n      console.log('üë§ User received:', !!user);\n\n      if (!token || !user) {\n        console.error('‚ùå Incomplete server response - missing token or user');\n        throw new Error('Respuesta del servidor incompleta');\n      }\n\n      console.log('üíæ Storing auth data in localStorage...');\n      localStorage.setItem('authToken', token);\n      localStorage.setItem('currentUser', JSON.stringify(user));\n\n      console.log('üéâ Login successful!');\n      return { data: { user, token }, error: null };\n    } catch (error) {\n      const responseTime = Date.now() - startTime;\n      console.error('üí• Login failed after', responseTime, 'ms');\n      console.error('‚ùå Error details:', error);\n\n      if (error.response) {\n        console.error('üìä HTTP Error Response:');\n        console.error('   Status:', error.response.status);\n        console.error('   Status Text:', error.response.statusText);\n        console.error('   Headers:', error.response.headers);\n        console.error('   Data:', error.response.data);\n\n        // Handle FastAPI error format\n        const serverMessage = error.response.data?.detail ||\n                            error.response.data?.message ||\n                            error.response.data?.error?.message;\n        throw new Error(serverMessage || 'Error del servidor');\n      } else if (error.request) {\n        console.error('üåê Network Error - No response received:');\n        console.error('   Request config:', error.config);\n        console.error('   Timeout was set to:', error.config?.timeout, 'ms');\n        throw new Error('No se pudo conectar con el servidor. Verifica que el backend est√© corriendo.');\n      } else {\n        console.error('‚ö†Ô∏è Unexpected error:', error.message);\n        throw error;\n      }\n    }\n  }\n\n  // Cerrar sesi√≥n\n  async logout() {\n    try {\n      await authClient.post('/auth/logout');\n\n      // Limpiar localStorage\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('currentUser');\n\n      return { success: true, error: null };\n    } catch (error) {\n      console.error('Error en logout:', error);\n      // Limpiar localStorage aunque falle la petici√≥n\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('currentUser');\n      return { success: true, error: null };\n    }\n  }\n\n\n  // Restablecer contrase√±a\n  async resetPassword(email) {\n    try {\n      const response = await authClient.post('/auth/reset-password', { email });\n      return { data: response.data, error: null };\n    } catch (error) {\n      console.error('Error en reset password:', error);\n      return {\n        data: null,\n        error: {\n          message: error.message || 'Error al restablecer contrase√±a'\n        }\n      };\n    }\n  }\n\n  async getCurrentUser() {\n    try {\n      const storedUser = localStorage.getItem('currentUser');\n      const storedToken = localStorage.getItem('authToken');\n\n      if (storedUser && storedToken) {\n        try {\n          const user = JSON.parse(storedUser);\n\n          if (user && user.email && user.id) {\n            return { data: user, error: null };\n          } else {\n            localStorage.removeItem('currentUser');\n            localStorage.removeItem('authToken');\n            return { data: null, error: null };\n          }\n        } catch (parseError) {\n          console.error('Error parseando usuario:', parseError);\n          localStorage.removeItem('currentUser');\n          localStorage.removeItem('authToken');\n          return { data: null, error: null };\n        }\n      }\n\n      return { data: null, error: null };\n    } catch (error) {\n      console.error('Error obteniendo usuario actual:', error);\n      return { data: null, error };\n    }\n  }\n\n  // Actualizar perfil de usuario\n  async updateProfile(profileData) {\n    try {\n      const response = await authClient.put('/auth/profile', profileData);\n\n      // Actualizar usuario en localStorage\n      const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');\n      const updatedUser = { ...currentUser, ...response.data };\n      localStorage.setItem('currentUser', JSON.stringify(updatedUser));\n\n      return { data: response.data, error: null };\n    } catch (error) {\n      console.error('Error actualizando perfil:', error);\n      return {\n        data: null,\n        error: {\n          message: error.message || 'Error al actualizar perfil'\n        }\n      };\n    }\n  }\n\n  // Verificar permisos del usuario\n  async hasPermission(requiredRole) {\n    try {\n      // Consultar endpoint real en backend FastAPI\n      const response = await authClient.get('/auth/permission', {\n        params: { role: requiredRole }\n      });\n\n      return response.data.hasPermission || false;\n    } catch (error) {\n      console.error('Error verificando permisos:', error);\n      // Fallback temporal a verificaci√≥n local si el endpoint no existe\n      try {\n        const { data: user } = await this.getCurrentUser();\n\n        if (!user) return false;\n\n        const userRole = user.rol || user.role || ROLES.CONSULTA;\n\n        // Jerarqu√≠a de roles: ADMINISTRADOR > CONSULTA\n        const roleHierarchy = {\n          [ROLES.ADMINISTRADOR]: 2,\n          [ROLES.CONSULTA]: 1\n        };\n\n        const userLevel = roleHierarchy[userRole] || 1;\n        const requiredLevel = roleHierarchy[requiredRole] || 1;\n\n        return userLevel >= requiredLevel;\n      } catch (fallbackError) {\n        console.error('Fallback tambi√©n fall√≥:', fallbackError);\n        return false;\n      }\n    }\n  }\n\n\n  // ==================== UTILIDADES ====================\n  \n  /**\n   * Verifica la conexi√≥n con el backend de autenticaci√≥n\n   * @returns {Promise<Object>} Objeto con informaci√≥n detallada de la conexi√≥n\n   */\n  async testConnection() {\n    const startTime = Date.now();\n    const results = {\n      auth: null,\n      overall: { success: false, message: 'Conexi√≥n fallida' }\n    };\n  \n    // Test auth service\n    try {\n      const authResponse = await authClient.get('/health');\n      results.auth = {\n        success: true,\n        connected: true,\n        responseTime: Date.now() - startTime,\n        status: authResponse.status,\n        baseURL: AUTH_API_BASE_URL,\n        data: authResponse.data,\n        message: 'Conexi√≥n exitosa con auth service'\n      };\n    } catch (error) {\n      const errorInfo = generateErrorMessage(error);\n      results.auth = {\n        success: false,\n        connected: false,\n        responseTime: Date.now() - startTime,\n        baseURL: AUTH_API_BASE_URL,\n        error: error.message || 'Error de conexi√≥n',\n        errorType: errorInfo.type,\n        isCorsError: errorInfo.isCorsError,\n        isNetworkError: errorInfo.isNetworkError,\n        suggestions: errorInfo.suggestions,\n        message: errorInfo.message\n      };\n    }\n  \n    // Overall result\n    const authSuccess = results.auth.success;\n  \n    if (authSuccess) {\n      results.overall = {\n        success: true,\n        message: 'Conexi√≥n exitosa con el servicio de autenticaci√≥n'\n      };\n    } else {\n      results.overall = {\n        success: false,\n        message: 'El servicio de autenticaci√≥n no est√° disponible'\n      };\n    }\n  \n    return results;\n  }\n  \n  /**\n   * Verifica si el backend de autenticaci√≥n est√° disponible antes de operaciones cr√≠ticas\n   * @param {number} timeout - Timeout en milisegundos (por defecto 5000ms)\n   * @returns {Promise<Object>} Objeto con estado del servicio\n   */\n  async isBackendReachable(timeout = 5000) {\n    const results = { auth: false };\n  \n    // Check auth service\n    try {\n      const authCheck = axios.create({\n        baseURL: AUTH_API_BASE_URL,\n        timeout: timeout,\n        headers: { 'Accept': 'application/json' }\n      });\n      await authCheck.get('/health');\n      results.auth = true;\n    } catch (error) {\n      console.warn('Auth service no disponible:', error.message);\n    }\n  \n    return results;\n  }\n  \n  // ==================== DASHBOARD ====================\n\n  // Obtener datos del dashboard\n  async getDashboardData() {\n    try {\n      const response = await authClient.get('/dashboard/dashboard/stats');\n      return { data: response.data, error: null };\n    } catch (error) {\n      console.error('Error obteniendo datos del dashboard:', error);\n      return {\n        data: null,\n        error: {\n          message: error.message || 'Error al obtener datos del dashboard'\n        }\n      };\n    }\n  }\n\n  // ==================== ACUDIENTES ====================\n\n  // Obtener lista de acudientes\n  async getAcudientes(filters) {\n    try {\n      const response = await authClient.get('/dashboard/acudientes', {\n        params: filters\n      });\n      return { data: response.data, error: null };\n    } catch (error) {\n      console.error('Error obteniendo acudientes:', error);\n      return {\n        data: null,\n        error: {\n          message: error.message || 'Error al obtener acudientes'\n        }\n      };\n    }\n  }\n\n  // Obtener configuraci√≥n de la API\n  getApiConfig() {\n    return {\n      authBaseURL: AUTH_API_BASE_URL,\n      hasToken: !!localStorage.getItem('authToken'),\n      environment: process.env.NODE_ENV,\n      isConfigured: !!AUTH_API_BASE_URL\n    };\n  }\n}\n\n// Exportar instancia √∫nica del servicio\nexport const api = new ApiService();\nexport default api;\n\n// Exportar cliente axios para uso directo si es necesario\nexport { authClient };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}